(self.webpackChunkbdp_client=self.webpackChunkbdp_client||[]).push([[571],{12571:function(t,e,s){"use strict";s.r(e),s.d(e,{ResultModule:function(){return cr}});var i=s(61116),n=s(31041),r=s(84369),a=s(92762),o=s(6489),l=s(9550),c=s(57173),u=s(77307),d=s(39199),g=s(59241),p=s(24311),f=s(36278),h=s(5609),m=s(35366),Z=s(87064),x=s(19861),w=s(26136),b=s(87570),k=s(87254),T=s(43835);const A=["primaryValueBar"];class q{constructor(t){this._elementRef=t}}const v=(0,Z.pj)(q,"primary"),y=new m.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=(0,m.f3M)(i.K0),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let _=0,C=(()=>{class t extends v{constructor(t,e,s,i){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=s,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new m.vpe,this._animationEndSubscription=b.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+_++;const n=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${n}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===s}get value(){return this._value}set value(t){this._value=S((0,x.su)(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=S(t||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=(0,k.R)(t,"transitionend").pipe((0,T.h)(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(w.Qb,8),m.Y36(y,8))},t.\u0275cmp=m.Xpm({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){if(1&t&&m.Gf(A,5),2&t){let t;m.iGM(t=m.CRH())&&(e._primaryValueBar=t.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(m.uIk("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),m.ekj("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[m.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.O4$(),m.TgZ(1,"svg",1),m.TgZ(2,"defs"),m.TgZ(3,"pattern",2),m._UZ(4,"circle",3),m.qZA(),m.qZA(),m._UZ(5,"rect",4),m.qZA(),m.kcU(),m._UZ(6,"div",5),m._UZ(7,"div",6,7),m._UZ(9,"div",8),m.qZA()),2&t&&(m.xp6(3),m.Q6J("id",e.progressbarId),m.xp6(2),m.uIk("fill",e._rectangleFillValue),m.xp6(1),m.Q6J("ngStyle",e._bufferTransform()),m.xp6(1),m.Q6J("ngStyle",e._primaryTransform()))},directives:[i.PC],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function S(t,e=0,s=100){return Math.max(e,Math.min(s,t))}let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[i.ez,Z.BQ],Z.BQ]}),t})();var R=s(40994),N=s(22740),Q=s(50144),I=s(90817),J=s(78485),P=s(29609);class D{constructor(t){this.exec="",this.index=t.index,this.process=String(t.process),this.taskName=String(t["task name"]),this.pid=String(t.pid),this.image=String(t.image),this.command=t.command?String(t.command):null,this.startTime="null"!==t["start time"]?P(new Date(t["start time"])):null,this.endTime="null"!==t["end time"]?P(new Date(t["end time"])):null,this.cpus=parseFloat(t.cpus),this.memory=String(t.memory),this.nodes=parseFloat(t.nodes),this.exitCode=void 0!==t["exit code"]?String(t["exit code"]):null,this.proxy=t.proxy&&"null"!==t.proxy?JSON.parse(t.proxy):null}get duration(){return null!=this.startTime&&null!=this.endTime?this.endTime.diff(this.startTime,"hours"):null}get isFull(){return!(!this.command||!this.exitCode)}}var Y=s(38289),M=s(40878),j=s(41403),L=s(44689),O=s(52572),B=s(42066),$=s(49368),F=s(92935),z=s(48355),E=s(41160);function H(t,e){1&t&&(m.ynx(0),m._uU(1,"[Optional]"),m.BQk())}function V(t,e){1&t&&(m.ynx(0),m._uU(1,"[Hidden]"),m.BQk())}function X(t,e){1&t&&(m.TgZ(0,"span",15),m._uU(1,"Static value"),m.qZA())}function W(t,e){1&t&&(m.TgZ(0,"span",16),m._uU(1,"Input value"),m.qZA())}function K(t,e){1&t&&(m.TgZ(0,"span",17),m._uU(1,"List"),m.qZA())}function G(t,e){1&t&&(m.TgZ(0,"span",18),m._uU(1,"Input file"),m.qZA())}function tt(t,e){1&t&&(m.TgZ(0,"span",19),m._uU(1,"Output file"),m.qZA())}const et=function(t){return["/dataFile",t,"info"]},st=function(t,e){return{"fa-folder":t,"fa-file-text-o":e}};function it(t,e){if(1&t&&(m.TgZ(0,"div"),m.TgZ(1,"a",21),m._UZ(2,"i",22),m.TgZ(3,"span"),m.TgZ(4,"u",23),m._uU(5),m.qZA(),m.TgZ(6,"b"),m._uU(7),m.qZA(),m.TgZ(8,"u",23),m._uU(9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"a",24),m._UZ(11,"span",25),m.qZA(),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Q6J("routerLink",m.VKq(8,et,t.value.id)),m.xp6(1),m.Q6J("ngClass",m.WLB(10,st,"Folder"===t.value.format,"Folder"!==t.value.format)),m.xp6(1),m.ekj("text-success","Folder"===t.value.format),m.xp6(2),m.Oqu(t.value.prefix),m.xp6(2),m.Oqu(t.value.name),m.xp6(2),m.Oqu(t.value.suffix),m.xp6(1),m.Q6J("routerLink",m.VKq(13,et,t.value.id))}}function nt(t,e){if(1&t&&(m.TgZ(0,"small",23),m._uU(1),m.qZA()),2&t){const t=m.oxw(3).$implicit;m.xp6(1),m.Oqu(t.value)}}function rt(t,e){if(1&t&&(m.TgZ(0,"div",20),m._uU(1," File not found. (could have been deleted.)"),m._UZ(2,"br"),m.YNc(3,nt,2,1,"small",26),m.qZA()),2&t){const t=m.oxw(5);m.xp6(3),m.Q6J("ngIf",t.currentUser&&t.currentUser.auths.bdp>=3)}}function at(t,e){if(1&t&&(m.TgZ(0,"div",20),m.YNc(1,it,12,15,"div",7),m.YNc(2,rt,4,1,"div",14),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",t.value.status>=0&&t.value.id),m.xp6(1),m.Q6J("ngIf",!t.value.id)}}function ot(t,e){if(1&t&&(m.TgZ(0,"div"),m.TgZ(1,"strong"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(2),m.Oqu(t.value)}}function lt(t,e){if(1&t&&(m.TgZ(0,"div"),m.TgZ(1,"strong"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(2),m.Oqu(t.value.join(t.arg.listSplitter))}}const ct=function(){return["static","value"]};function ut(t,e){if(1&t&&(m.TgZ(0,"tr",6),m.TgZ(1,"td"),m.YNc(2,H,2,0,"ng-container",7),m.YNc(3,V,2,0,"ng-container",7),m.TgZ(4,"b"),m._uU(5),m.qZA(),m.qZA(),m.TgZ(6,"td"),m.ynx(7,8),m.YNc(8,X,2,0,"span",9),m.YNc(9,W,2,0,"span",10),m.YNc(10,K,2,0,"span",11),m.YNc(11,G,2,0,"span",12),m.YNc(12,tt,2,0,"span",13),m.BQk(),m.qZA(),m.TgZ(13,"td"),m.YNc(14,at,3,2,"div",14),m.YNc(15,ot,3,1,"div",7),m.YNc(16,lt,3,1,"div",7),m.qZA(),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(3);m.Q6J("ngClass",s.getRowStyleByArgType(null==t.arg?null:t.arg.type)),m.xp6(2),m.Q6J("ngIf",t.arg.optional),m.xp6(1),m.Q6J("ngIf",t.arg.hidden),m.xp6(2),m.Oqu(t.arg.name),m.xp6(2),m.Q6J("ngSwitch",null==t.arg?null:t.arg.type),m.xp6(1),m.Q6J("ngSwitchCase","static"),m.xp6(1),m.Q6J("ngSwitchCase","value"),m.xp6(1),m.Q6J("ngSwitchCase","list"),m.xp6(1),m.Q6J("ngSwitchCase","inFile"),m.xp6(1),m.Q6J("ngSwitchCase","outFile"),m.xp6(2),m.Q6J("ngIf","inFile"===(null==t.arg?null:t.arg.type)||"outFile"===(null==t.arg?null:t.arg.type)),m.xp6(1),m.Q6J("ngIf",m.DdM(13,ct).indexOf(null==t.arg?null:t.arg.type)>=0),m.xp6(1),m.Q6J("ngIf","list"===(null==t.arg?null:t.arg.type))}}function dt(t,e){if(1&t&&(m.TgZ(0,"table",3),m.TgZ(1,"thead",4),m.TgZ(2,"tr"),m.TgZ(3,"th"),m._uU(4,"Name"),m.qZA(),m.TgZ(5,"th"),m._uU(6,"Type"),m.qZA(),m.TgZ(7,"th"),m._uU(8,"Value"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(9,"tbody"),m.YNc(10,ut,17,14,"tr",5),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(10),m.Q6J("ngForOf",t.displayArguments())}}function gt(t,e){if(1&t&&(m.TgZ(0,"mat-expansion-panel",1),m.TgZ(1,"mat-expansion-panel-header"),m.TgZ(2,"mat-panel-title"),m._uU(3," Arguments "),m.qZA(),m.TgZ(4,"mat-panel-description"),m._uU(5," Arguments used to generate this result "),m.qZA(),m.qZA(),m.YNc(6,dt,11,1,"ng-template",2),m.qZA()),2&t){const t=m.oxw();m.Q6J("expanded",t.expanded)}}let pt=(()=>{class t{constructor(){this.expanded=!1}ngOnInit(){}getRowStyleByArgType(t){return{"table-secondary":"value"===t,"table-white":"static"===t,"table-primary":"inFile"===t,"table-info":"list"===t,"table-success":"outFile"===t,"table-danger":!1}}displayArguments(){const t=[];if(!this.theResult)return[];if(this.theResult.arguments)for(let e=0;e<this.theResult.arguments.length;e++){let s;s=this.theResult.taskSnapshot.arguments[e];const i=s.type||Object.keys(this.theResult.arguments[e])[0];let n="";if(this.theResult.arguments[e]&&this.theResult.arguments[e][i]&&(n=this.theResult.arguments[e][i]),s.type||(s.type=i),"inFile"===i){const t=this.theResult.inFiles.filter(t=>{const e=t.id,s=n.split(/[\\/]/).pop();return n.indexOf(e)>=0||n===t.path||n===t.realPath||s===e})[0];t&&(n=t)}else if("outFile"===i){let t=this.theResult.outFiles.filter(t=>{const e=t.id,s=n.split(/[\\/]/).pop();return n.indexOf(e)>=0||n===t.path||n===t.realPath||s===e})[0];t?n=t:this.parent&&(t=this.parent.outFiles.filter(t=>{const e=t.id,s=n.split(/[\\/]/).pop();return n.indexOf(e)>=0||n===t.path||n===t.realPath||s===e})[0],t&&(n=t))}t.push({arg:s,value:n})}return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["display-arguments"]],inputs:{theResult:"theResult",parent:"parent",currentUser:"currentUser",expanded:"expanded"},decls:1,vars:1,consts:[["style","background-color: rgba(255,255,255, 0.4)",3,"expanded",4,"ngIf"],[2,"background-color","rgba(255,255,255, 0.4)",3,"expanded"],["matExpansionPanelContent",""],[1,"table","table-hover","table-bordered","table-sm"],[1,"thead-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf"],[3,"ngSwitch"],["class","badge badge-dark",4,"ngSwitchCase"],["class","badge badge-secondary",4,"ngSwitchCase"],["class","badge badge-info",4,"ngSwitchCase"],["class","badge badge-primary",4,"ngSwitchCase"],["class","badge badge-success",4,"ngSwitchCase"],["style","word-break:break-all;",4,"ngIf"],[1,"badge","badge-dark"],[1,"badge","badge-secondary"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[2,"word-break","break-all"],[3,"routerLink"],[1,"mr-2","fa",2,"font-size","14px",3,"ngClass"],[1,"text-muted"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],["class","text-muted",4,"ngIf"]],template:function(t,e){1&t&&m.YNc(0,gt,7,1,"mat-expansion-panel",0),2&t&&m.Q6J("ngIf",e.theResult)},directives:[i.O5,o.ib,o.yz,o.yK,o.u4,o.HS,i.sg,i.mk,i.RF,i.n9,Q.yS],encapsulation:2,changeDetection:0}),t})();var ft=s(13070),ht=s(99713),mt=s(51729);function Zt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"#"),m.qZA())}function xt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(3);m.uIk("rowspan",s.expandedTaskLogs.has(t.process)?2:1),m.xp6(1),m.Oqu(t.index+1)}}function wt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Sub-TaskID"),m.qZA())}function bt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.process)}}function kt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Job ID"),m.qZA())}function Tt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.pid)}}function At(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Task Name"),m.qZA())}function qt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.taskName)}}function vt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Start time"),m.qZA())}function yt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu((null==t.startTime?null:t.startTime.format("YYYY/MM/DD HH:mm:ss"))||"N/A")}}function _t(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"End time"),m.qZA())}function Ct(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu((null==t.endTime?null:t.endTime.format("YYYY/MM/DD HH:mm:ss"))||"N/A")}}function St(t,e){1&t&&(m.TgZ(0,"th",33),m._uU(1,"Standard o/e"),m.qZA())}function Ut(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",34),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(3).openStdoe(e,"stdout")}),m._uU(2,"stdout"),m.qZA(),m._uU(3," | "),m.TgZ(4,"a",34),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(3).openStdoe(e,"stderr")}),m._uU(5,"stderr"),m.qZA(),m.BQk()}}function Rt(t,e){if(1&t&&(m.TgZ(0,"td",32),m.YNc(1,Ut,6,0,"ng-container",3),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngIf",t.startTime)}}function Nt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Cores"),m.qZA())}function Qt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.cpus)}}function It(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Memory"),m.qZA())}function Jt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.memory)}}function Pt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Nodes"),m.qZA())}function Dt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.nodes)}}function Yt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Exit code"),m.qZA())}function Mt(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t.exitCode)}}function jt(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Proxy"),m.qZA())}function Lt(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",34),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(3).openProxyPage(e)}),m._uU(2,"link"),m.qZA(),m.BQk()}}function Ot(t,e){1&t&&(m.ynx(0),m.TgZ(1,"small",1),m._uU(2,"N/A"),m.qZA(),m.BQk())}function Bt(t,e){if(1&t&&(m.TgZ(0,"td",32),m.YNc(1,Lt,3,0,"ng-container",3),m.YNc(2,Ot,3,0,"ng-container",3),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngIf",t.proxy&&t.startTime&&!t.endTime&&"null"===t.exitCode),m.xp6(1),m.Q6J("ngIf",!t.proxy)}}function $t(t,e){1&t&&(m.TgZ(0,"th",31),m._uU(1,"Duration"),m.qZA())}function Ft(t,e){if(1&t&&(m.TgZ(0,"td",32),m._uU(1),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(3);m.xp6(1),m.Oqu(s.timeDurations[t.index])}}function zt(t,e){if(1&t&&(m.TgZ(0,"td",35),m.TgZ(1,"div",36),m.TgZ(2,"strong"),m._uU(3,"Command"),m.qZA(),m._uU(4,": "),m.TgZ(5,"small",1),m._uU(6),m.qZA(),m.qZA(),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(3);m.uIk("colspan",s.expandedTaskLogs.has(t.process)?12:13),m.xp6(1),m.Q6J("@detailExpand",s.expandedTaskLogs.has(t.process)?"expanded":"collapsed"),m.xp6(5),m.Oqu(t.command)}}function Et(t,e){1&t&&m._UZ(0,"tr",37)}function Ht(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tr",38),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw(3).toggleRows(e.process)}),m.qZA()}if(2&t){const t=e.$implicit,s=m.oxw(3);m.ekj("table-primary",s.expandedTaskLogs.has(t.process))}}function Vt(t,e){if(1&t&&m._UZ(0,"tr",39),2&t){const t=e.$implicit,s=m.oxw(3);m.ekj("table-primary",s.expandedTaskLogs.has(t.process))}}const Xt=function(){return["taskIndex","process","pid","taskName","stdoe","start","end","cpus","memory","nodes","exitCode","proxy","duration"]},Wt=function(){return["command"]};function Kt(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",8),m.TgZ(1,"table",9),m.NdJ("matSortChange",function(e){return m.CHM(t),m.oxw(2).sortLogs(e)}),m.ALo(2,"slice"),m.ynx(3,10),m.YNc(4,Zt,2,0,"th",11),m.YNc(5,xt,2,2,"td",12),m.BQk(),m.ynx(6,13),m.YNc(7,wt,2,0,"th",11),m.YNc(8,bt,2,1,"td",12),m.BQk(),m.ynx(9,14),m.YNc(10,kt,2,0,"th",11),m.YNc(11,Tt,2,1,"td",12),m.BQk(),m.ynx(12,15),m.YNc(13,At,2,0,"th",11),m.YNc(14,qt,2,1,"td",12),m.BQk(),m.ynx(15,16),m.YNc(16,vt,2,0,"th",11),m.YNc(17,yt,2,1,"td",12),m.BQk(),m.ynx(18,17),m.YNc(19,_t,2,0,"th",11),m.YNc(20,Ct,2,1,"td",12),m.BQk(),m.ynx(21,18),m.YNc(22,St,2,0,"th",19),m.YNc(23,Rt,2,1,"td",12),m.BQk(),m.ynx(24,20),m.YNc(25,Nt,2,0,"th",11),m.YNc(26,Qt,2,1,"td",12),m.BQk(),m.ynx(27,21),m.YNc(28,It,2,0,"th",11),m.YNc(29,Jt,2,1,"td",12),m.BQk(),m.ynx(30,22),m.YNc(31,Pt,2,0,"th",11),m.YNc(32,Dt,2,1,"td",12),m.BQk(),m.ynx(33,23),m.YNc(34,Yt,2,0,"th",11),m.YNc(35,Mt,2,1,"td",12),m.BQk(),m.ynx(36,24),m.YNc(37,jt,2,0,"th",11),m.YNc(38,Bt,3,2,"td",12),m.BQk(),m.ynx(39,25),m.YNc(40,$t,2,0,"th",11),m.YNc(41,Ft,2,1,"td",12),m.BQk(),m.ynx(42,26),m.YNc(43,zt,7,3,"td",27),m.BQk(),m.YNc(44,Et,1,0,"tr",28),m.YNc(45,Ht,1,2,"tr",29),m.YNc(46,Vt,1,2,"tr",30),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("dataSource",m.Dn7(2,4,t._taskLogs,t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)),m.xp6(43),m.Q6J("matHeaderRowDef",m.DdM(8,Xt)),m.xp6(1),m.Q6J("matRowDefColumns",m.DdM(9,Xt)),m.xp6(1),m.Q6J("matRowDefColumns",m.DdM(10,Wt))}}const Gt=function(){return[5,10,25,50,100,500]};function te(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"mat-button-toggle-group",4),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw().filterType=e})("ngModelChange",function(){return m.CHM(t),m.oxw().updateFilter()}),m.TgZ(2,"mat-button-toggle",5),m._uU(3,"All"),m.qZA(),m.TgZ(4,"mat-button-toggle",5),m._uU(5,"Running"),m.qZA(),m.TgZ(6,"mat-button-toggle",5),m._uU(7,"Failed"),m.qZA(),m.TgZ(8,"mat-button-toggle",5),m._uU(9,"Finished"),m.qZA(),m.qZA(),m.TgZ(10,"mat-paginator",6),m.NdJ("page",function(e){return m.CHM(t),m.oxw().onPageChange(e)}),m.qZA(),m.YNc(11,Kt,47,11,"div",7),m.TgZ(12,"mat-paginator",6),m.NdJ("page",function(e){return m.CHM(t),m.oxw().onPageChange(e)}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngModel",t.filterType),m.xp6(1),m.Q6J("value","all"),m.xp6(2),m.Q6J("value","running"),m.xp6(2),m.Q6J("value","failed"),m.xp6(2),m.Q6J("value","finished"),m.xp6(2),m.Q6J("length",null==t.taskLogs?null:t.taskLogs.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",m.DdM(14,Gt)),m.xp6(1),m.Q6J("ngIf","table"===t.mode),m.xp6(1),m.Q6J("length",null==t.taskLogs?null:t.taskLogs.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",m.DdM(15,Gt))}}let ee=(()=>{class t{constructor(t){this.dialog=t,this.taskLogs=[],this.mode="table",this.expandedTaskLogs=new Set,this.fullTaskLogs=["process","pid","taskName","stdoe","start","end","cpus","memory","nodes","exitCode","proxy"],this.prepareTaskLogs=["process","taskName","exec","args","cpus","memory","nodes"],this.displayColumns=[],this.displayRows=[],this.pageSize=30,this.pageIndex=0,this.progressFinished=0,this.progressRunning=0,this.taskFinishedNumber=0,this.taskRunningNumber=0,this.taskNotStartedNumber=0,this.progressMode="indeterminate",this.timeDurations=[],this.timer$=(0,Y.F)(3e3),this.sortField="index",this.sortDirection="asc",this.filterType="all"}ngOnInit(){this.timerSubscriber=this.timer$.subscribe(()=>{this.taskLogs&&(this.taskLogs.forEach((t,e)=>{this.timeDurations[e]&&("null"!==t.exitCode||!t.startTime||"null"===t.startTime.toString()||t.endTime&&"null"!==t.endTime.toString())||(this.timeDurations[e]=this.taskDuration(t))}),this.taskLogTable&&this.taskLogTable.renderRows&&this.taskLogTable.renderRows())}),momentDurationFormatSetup(P)}ngOnChanges(t){t.mode&&(this.mode=t.mode.currentValue);let e=!1;if(t.taskLogs){const s=t.taskLogs.currentValue;e=t.taskLogs.isFirstChange(),s?s[0]&&s[0].isFull?(this.displayColumns=this.fullTaskLogs,this.progressMode="buffer",this.taskFinishedNumber=s.filter(t=>null!=t.exitCode&&t.startTime&&"null"!==t.startTime.toString()&&(!t.endTime||"null"!==t.endTime.toString())).length,this.taskRunningNumber=s.filter(t=>null==t.exitCode&&t.startTime&&"null"!==t.startTime.toString()&&(!t.endTime||"null"===t.endTime.toString())).length,this.progressFinished=this.taskFinishedNumber/s.length*100,this.progressRunning=this.progressFinished+this.taskRunningNumber/s.length*100,this.timeDurations=this.taskLogs.map(t=>this.taskDuration(t))):(this.displayColumns=this.prepareTaskLogs,this.progressMode="indeterminate"):(this.displayColumns=[],this.progressMode="indeterminate")}"graph"===this.mode&&this.taskLogs||"table"===this.mode&&this.taskLogs&&this.taskLogTable&&this.taskLogTable.renderRows&&this.taskLogTable.renderRows()}taskDuration(t){let e=t.startTime,s=t.endTime;if(!e)return"N/A";e=P(e),s=s?P(s):P();const i=P(s).diff(e);return P.duration(i).format("hh:mm:ss",{trim:!1})}onPageChange(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize}toggleRows(t){this.expandedTaskLogs.has(t)?this.expandedTaskLogs.delete(t):this.expandedTaskLogs.add(t)}get _taskLogs(){if(Array.isArray(this.taskLogs)){let t=[];switch(this.filterType){case"running":t=this.taskLogs.filter(t=>t.startTime&&!t.endTime);break;case"failed":t=this.taskLogs.filter(t=>t.startTime&&t.endTime&&"0"!==t.exitCode);break;case"finished":t=this.taskLogs.filter(t=>t.startTime&&t.endTime&&"0"===t.exitCode);break;default:t=this.taskLogs.slice()}const e=this.sortField||"index";this.sortDirection=this.sortDirection||"asc";const s="desc"===this.sortDirection?-1:1;return"start"===e?t.sort((t,e)=>P(t.startTime).isBefore(e.startTime)?-1*s:1*s):"end"===e?t.sort((t,e)=>P(t.endTime).isBefore(e.endTime)?-1*s:1*s):t="duration"===e?(0,mt.X)(t,[t=>this.timeDurations[t.index],t=>t.index],[this.sortDirection,"asc"]):(0,mt.X)(t,[t=>t[e]],this.sortDirection),t}return[]}updateFilter(){return this.taskLogTable&&this.taskLogTable.renderRows()}openProxyPage(t){window&&window.open(`/page?result=${this.resultID}&fullpage=true&proxy=true&pageKey=${t.process}`,"","width=1024,height=768")}openStdoe(t,e){window&&(["stdout","stderr"].indexOf(e)<0||window.open(`/result/api/${this.resultID}/taskLog?jobID=${t.process}&stdoe=${e}`,"","width=1024,height=768"))}sortLogs(t){return t.direction?(this.sortField="taskIndex"===t.active?"index":t.active,this.sortDirection=t.direction):(this.sortField="index",this.sortDirection="asc"),this.taskLogTable&&this.taskLogTable.renderRows()}ngOnDestroy(){return this.timerSubscriber&&this.timerSubscriber.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(F.uw))},t.\u0275cmp=m.Xpm({type:t,selectors:[["chi-tasklog-viewer"]],viewQuery:function(t,e){if(1&t&&m.Gf(d.BZ,5),2&t){let t;m.iGM(t=m.CRH())&&(e.taskLogTable=t.first)}},inputs:{taskLogs:"taskLogs",resultID:"resultID",mode:"mode"},features:[m.TTD],decls:5,vars:6,consts:[[2,"width","100%","overflow-x","auto"],[1,"text-muted"],[3,"mode","value","bufferValue"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"length","pageSize","pageIndex","pageSizeOptions","page"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","","matSort","",1,"table","table-bordered","table-hover",3,"dataSource","matSortChange"],["matColumnDef","taskIndex"],["mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","process"],["matColumnDef","pid"],["matColumnDef","taskName"],["matColumnDef","start"],["matColumnDef","end"],["matColumnDef","stdoe"],["mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["matColumnDef","cpus"],["matColumnDef","memory"],["matColumnDef","nodes"],["matColumnDef","exitCode"],["matColumnDef","proxy"],["matColumnDef","duration"],["matColumnDef","command"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1);","class","px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","link",3,"table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","command-detail-row",3,"table-primary",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-center"],["mat-header-cell","",1,"align-middle","text-center"],[3,"click"],["mat-cell","",1,"px-3",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"command-details","my-3"],["mat-header-row",""],["mat-row","",1,"link",3,"click"],["mat-row","",1,"command-detail-row"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"small",1),m._uU(2),m.qZA(),m._UZ(3,"mat-progress-bar",2),m.YNc(4,te,13,16,"div",3),m.qZA()),2&t&&(m.xp6(2),m.AsE("Progress: ",e.taskFinishedNumber,"/",null==e.taskLogs?null:e.taskLogs.length,""),m.xp6(1),m.Q6J("mode",e.progressMode)("value",e.progressFinished)("bufferValue",e.progressRunning),m.xp6(1),m.Q6J("ngIf",e.taskLogs))},directives:[C,i.O5,a.A9,n.JJ,n.On,a.Yi,h.NW,d.BZ,g.YE,d.w1,d.fO,d.Dz,d.as,d.nj,d.ge,g.nU,d.ev,d.XQ,d.Gk],pipes:[i.OU],styles:[".command-details[_ngcontent-%COMP%]{overflow:hidden;display:none}tr.command-detail-row[_ngcontent-%COMP%]{height:0;width:100%}[_nghost-%COMP%]     .mat-sort-header-container{display:flex;justify-content:center}"],data:{animation:[(0,ht.X$)("detailExpand",[(0,ht.SB)("collapsed",(0,ht.oB)({height:"0px",padding:"0px",minHeight:"0",display:"none"})),(0,ht.SB)("expanded",(0,ht.oB)({height:"*",padding:"5px",display:"block"})),(0,ht.eR)("expanded <=> collapsed",(0,ht.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();var se=s(35653),ie=s(25188);const ne=["workflowProgressDisplay"];function re(t,e){1&t&&(m.TgZ(0,"span",15),m._UZ(1,"i",16),m.qZA())}function ae(t,e){1&t&&(m.TgZ(0,"span",17),m._UZ(1,"i",18),m.qZA())}function oe(t,e){1&t&&(m.TgZ(0,"span",19),m._UZ(1,"i",20),m.qZA())}function le(t,e){1&t&&(m.TgZ(0,"span",21),m._UZ(1,"i",22),m.qZA())}function ce(t,e){1&t&&(m.TgZ(0,"span",23),m._UZ(1,"i",24),m.qZA())}function ue(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",6),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().index,s=m.oxw().index,i=m.oxw();return i.showStep(s*i.displayStepsInARow+e)}),m.TgZ(1,"div",7),m.TgZ(2,"span",8),m.YNc(3,re,2,0,"span",9),m.YNc(4,ae,2,0,"span",10),m.YNc(5,oe,2,0,"span",11),m.YNc(6,le,2,0,"span",12),m.YNc(7,ce,2,0,"span",13),m.qZA(),m.TgZ(8,"span",14),m._uU(9),m.qZA(),m._uU(10),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().index,e=m.oxw().index,s=m.oxw();m.Udp("width",96/s.displayStepsInARow+"%"),m.ekj("success",2==s.childResultStatus[e*s.displayStepsInARow+t])("error",3==s.childResultStatus[e*s.displayStepsInARow+t])("processing",1==s.childResultStatus[e*s.displayStepsInARow+t])("active",null!=s.displayStep&&s.displayStep==e*s.displayStepsInARow+t)("blur",null!=s.displayStep&&s.displayStep!=e*s.displayStepsInARow+t),m.xp6(1),m.Udp("width","100%")("margin-left",0==t?"5px":"0px"),m.xp6(1),m.Q6J("ngSwitch",s.childResultStatus[e*s.displayStepsInARow+t]),m.xp6(1),m.Q6J("ngSwitchCase",0),m.xp6(1),m.Q6J("ngSwitchCase",1),m.xp6(1),m.Q6J("ngSwitchCase",2),m.xp6(1),m.Q6J("ngSwitchCase",3),m.xp6(1),m.Q6J("ngSwitchCase",4),m.xp6(2),m.hij(" ",e*s.displayStepsInARow+t+1,". "),m.xp6(1),m.hij(" ",s.getStepName(e*s.displayStepsInARow+t)," ")}}function de(t,e){if(1&t&&(m.ynx(0),m.YNc(1,ue,11,24,"div",5),m.BQk()),2&t){const t=e.index,s=m.oxw().index,i=m.oxw();m.xp6(1),m.Q6J("ngIf",(i.displayStep===s*i.displayStepsInARow+t||void 0===i.displayStep)&&i.isMinimal||!i.isMinimal)}}function ge(t,e){if(1&t&&(m.TgZ(0,"div",3),m.YNc(1,de,2,1,"ng-container",4),m.qZA()),2&t){const t=e.$implicit,s=m.oxw();m.Udp("width",s.displayWidth+"px"),m.xp6(1),m.Q6J("ngForOf",t)}}let pe=(()=>{class t{constructor(){this.stepSelect=new m.vpe,this.displayStepsInARow=5,this.childResultStatus=[],this.childResults=[],this.stepDisplay=[],this.displayWidth=0,this.isMinimal=!1}ngOnChanges(t){for(const e in t)"currentResult"===e?this.currentResult=t[e].currentValue:"currentProject"===e?this.currentProject=t[e].currentValue:"taskID2Task"===e&&(this.taskID2Task=t[e].currentValue);this.currentProject&&this.currentResult&&setTimeout(()=>{this.settingStepsInARow()},300)}settingStepsInARow(){if(!this.resultInfoEl)return;const t=this.resultInfoEl.nativeElement.offsetWidth;this.isMinimal=!1,t>=1400?this.displayStepsInARow=7:t>=1024?this.displayStepsInARow=5:t>=480?this.displayStepsInARow=3:(this.displayStepsInARow=1,this.isMinimal=!0),this.displayWidth!==.99*t&&(this.displayWidth=.99*t,this.childResults=this.getChildResults(),this.checkChildResultStatus(),this.stepDisplay=this.displaySteps())}onResize(t){!1!==this.onResizeTimer&&clearTimeout(this.onResizeTimer),this.displayWidth=0,this.onResizeTimer=setTimeout(()=>{this.settingStepsInARow()},800)}getChildResults(){const t=[[]];if(this.currentProject&&this.currentResult){const e=this.currentProject.results;for(let s=0;s<this.currentResult.children.length;s++){const i=this.currentResult.children[s];t[s]=[];for(let n=0;n<i.length;n++)for(let r=0;r<e.length;r++)e[r].id===i[n]&&(t[s][n]=e[r])}}return t}showStep(t){this.displayStep=this.displayStep===t?void 0:t,this.stepSelect.emit(this.displayStep)}displaySteps(){const t=this.displayStepsInARow,e=Math.ceil(this.childResults.length/t),s=[];for(let i=0;i<e;i++)s[i]=this.childResults.slice(i*t,(i+1)*t);return s}checkChildResultStatus(){this.childResultStatus=[];for(let t=0;t<this.childResults.length;t++){const e=this.childResults[t];if(Array.isArray(e)&&e.length>0){this.childResultStatus[t]=2;for(let s=0;s<e.length;s++)switch(e[s].status){case 0:this.childResultStatus[t]=0;break;case 1:this.childResultStatus[t]=this.childResultStatus[t]>1?1:this.childResultStatus[t];break;case 3:this.childResultStatus[t]=3}}else this.childResultStatus[t]=-1}}getStepName(t){let e,s="";if(!this.currentResult)return s;if(this.currentResult.task&&this.currentResult.task.id?e=this.currentResult.task:this.currentResult.taskSnapshot&&this.currentResult.taskSnapshot.id&&(e=this.currentResult.taskSnapshot),e){if(Array.isArray(e.stepNames)&&(s=e.stepNames[t],s))return s;if(e.mapper){const i=e.mapper[t];s=i?i.map(t=>t.id&&this.taskID2Task&&this.taskID2Task[t.id]?this.taskID2Task[t.id].name:"").join(", "):"N/A"}else this.childResults[t]&&(s=this.childResults[t].map(t=>t.name).join(", "))}return s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["workflow-progress-display"]],viewQuery:function(t,e){if(1&t&&m.Gf(ne,7),2&t){let t;m.iGM(t=m.CRH())&&(e.resultInfoEl=t.first)}},inputs:{currentResult:"currentResult",currentProject:"currentProject",displayStep:"displayStep",taskID2Task:"taskID2Task"},outputs:{stepSelect:"stepSelect"},features:[m.TTD],decls:3,vars:1,consts:[[2,"width","100%","padding-left","1%",3,"resize"],["workflowProgressDisplay",""],["class","wrap",3,"width",4,"ngFor","ngForOf"],[1,"wrap"],[4,"ngFor","ngForOf"],["class","workflowProgress",3,"width","success","error","processing","active","blur","click",4,"ngIf"],[1,"workflowProgress",3,"click"],[2,"padding","0 20px","overflow","hidden","text-overflow","ellipsis"],[3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"text-muted"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash","fa-fw"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0,1),m.NdJ("resize",function(t){return e.onResize(t)},!1,m.Jf7),m.YNc(2,ge,2,3,"div",2),m.qZA()),2&t&&(m.xp6(2),m.Q6J("ngForOf",e.stepDisplay))},directives:[i.sg,i.O5,i.RF,i.n9],styles:['.wrap[_ngcontent-%COMP%]{width:100%;white-space:nowrap;overflow:hidden;transform-style:preserve-3d;perspective:1600px}.wrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-left:-1%}.workflowProgress[_ngcontent-%COMP%]{margin:0 0 0 .5%;height:30px;position:relative;display:inline-block;text-align:left;line-height:30px;transition:all .8s;cursor:pointer}.workflowProgress[_ngcontent-%COMP%]:after, .workflowProgress[_ngcontent-%COMP%]:before{content:"";position:absolute;transition:all .8s;z-index:-1}.workflowProgress[_ngcontent-%COMP%]:before{height:15px;width:100%;top:0;left:0;background:#d3d3d3;transform:skew(45deg)}.workflowProgress[_ngcontent-%COMP%]:after{height:15px;width:100%;top:14px;left:0;background:#d3d3d3;transform:skew(-45deg)}.workflowProgress.success[_ngcontent-%COMP%]:after, .workflowProgress.success[_ngcontent-%COMP%]:before{background:#90ee90}.workflowProgress.error[_ngcontent-%COMP%]:after, .workflowProgress.error[_ngcontent-%COMP%]:before{background:#f08080}.workflowProgress.processing[_ngcontent-%COMP%]:after, .workflowProgress.processing[_ngcontent-%COMP%]:before{background:#f4a460}.workflowProgress.active[_ngcontent-%COMP%]:after, .workflowProgress.active[_ngcontent-%COMP%]:before{transition:all .3s cubic-bezier(.25,.8,.25,1)}.workflowProgress.blur[_ngcontent-%COMP%]:after, .workflowProgress.blur[_ngcontent-%COMP%]:before{opacity:.3}']}),t})();var fe=s(76261);const he=["resultInfoContainer"];function me(t,e){1&t&&(m.TgZ(0,"a"),m._uU(1,"Project"),m.qZA())}function Ze(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.hij(": ",t.currentProject.name,"")}}const xe=function(t){return["/project",t]};function we(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"a",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().gotoProject()}),m._uU(1,"Project "),m.YNc(2,Ze,2,1,"span",3),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("routerLink",m.VKq(2,xe,t.currentProject.id)),m.xp6(2),m.Q6J("ngIf",t.currentProject)}}function be(t,e){1&t&&(m.TgZ(0,"li",1),m._uU(1,"Project"),m.qZA())}const ke=function(t){return["/project",t,"result","list"]};function Te(t,e){if(1&t&&(m.TgZ(0,"a",2),m._uU(1," Result List "),m.qZA()),2&t){const t=m.oxw();m.Q6J("routerLink",m.VKq(1,ke,t.currentProject.id))}}const Ae=function(t){return["/result",t,"info"]};function qe(t,e){if(1&t&&(m.TgZ(0,"li",15),m.TgZ(1,"a",2),m._uU(2,"Result"),m.qZA(),m.TgZ(3,"a",16),m._UZ(4,"i",17),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("routerLink",m.VKq(2,Ae,t.result.id)),m.xp6(2),m.Q6J("routerLink",m.VKq(4,Ae,t.result.id))}}function ve(t,e){1&t&&(m.TgZ(0,"li",15),m._uU(1,"Result"),m.qZA())}function ye(t,e){1&t&&(m.TgZ(0,"div"),m._uU(1," Loading... "),m.qZA())}function _e(t,e){if(1&t&&(m.TgZ(0,"p"),m.TgZ(1,"u",36),m._uU(2),m.qZA(),m._uU(3),m.TgZ(4,"u",36),m._uU(5),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(2),m.Oqu(null==t.result?null:t.result.prefix),m.xp6(1),m.Oqu(null==t.result?null:t.result.name),m.xp6(2),m.Oqu(null==t.result?null:t.result.suffix)}}function Ce(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"mat-form-field",37),m.TgZ(2,"input",38),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw(2).result.prefix=e}),m.qZA(),m.qZA(),m.TgZ(3,"mat-form-field",37),m.TgZ(4,"input",39),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw(2).result.suffix=e}),m.qZA(),m.qZA(),m.TgZ(5,"mat-form-field",40),m.TgZ(6,"input",41),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw(2).result.name=e}),m.qZA(),m.TgZ(7,"span",42),m._UZ(8,"u",43),m.qZA(),m.TgZ(9,"span",44),m._UZ(10,"u",43),m.qZA(),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(2);m.xp6(2),m.Q6J("ngModel",t.result.prefix),m.xp6(2),m.Q6J("ngModel",t.result.suffix),m.xp6(2),m.Q6J("ngModel",t.result.name),m.xp6(2),m.Q6J("innerHTML",null==t.result?null:t.result.prefix,m.oJD),m.xp6(2),m.Q6J("innerHTML",null==t.result?null:t.result.suffix,m.oJD)}}function Se(t,e){1&t&&(m.TgZ(0,"p"),m._uU(1,"(no description)"),m.qZA())}function Ue(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"mat-form-field",40),m.TgZ(1,"textarea",45),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw(2).result.desc=e}),m._uU(2),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("ngModel",t.result.desc),m.xp6(1),m.Oqu(t.result.desc)}}const Re=function(){return["/admin","task"]},Ne=function(t){return{pkgs:t}};function Qe(t,e){if(1&t&&(m.TgZ(0,"a",47),m._UZ(1,"i",48),m.qZA()),2&t){const t=m.oxw(3);m.Q6J("routerLink",m.DdM(2,Re))("queryParams",m.VKq(3,Ne,t.currentPackage.id))}}function Ie(t,e){if(1&t&&(m.TgZ(0,"div",18),m.TgZ(1,"div",19),m.TgZ(2,"strong"),m._uU(3,"Package name"),m.qZA(),m.qZA(),m.TgZ(4,"div",20),m.TgZ(5,"p"),m._UZ(6,"i",46),m._uU(7),m.YNc(8,Qe,2,5,"a",24),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(7),m.hij("",null==t.currentPackage?null:t.currentPackage.fullname," "),m.xp6(1),m.Q6J("ngIf",null==t.currentPackage||null==t.currentPackage.privilege?null:t.currentPackage.privilege.canView)}}const Je=function(t,e){return{pkgs:t,tasks:e}};function Pe(t,e){if(1&t&&(m.TgZ(0,"a",47),m._UZ(1,"i",48),m.qZA()),2&t){const t=m.oxw(2);m.Q6J("routerLink",m.DdM(2,Re))("queryParams",m.WLB(3,Je,t.currentPackage.id,null==t.result||null==t.result.task?null:t.result.task.id))}}function De(t,e){1&t&&(m.TgZ(0,"p",49),m._UZ(1,"i",50),m._uU(2,"Queued"),m.qZA())}function Ye(t,e){1&t&&(m.TgZ(0,"p",51),m._UZ(1,"i",52),m._uU(2,"Running"),m.qZA())}function Me(t,e){1&t&&(m.TgZ(0,"p",53),m._UZ(1,"i",54),m._uU(2,"Success"),m.qZA())}function je(t,e){1&t&&(m.TgZ(0,"p",55),m._UZ(1,"i",56),m._uU(2,"Error"),m.qZA())}function Le(t,e){1&t&&(m.TgZ(0,"p",57),m._UZ(1,"i",58),m._uU(2,"Deleting"),m.qZA())}function Oe(t,e){if(1&t&&(m.TgZ(0,"div",18),m.TgZ(1,"div",19),m.TgZ(2,"strong"),m._uU(3,"Finished time"),m.qZA(),m.qZA(),m.TgZ(4,"div",20),m.TgZ(5,"p"),m._uU(6),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(6),m.Oqu(t.result.timer&&t.result.timer[2]?t.result.timer[2].toString():null!=t.result&&t.result.timer&&t.result.timer[1]?t.result.timer[1].toString():"")}}const Be=function(){return["/page"]},$e=function(t,e){return{result:t,pageKey:e}};function Fe(t,e){if(1&t&&(m.TgZ(0,"a",69),m._UZ(1,"i",70),m._uU(2),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(2).$implicit,i=m.oxw(3);m.Q6J("routerLink",m.DdM(3,Be))("queryParams",m.WLB(4,$e,i.result.id,s.id+":"+t.key)),m.xp6(2),m.hij(" ",t.name," ")}}function ze(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"div",61),m.TgZ(2,"h4",62),m.TgZ(3,"div",63),m._UZ(4,"i",64),m._uU(5),m.qZA(),m.TgZ(6,"div",65),m._UZ(7,"i",66),m._uU(8),m.qZA(),m.qZA(),m.qZA(),m.TgZ(9,"div",67),m.YNc(10,Fe,3,7,"a",68),m.qZA(),m.BQk()),2&t){const t=m.oxw().$implicit,e=m.oxw(3);m.xp6(5),m.hij(" ",t.fullname,","),m.xp6(3),m.hij(" ",t.sheetName,""),m.xp6(2),m.Q6J("ngForOf",t.getValidResultPages(e.result.task.key))}}function Ee(t,e){if(1&t&&(m.ynx(0),m.YNc(1,ze,11,3,"ng-container",3),m.BQk()),2&t){const t=e.$implicit,s=m.oxw(3);m.xp6(1),m.Q6J("ngIf",t.getValidResultPages(s.result.task.key).length>0)}}function He(t,e){if(1&t&&(m.TgZ(0,"div",59),m.TgZ(1,"div",34),m.TgZ(2,"p"),m.TgZ(3,"strong"),m._uU(4,"Available Result Pages"),m.qZA(),m.qZA(),m.qZA(),m.YNc(5,Ee,2,1,"ng-container",60),m.qZA()),2&t){const t=m.oxw(2);m.xp6(5),m.Q6J("ngForOf",t.currentProject.packages)}}function Ve(t,e){if(1&t&&(m.TgZ(0,"li",85),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(t)}}function Xe(t,e){if(1&t&&(m.TgZ(0,"div",34),m.TgZ(1,"ul",83),m.YNc(2,Ve,2,1,"li",84),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.Q6J("ngForOf",t.result.error.notes)}}function We(t,e){if(1&t&&m._UZ(0,"chi-terminal",86),2&t){const t=m.oxw(3);m.Q6J("text",null==t.result?null:t.result.stdOut)}}function Ke(t,e){if(1&t&&m._UZ(0,"chi-terminal",86),2&t){const t=m.oxw(3);m.Q6J("text",null==t.result?null:t.result.stdErr)}}function Ge(t,e){1&t&&(m.TgZ(0,"div"),m._uU(1,"Task logs"),m.qZA())}function ts(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",59),m.TgZ(1,"div",34),m.TgZ(2,"strong"),m._uU(3,"Result Logs"),m.qZA(),m.qZA(),m.YNc(4,Xe,3,1,"div",71),m.TgZ(5,"div",34),m.TgZ(6,"mat-tab-group",72),m.NdJ("selectedTabChange",function(e){m.CHM(t);const s=m.oxw(2);return s.onResultTabChange(e,s.result.id)}),m.TgZ(7,"mat-tab",73),m.TgZ(8,"div",74),m.YNc(9,We,1,1,"chi-terminal",75),m.qZA(),m.qZA(),m.TgZ(10,"mat-tab",76),m.TgZ(11,"div",74),m.YNc(12,Ke,1,1,"chi-terminal",75),m.qZA(),m.qZA(),m.TgZ(13,"mat-tab"),m.YNc(14,Ge,2,0,"ng-template",77),m.TgZ(15,"div",74),m.TgZ(16,"button",78),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2);return e.loadResultLogs(e.result.id)}),m._UZ(17,"i",79),m._uU(18,"Refresh logs "),m.qZA(),m.TgZ(19,"mat-button-toggle-group",80),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw(2).taskLogViewMode=e}),m.TgZ(20,"mat-button-toggle",81),m._uU(21,"Table View"),m.qZA(),m.qZA(),m._UZ(22,"chi-tasklog-viewer",82),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(4),m.Q6J("ngIf",t.result.error&&t.result.error.notes),m.xp6(5),m.Q6J("ngIf",t.result),m.xp6(3),m.Q6J("ngIf",t.result),m.xp6(7),m.Q6J("ngModel",t.taskLogViewMode),m.xp6(3),m.Q6J("mode",t.taskLogViewMode)("taskLogs",t.resultTaskLogs[t.result.id])("resultID",t.result.id)}}function es(t,e){if(1&t&&(m.TgZ(0,"div",34),m.TgZ(1,"div",83),m._UZ(2,"i",90),m._uU(3),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(3),m.hij("",t.result.stdErr," ")}}function ss(t,e){if(1&t&&m._UZ(0,"bdp-workflow-planner",91),2&t){const t=m.oxw(3);m.Q6J("taskMapper",t.result.task.mapper)("childTasks",t.taskList)("taskArgs",t.result.task.arguments)("resultList",t.childResults)}}function is(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"workflow-progress-display",93),m.NdJ("stepSelect",function(e){return m.CHM(t),m.oxw(4).showStep(e)}),m.qZA()}if(2&t){const t=m.oxw(4);m.Q6J("currentProject",t.currentProject)("currentResult",t.result)("taskID2Task",t.taskID2Task)}}function ns(t,e){if(1&t&&(m.TgZ(0,"div",34),m.YNc(1,is,1,3,"workflow-progress-display",92),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.Q6J("ngIf",t.currentProject&&t.result)}}function rs(t,e){1&t&&(m.TgZ(0,"span",49),m._UZ(1,"i",50),m.qZA())}function as(t,e){1&t&&(m.TgZ(0,"span",51),m._UZ(1,"i",52),m.qZA())}function os(t,e){1&t&&(m.TgZ(0,"span",53),m._UZ(1,"i",54),m.qZA())}function ls(t,e){1&t&&(m.TgZ(0,"span",55),m._UZ(1,"i",56),m.qZA())}function cs(t,e){1&t&&(m.TgZ(0,"span",57),m._UZ(1,"i",110),m.qZA())}function us(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",108),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2),s=e.$implicit,i=e.index;return m.oxw(4).loadResultInfo(s.id,i)}),m.TgZ(1,"span",109),m.YNc(2,rs,2,0,"span",27),m.YNc(3,as,2,0,"span",28),m.YNc(4,os,2,0,"span",29),m.YNc(5,ls,2,0,"span",30),m.YNc(6,cs,2,0,"span",31),m.qZA(),m._uU(7),m.qZA()}if(2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Q6J("ngSwitch",t&&t.status),m.xp6(1),m.Q6J("ngSwitchCase",0),m.xp6(1),m.Q6J("ngSwitchCase",1),m.xp6(1),m.Q6J("ngSwitchCase",2),m.xp6(1),m.Q6J("ngSwitchCase",3),m.xp6(1),m.Q6J("ngSwitchCase",4),m.xp6(1),m.hij(" ",t.name," ")}}function ds(t,e){if(1&t&&m._UZ(0,"div",99),2&t){const t=m.oxw(2).$implicit,e=m.oxw(4);m.Q6J("innerHTML",e.resultTimers[t.id].timerDisplay,m.oJD)}}function gs(t,e){if(1&t&&(m.TgZ(0,"div",18),m.TgZ(1,"div",97),m.TgZ(2,"strong"),m._uU(3,"Finished time"),m.qZA(),m.qZA(),m.TgZ(4,"div",98),m.TgZ(5,"p"),m._uU(6),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(6),m.Oqu(null!=t&&t.timer&&t.timer.length>=3?t.timer[2].toString():"n/a")}}function ps(t,e){1&t&&(m.TgZ(0,"div"),m._uU(1,"Task logs"),m.qZA())}function fs(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",114),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(3),s=e.$implicit,i=e.index;return m.oxw(4).loadResultInfo(s.id,i)}),m._uU(1,"Load intermediate output file(s)"),m.qZA()}}function hs(t,e){1&t&&(m.TgZ(0,"div",104),m.TgZ(1,"b"),m._uU(2,"Intermediate output file(s)"),m.qZA(),m.qZA())}function ms(t,e){1&t&&m._UZ(0,"datafile-card",116),2&t&&m.Q6J("dataFile",e.$implicit)}function Zs(t,e){if(1&t&&(m.TgZ(0,"div",104),m.TgZ(1,"div",18),m.YNc(2,ms,1,1,"datafile-card",115),m.qZA(),m.qZA()),2&t){const t=m.oxw(3).$implicit,e=m.oxw(4);m.xp6(2),m.Q6J("ngForOf",t.outFiles)("ngForTrackBy",e.trackByDataFile)}}function xs(t,e){if(1&t&&(m.TgZ(0,"div",111),m.YNc(1,fs,2,0,"button",112),m.YNc(2,hs,3,0,"div",113),m._UZ(3,"br"),m.YNc(4,Zs,3,2,"div",113),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Q6J("ngIf",!t.outFiles[0].id),m.xp6(1),m.Q6J("ngIf",t.outFiles[0].id),m.xp6(2),m.Q6J("ngIf",t.outFiles[0].id)}}function ws(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"mat-tab"),m.YNc(1,us,8,7,"ng-template",77),m.TgZ(2,"div",96),m.TgZ(3,"div",18),m.TgZ(4,"div",97),m.TgZ(5,"b"),m._uU(6,"Name"),m.qZA(),m.qZA(),m.TgZ(7,"div",98),m._uU(8),m.qZA(),m.qZA(),m.TgZ(9,"div",18),m.TgZ(10,"div",97),m.TgZ(11,"b"),m._uU(12,"Description"),m.qZA(),m.qZA(),m._UZ(13,"div",99),m.qZA(),m.TgZ(14,"div",18),m.TgZ(15,"div",97),m.TgZ(16,"strong"),m._uU(17,"Timer"),m.qZA(),m.qZA(),m.YNc(18,ds,1,1,"div",100),m.qZA(),m.TgZ(19,"div",18),m.TgZ(20,"div",97),m.TgZ(21,"strong"),m._uU(22,"Creation time"),m.qZA(),m.qZA(),m.TgZ(23,"div",98),m.TgZ(24,"p"),m._uU(25),m.qZA(),m.qZA(),m.qZA(),m.YNc(26,gs,7,1,"div",23),m.TgZ(27,"div",18),m.TgZ(28,"div",101),m._UZ(29,"display-arguments",102),m.qZA(),m.qZA(),m.TgZ(30,"div",18),m.TgZ(31,"div",34),m.TgZ(32,"button",87),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(),s=e.$implicit,i=e.index;return m.oxw(4).loadResultInfo(s.id,i)}),m._UZ(33,"i",103),m._uU(34," Refresh "),m.qZA(),m.qZA(),m.TgZ(35,"div",104),m.TgZ(36,"mat-tab-group",105),m.NdJ("selectedTabChange",function(e){m.CHM(t);const s=m.oxw().$implicit;return m.oxw(4).onResultTabChange(e,s.id)}),m.TgZ(37,"mat-tab",73),m.TgZ(38,"div",74),m._UZ(39,"chi-terminal",86),m.qZA(),m.qZA(),m.TgZ(40,"mat-tab",76),m.TgZ(41,"div",74),m._UZ(42,"chi-terminal",86),m.qZA(),m.qZA(),m.TgZ(43,"mat-tab"),m.YNc(44,ps,2,0,"ng-template",77),m.TgZ(45,"button",87),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw(4).loadResultLogs(e.id)}),m._UZ(46,"i",106),m._uU(47," Refresh logs "),m.qZA(),m.TgZ(48,"mat-button-toggle-group",80),m.NdJ("ngModelChange",function(e){return m.CHM(t),m.oxw(5).taskLogViewMode=e}),m.TgZ(49,"mat-button-toggle",81),m._uU(50,"Table View"),m.qZA(),m.qZA(),m.TgZ(51,"div",74),m._UZ(52,"chi-tasklog-viewer",82),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(53,"br"),m.YNc(54,xs,5,3,"div",107),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().$implicit,e=m.oxw(4);m.xp6(8),m.Oqu(t.name),m.xp6(5),m.Q6J("innerHTML",t.desc||"(no description)",m.oJD),m.xp6(5),m.Q6J("ngIf",e.resultTimers[t.id]),m.xp6(7),m.Oqu(null==t||null==t.createdAt?null:t.createdAt.toString()),m.xp6(1),m.Q6J("ngIf",2==(null==t?null:t.status)||3==(null==t?null:t.status)),m.xp6(3),m.Q6J("theResult",t)("currentUser",e.currentUser)("parent",e.result),m.xp6(10),m.Q6J("text",null==t?null:t.stdOut),m.xp6(3),m.Q6J("text",null==t?null:t.stdErr),m.xp6(6),m.Q6J("ngModel",e.taskLogViewMode),m.xp6(4),m.Q6J("mode",e.taskLogViewMode)("taskLogs",e.resultTaskLogs[t.id])("resultID",t.id),m.xp6(2),m.Q6J("ngIf",t&&t.outFiles&&t.outFiles.length>0)}}function bs(t,e){if(1&t&&(m.ynx(0),m.YNc(1,ws,55,15,"mat-tab",3),m.BQk()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngIf",t)}}function ks(t,e){if(1&t&&(m.TgZ(0,"div",34),m.TgZ(1,"b"),m._uU(2),m.qZA(),m._uU(3),m.TgZ(4,"div"),m.TgZ(5,"mat-tab-group",94),m.YNc(6,bs,2,1,"ng-container",95),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.hij("Task(s) in Step ",t._viewControls.displayStep+1,""),m.xp6(1),m.hij(": ",t.getStepName(t._viewControls.displayStep)," "),m.xp6(3),m.Q6J("ngForOf",t.childResults[t._viewControls.displayStep])("ngForTrackBy",t.trackByResult)}}function Ts(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",18),m._UZ(1,"mat-divider"),m.YNc(2,es,4,1,"div",71),m.TgZ(3,"div",34),m.TgZ(4,"strong"),m._uU(5,"Progress"),m.qZA(),m.qZA(),m.TgZ(6,"div",34),m.TgZ(7,"button",87),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2);return e.showWorkflowGraph=!e.showWorkflowGraph}),m._UZ(8,"i",88),m._uU(9," Toggle workflow view"),m.qZA(),m.YNc(10,ss,1,4,"bdp-workflow-planner",89),m.qZA(),m.YNc(11,ns,2,1,"div",71),m._UZ(12,"br"),m._UZ(13,"br"),m.YNc(14,ks,7,4,"div",71),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(2),m.Q6J("ngIf",t.result.stdErr),m.xp6(8),m.Q6J("ngIf",t.showWorkflowGraph&&t.taskList&&t.result.task&&"workflow"===t.result.task.type),m.xp6(1),m.Q6J("ngIf",t.currentProject&&t.result),m.xp6(3),m.Q6J("ngIf",t._viewControls.displayStep>=0)}}function As(t,e){if(1&t&&(m.TgZ(0,"div"),m.TgZ(1,"div",18),m.TgZ(2,"div",19),m.TgZ(3,"strong"),m._uU(4,"Result title"),m.qZA(),m.qZA(),m.TgZ(5,"div",20),m.YNc(6,_e,6,3,"p",3),m.YNc(7,Ce,11,5,"ng-container",3),m.qZA(),m.qZA(),m.TgZ(8,"div",18),m.TgZ(9,"div",19),m.TgZ(10,"strong"),m._uU(11,"Description"),m.qZA(),m.qZA(),m.TgZ(12,"div",20),m.TgZ(13,"div",21),m.YNc(14,Se,2,0,"p",3),m.TgZ(15,"p"),m._uU(16),m.qZA(),m.qZA(),m.YNc(17,Ue,3,2,"mat-form-field",22),m.qZA(),m.qZA(),m.YNc(18,Ie,9,2,"div",23),m.TgZ(19,"div",18),m.TgZ(20,"div",19),m.TgZ(21,"strong"),m._uU(22,"Task name"),m.qZA(),m.qZA(),m.TgZ(23,"div",20),m.TgZ(24,"p"),m._uU(25),m.YNc(26,Pe,2,6,"a",24),m.qZA(),m.qZA(),m.qZA(),m.TgZ(27,"div",18),m.TgZ(28,"div",19),m.TgZ(29,"strong"),m._uU(30,"Task description"),m.qZA(),m.qZA(),m.TgZ(31,"div",20),m._UZ(32,"p",25),m.qZA(),m.qZA(),m.TgZ(33,"div",18),m.TgZ(34,"div",19),m.TgZ(35,"strong"),m._uU(36,"Runner"),m.qZA(),m.qZA(),m.TgZ(37,"div",20),m.TgZ(38,"p"),m._uU(39),m.qZA(),m.qZA(),m.qZA(),m.TgZ(40,"div",18),m.TgZ(41,"div",19),m.TgZ(42,"strong"),m._uU(43,"Status"),m.qZA(),m.qZA(),m.TgZ(44,"div",26),m.YNc(45,De,3,0,"p",27),m.YNc(46,Ye,3,0,"p",28),m.YNc(47,Me,3,0,"p",29),m.YNc(48,je,3,0,"p",30),m.YNc(49,Le,3,0,"p",31),m.qZA(),m.qZA(),m.TgZ(50,"div",18),m.TgZ(51,"div",19),m.TgZ(52,"strong"),m._uU(53,"Duration"),m.qZA(),m.qZA(),m.TgZ(54,"div",20),m._UZ(55,"p",25),m.qZA(),m.qZA(),m.TgZ(56,"div",18),m.TgZ(57,"div",19),m.TgZ(58,"strong"),m._uU(59,"Creation time"),m.qZA(),m.qZA(),m.TgZ(60,"div",20),m.TgZ(61,"p"),m._uU(62),m.qZA(),m.qZA(),m.qZA(),m.YNc(63,Oe,7,1,"div",23),m._UZ(64,"mat-divider"),m.YNc(65,He,6,1,"div",32),m._UZ(66,"mat-divider"),m.TgZ(67,"div",33),m.TgZ(68,"div",34),m.TgZ(69,"p"),m.TgZ(70,"strong"),m._uU(71,"Arguments"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(72,"div",34),m._UZ(73,"display-arguments",35),m.qZA(),m.qZA(),m._UZ(74,"mat-divider"),m.YNc(75,ts,23,7,"div",32),m.YNc(76,Ts,15,4,"div",23),m.qZA()),2&t){const t=m.oxw();m.xp6(6),m.Q6J("ngIf",!t._viewControls.isEditing),m.xp6(1),m.Q6J("ngIf",t._viewControls.isEditing),m.xp6(6),m.Q6J("hidden",t._viewControls.isEditing),m.xp6(1),m.Q6J("ngIf",!(null!=t.result&&t.result.desc)),m.xp6(2),m.Oqu(null==t.result?null:t.result.desc),m.xp6(1),m.Q6J("ngIf",t._viewControls.isEditing),m.xp6(1),m.Q6J("ngIf",t.currentPackage),m.xp6(7),m.hij("",t.result.task&&t.result.task.name?t.result.task.name:t.result.taskSnapshot.name," "),m.xp6(1),m.Q6J("ngIf",t.currentPackage&&(null==t.currentPackage||null==t.currentPackage.privilege?null:t.currentPackage.privilege.canView)),m.xp6(6),m.Q6J("innerHTML",t.result.task&&t.result.task.desc?t.result.task.desc||"(no description)":t.result.taskSnapshot.desc||"(no description)",m.oJD),m.xp6(7),m.Oqu(t.result.owner?t.result.owner.name:"Unknown user"),m.xp6(5),m.Q6J("ngSwitch",null==t.result?null:t.result.status),m.xp6(1),m.Q6J("ngSwitchCase",0),m.xp6(1),m.Q6J("ngSwitchCase",1),m.xp6(1),m.Q6J("ngSwitchCase",2),m.xp6(1),m.Q6J("ngSwitchCase",3),m.xp6(1),m.Q6J("ngSwitchCase",4),m.xp6(6),m.Q6J("innerHTML",t.currentResultTimer,m.oJD),m.xp6(7),m.Oqu((null==t.result||null==t.result.createdAt?null:t.result.createdAt.toString())||"creation time undefined"),m.xp6(1),m.Q6J("ngIf",2==(null==t.result?null:t.result.status)||3==(null==t.result?null:t.result.status)),m.xp6(2),m.Q6J("ngIf",t.currentProject&&t.hasValidResultPages),m.xp6(8),m.Q6J("theResult",t.result)("currentUser",t.currentUser)("expanded",!0),m.xp6(2),m.Q6J("ngIf","workflow"!==t.result.type),m.xp6(1),m.Q6J("ngIf","workflow"==t.result.type)}}function qs(t,e){1&t&&m._UZ(0,"div",117)}function vs(t,e){1&t&&m._UZ(0,"i",123)}function ys(t,e){1&t&&m._UZ(0,"i",124)}const _s=function(t,e){return{"fa-edit":t,"fa-save":e}};function Cs(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"a",118),m.NdJ("click",function(){return m.CHM(t),m.oxw(3).onSave()}),m._UZ(1,"i",126),m.TgZ(2,"span",127),m._uU(3),m.qZA(),m.TgZ(4,"span",122),m._uU(5,"\u276f"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(3);m.ekj("active",t._viewControls.isEditing),m.xp6(1),m.Q6J("ngClass",m.WLB(6,_s,!t._viewControls.isEditing,t._viewControls.isEditing)),m.xp6(1),m.ekj("active",t.showRightButtonContent||t._viewControls.isEditing),m.xp6(1),m.Oqu(t._viewControls.isEditing?"Click to save":"Modify info")}}function Ss(t,e){if(1&t&&(m.ynx(0),m.YNc(1,Cs,6,9,"a",125),m._UZ(2,"br"),m.BQk()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",!t.result.readOnly)}}const Us=function(t){return{result:t,proxy:"false"}};function Rs(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"a",128),m._UZ(2,"i",129),m.TgZ(3,"span",127),m._uU(4,"Result Page"),m.qZA(),m.TgZ(5,"span",122),m._uU(6,"\u276f"),m.qZA(),m.qZA(),m._UZ(7,"br"),m.BQk()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("routerLink",m.DdM(4,Be))("queryParams",m.VKq(5,Us,t.result.id)),m.xp6(2),m.ekj("active",t.showRightButtonContent)}}const Ns=function(t){return{result:t,proxy:"true"}};function Qs(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"a",128),m._UZ(2,"i",130),m.TgZ(3,"span",127),m._uU(4,"Proxy Page"),m.qZA(),m.TgZ(5,"span",122),m._uU(6,"\u276f"),m.qZA(),m.qZA(),m._UZ(7,"br"),m.BQk()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("routerLink",m.DdM(4,Be))("queryParams",m.VKq(5,Ns,t.result.id)),m.xp6(2),m.ekj("active",t.showRightButtonContent)}}function Is(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",118),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2);return e.stopResultDialog(e.result)}),m._UZ(2,"i",131),m.TgZ(3,"span",127),m._uU(4,"Stop"),m.qZA(),m.TgZ(5,"span",122),m._uU(6,"\u276f"),m.qZA(),m.qZA(),m._UZ(7,"br"),m.BQk()}if(2&t){const t=m.oxw(2);m.xp6(3),m.ekj("active",t.showRightButtonContent)}}function Js(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",118),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2);return e.resumeResultDialog(e.result)}),m._UZ(2,"i",132),m.TgZ(3,"span",127),m._uU(4,"Resume"),m.qZA(),m.TgZ(5,"span",122),m._uU(6,"\u276f"),m.qZA(),m.qZA(),m._UZ(7,"br"),m.BQk()}if(2&t){const t=m.oxw(2);m.xp6(3),m.ekj("active",t.showRightButtonContent)}}function Ps(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",118),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2);return e.deleteResultDialog(e.result)}),m._UZ(2,"i",133),m.TgZ(3,"span",127),m._uU(4,"Delete"),m.qZA(),m.TgZ(5,"span",122),m._uU(6,"\u276f"),m.qZA(),m.qZA(),m._UZ(7,"br"),m.BQk()}if(2&t){const t=m.oxw(2);m.xp6(3),m.ekj("active",t.showRightButtonContent)}}function Ds(t,e){if(1&t){const t=m.EpF();m.ynx(0),m.TgZ(1,"a",118),m.NdJ("click",function(){m.CHM(t);const e=m.oxw();return e.showRightButtonContent=!e.showRightButtonContent}),m.YNc(2,vs,1,0,"i",119),m.YNc(3,ys,1,0,"i",120),m.TgZ(4,"span",121),m._uU(5,"MENU"),m.qZA(),m.TgZ(6,"span",122),m._uU(7,"\u276f"),m.qZA(),m.qZA(),m._UZ(8,"br"),m.YNc(9,Ss,3,1,"ng-container",3),m.YNc(10,Rs,8,7,"ng-container",3),m.YNc(11,Qs,8,7,"ng-container",3),m.YNc(12,Is,8,2,"ng-container",3),m.YNc(13,Js,8,2,"ng-container",3),m.YNc(14,Ps,8,2,"ng-container",3),m.BQk()}if(2&t){const t=m.oxw();m.xp6(2),m.Q6J("ngIf",t.showRightButtonContent),m.xp6(1),m.Q6J("ngIf",!t.showRightButtonContent),m.xp6(1),m.ekj("active",t.showRightButtonContent),m.xp6(5),m.Q6J("ngIf",t.currentProject.privilege.canEditResult),m.xp6(1),m.Q6J("ngIf",t.currentProject.getValidResultPageKeys(t.result.task.key).length>0),m.xp6(1),m.Q6J("ngIf",1===t.result.status&&t.result.task&&null!==t.result.task.proxy),m.xp6(1),m.Q6J("ngIf",t.result.status<2&&t.currentProject.privilege.canRun),m.xp6(1),m.Q6J("ngIf",1!==t.result.status&&t.currentProject.privilege.canRun),m.xp6(1),m.Q6J("ngIf",t.currentProject.privilege.canDeleteResult)}}const Ys=function(){return["/home"]},Ms=function(){return["/project/list"]};let js=(()=>{class t{constructor(t,e,s,i,n,r,a,o){this.router=t,this.route=e,this.projectService=s,this.infoService=i,this.taskService=n,this.dialog=r,this.systemService=a,this.accountService=o,this.showRightButtonContent=!1,this.showWorkflowGraph=!1,this.timer$=(0,Y.F)(1e3),this.taskList={},this.resultTaskLogs={},this.resultTimers={},this.taskLogViewMode="table",this._viewControls={isLoading:!0,isEditing:!1,isDeleting:!1,workflowSteps:[[]],displayStepsInARow:5,childResultStatus:[],displayStep:-1,displayChildResults:[],displayChildResultIndex:0,confirmDelete:""},this.taskID2Task={},this.childResults=[],this.stepDisplay=[],this.currentResultTimer="",this._subs=[]}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.settingStepsInARow(),this._subs.push(this.accountService.currentUser$.subscribe(t=>{this.currentUser=t})),this._subs.push(this.timer$.subscribe(()=>{const t=Object.keys(this.resultTimers);for(let e=0;e<t.length;e++){const s=this.resultTimers[t[e]];s.timerDisplay=this.resultTimerDisplay(s.result)}this.result&&(this.currentResultTimer=this.resultTimerDisplay(this.result))})),this._subs.push(this.taskService.taskList$.subscribe(t=>{if(t&&t.length>0){this.taskList={};for(let e=0;e<t.length;e++){const s=t[e];this.taskList[s.id]=s,this.taskID2Task[s.id]=s}}})),this._subs.push(this.projectService.currentResult$.subscribe(t=>{t&&this.result&&t&&(t&&t.id===this.result.id?(this.result=void 0,this.childResults=[],setTimeout(()=>{this.result=t,this.setCurrentPackage(),"workflow"===this.result.type&&this.prepareWorkflowChildren()},1)):t&&t.parent===this.result.id&&this.prepareWorkflowChildren(),this.resultTimers[t.id]={result:t,timerDisplay:this.resultTimerDisplay(t)})})),this._subs.push(this.projectService.currentProject$.subscribe(t=>{var e;t&&t.id!==(null===(e=this.currentProject)||void 0===e?void 0:e.id)&&(this.currentProject=t,Array.isArray(this.currentProject.packages)&&this.taskService.loadTasks(this.currentProject.packages.map(t=>t.id)),this.setCurrentPackage())})),this.route.queryParamMap.subscribe(t=>{this._viewControls.isEditing="1"===t.get("edit")}),this._subs.push(this.infoService.incomingMessage$.subscribe(t=>{"35"===t.code&&this.router.navigate(["/project/list"])})),this.route.paramMap.pipe((0,L.w)(t=>{const e=t.get("resultId");return e?this.projectService.loadResultInfo(e):(0,M.of)(new J.j({errors:["No resultId"]}))})).subscribe(t=>{t.isError||(this.result=t.success,this.result&&"workflow"===this.result.type&&this.prepareWorkflowChildren(),this._viewControls.isLoading=!1,this.systemService.toggleNavbar(!0),this.systemService.maintainRightSidebarStatus(),this.setCurrentPackage())}),momentDurationFormatSetup(P)}get hasValidResultPages(){return!!(this.currentProject&&this.result&&this.result.task&&this.result.task.key)&&this.currentProject.getValidResultPages(this.result.task.key).length>0}setCurrentPackage(){if(!this.currentProject||!this.result)return;let t=null;if(this.result.task&&this.result.task.package?t=this.result.task.package:this.result.taskSnapshot&&this.result.taskSnapshot.package&&(t=this.result.taskSnapshot.package),!t)return void(this.currentPackage=void 0);const e=this.taskService.loadPackage(t,!0).subscribe(t=>{e.unsubscribe(),this.currentPackage=t.isError?void 0:t.success})}prepareWorkflowChildren(){this.childResults=this.getChildResults(),this.checkChildResultStatus(),this.stepDisplay=this.displayStep()}settingStepsInARow(){if(!this.resultInfoEl)return;const t=this.resultInfoEl.nativeElement.offsetWidth;this._viewControls.displayStepsInARow=t>=1400?7:t>=1024?5:t>=480?3:1,this.stepDisplay=this.displayStep()}displayStep(){const t=this._viewControls.displayStepsInARow,e=this.childResults,s=Math.ceil(e.length/t),i=[];for(let n=0;n<s;n++)i[n]=e.slice(n*t,(n+1)*t);return i}getChildResults(){const t=[[]];if(this.currentProject&&this.result){const e=this.currentProject.results;for(let s=0;s<this.result.children.length;s++){const i=this.result.children[s];t[s]=[];for(let n=0;n<i.length;n++)for(let r=0;r<e.length;r++)e[r].id===i[n]&&(t[s][n]=e[r])}}return t}cssResultStatus(t){const e={"fa-hourglass-half":!1,"fa-circle-o-notch":!1,"fa-check":!1,"fa-times":!1,"fa-trash":!1};if(t)switch(t){case 0:e["fa-hourglass-half"]=!0;break;case 1:e["fa-circle-o-notch"]=!0;break;case 2:e["fa-check"]=!0;break;case 3:e["fa-times"]=!0;break;case 4:e["fa-trash"]=!0}return e}checkChildResultStatus(){if(!this.result)return;const t=this._viewControls.childResultStatus;if(this.result.task&&this.result.task.mapper)for(let e=0;e<this.childResults.length;e++){const s=this.childResults[e];if(s.length>0){t[e]=2;for(let i=0;i<s.length;i++){const n=s[i];if(n){if(0===n.status){t[e]=0;break}if(1===n.status)t[e]=t[e]>1?1:t[e];else if(3===n.status){t[e]=3;break}}}}else t[e]=-1}}getStepName(t){let e,s="N/A";if(!this.result)return s;if(this.result.task&&this.result.task.id?e=this.result.task:this.result.taskSnapshot&&this.result.taskSnapshot.id&&(e=this.result.taskSnapshot),!e)return s;if(Array.isArray(e.stepNames)&&(s=e.stepNames[t],s))return s;if(e.mapper){const i=e.mapper[t];i&&(s="["+i.map(t=>t.id&&this.taskID2Task[t.id]?this.taskID2Task[t.id].name:"").join(", ")+"]")}else this.childResults[t]&&(s=this.childResults[t].map(t=>t.name).join(", "));return s}gotoProject(){const t=this.result?this.result.project:this.currentProject?this.currentProject.id:void 0;t&&this.router.navigate(["/project/"+t+"/info"])}onSave(){if(this._viewControls.isEditing&&this.result){this._viewControls.isEditing=!1;const t=this.projectService.updateResultInfo(this.result).subscribe(e=>{t.unsubscribe(),this.result=e.success})}else this._viewControls.isEditing=!0}trackByDataFile(t,e){return e.id?e.id:void 0}trackByResult(t,e){return e.id?e.id:void 0}loadResultInfo(t,e){this._viewControls.displayChildResultIndex=e;const s=this.projectService.loadResultInfo(t).subscribe(()=>s.unsubscribe())}resultTimerDisplay(t){if(!t)return"";let e,s,i,n,r,a;if("workflow"!==t.type){if(0===t.status)return e=P(t.timer[0]),n=P().diff(e),`The task is currently in queue and has waited for around <b>\n          ${P.duration(n).format("hh:mm:ss",{trim:!1})}</b>.`;if(1===t.status)return e=P(t.timer[0]),s=P(t.timer[1]),a=P(),n=s.diff(e),r=a.diff(s),`The task waited for\n          <b>${P.duration(n).format("hh:mm:ss.S",{trim:!1})}</b> and is currently running for\n          <b>${P.duration(r).format("hh:mm:ss",{trim:!1})}</b>.`;if(2===t.status||3===t.status)return e=P(t.timer[0]),s=P(t.timer[1]),i=P(t.timer[2]),n=s.diff(e),r=i.diff(s),`The task waited for <b> ${P.duration(n).format("hh:mm:ss.S",{trim:!1})}</b> and then took <b>${P.duration(r).format("hh:mm:ss.S",{trim:!1})}</b> to finish.`}else{if(1===t.status)return s=P(t.timer[0]),a=P(),r=a.diff(s),`This task is currently running for <b>${P.duration(r).format("hh:mm:ss",{trim:!1})}</b>.`;if(2===t.status||3===t.status)return s=P(t.timer[0]),i=P(t.timer[1]),r=i.diff(s),`The task took <b>${P.duration(r).format("hh:mm:ss.S",{trim:!1})}</b> to finish.`}return""}stopResult(t,e){const s=this.projectService.stopResult(t).subscribe(()=>s.unsubscribe())}resumeResult(t){const e=this.projectService.resumeResult(t.id).subscribe(()=>e.unsubscribe())}stopResultDialog(t){const e=this.dialog.open(j.N,{disableClose:!1});e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to stop the processes <strong>${t.name}</strong>'?</h4>`,desc:`<span class="text-danger">This will stop the processes, name: <b>${t.name}</b><br>This cannot be undone. Make sure this is something you really want to do!</span><br>`}),e.afterClosed().subscribe(e=>{e&&this.stopResult(t,e)})}resumeResultDialog(t){const e=this.dialog.open(j.N,{disableClose:!1});e.componentInstance.setOptions({title:`<h4 class="modal-title text-primary">Are you sure you want to resume or re-run the process <strong>${t.name}</strong>'?</h4>`,desc:`<span class="text-primary">This will resume/re-run the processes, name: <b>${t.name}</b><br>`}),e.afterClosed().subscribe(e=>{e&&this.resumeResult(t)})}deleteResult(t,e){const s=this.projectService.deleteResult(t).subscribe(e=>{if(s.unsubscribe(),!e.isError){t.status=4;const e=this.result?this.result.project:this.currentProject?this.currentProject.id:t.project;e&&this.router.navigate(["/project",e,"result","list"])}})}deleteResultDialog(t){const e=this.dialog.open(j.N,{disableClose:!1});e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to delete the result <strong>${t.name}</strong>'?</h4>`,desc:`<span class="text-danger">This will delete the result, name: <b>${t.name}</b>, and all the associated outputs. <br>This cannot be undone. Make sure this is something you really want to do!</span><br>`}),e.afterClosed().subscribe(e=>{e&&this.deleteResult(t,e)})}showStep(t){if(this.result)if(this._viewControls.displayStep===t)this._viewControls.displayStep=-1;else if(this._viewControls.displayStep=t,this._viewControls.displayChildResultIndex=0,this._viewControls.displayStep>=0){const t=this.childResults[this._viewControls.displayStep][0];t&&this.loadResultInfo(t.id,0)}}onResultTabChange(t,e){2===t.index&&this.loadResultLogs(e)}loadResultLogs(t){this.resultTaskLogs[t]=[];const e=this.projectService.getResultLogs(t).subscribe(s=>{e.unsubscribe();const i=s.success.split("\n").map(t=>t.split("\t")),n=i[0];this.resultTaskLogs[t]=i.slice(1).map((t,e)=>{const s={index:e};return t.forEach((t,e)=>s[n[e]]=t),new D(s)}).filter(t=>""!==t.process||"undefined"!==t.taskName)})}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(Q.F0),m.Y36(Q.gz),m.Y36(O.Y),m.Y36(B.C),m.Y36($.M),m.Y36(F.uw),m.Y36(z.o),m.Y36(E.B))},t.\u0275cmp=m.Xpm({type:t,selectors:[["result-info"]],viewQuery:function(t,e){if(1&t&&m.Gf(he,7),2&t){let t;m.iGM(t=m.CRH())&&(e.resultInfoEl=t.first)}},decls:27,vars:15,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[4,"ngIf"],[3,"routerLink","click",4,"ngIf"],["class","breadcrumb-item",4,"ngIf"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[1,"container-fluid",2,"height","100%"],["resultInfoContainer",""],["class","overlay",4,"ngIf"],[1,"chi-right-menu"],[3,"routerLink","click"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"row"],[1,"col-md-3","col-lg-2","text-md-right"],[1,"col-md-9","col-lg-10"],[3,"hidden"],["style","width: 100%;",4,"ngIf"],["class","row",4,"ngIf"],["target","_blank",3,"routerLink","queryParams",4,"ngIf"],[3,"innerHTML"],[1,"col-md-9","col-lg-10",3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],["class","row my-2",4,"ngIf"],[1,"row","mt-2","mb-4"],[1,"col-12"],[3,"theResult","currentUser","expanded"],[1,"text-muted",2,"white-space","pre"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for this result record.",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for this result record.",3,"ngModel","ngModelChange"],[2,"width","100%"],["matInput","","type","text","maxlength","80","size","80","placeholder","The result title (length must be smaller or equal than 80 characters)",3,"ngModel","ngModelChange"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["matInput","","placeholder","Say something about this subset. (max length: 160 characters)","maxlength","160","rows","3",3,"ngModel","ngModelChange"],[1,"fas","fa-cube","fa-fw","mr-2"],["target","_blank",3,"routerLink","queryParams"],[1,"fas","fa-external-link-alt","fa-fw","ml-2"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],[1,"row","my-2"],[4,"ngFor","ngForOf"],[1,"col-lg-3","pl-4"],[1,"text-muted","ml-4"],[1,"mr-3",2,"display","inline-block"],[1,"fas","fa-cube","fa-lg","mr-2"],[2,"display","inline-block"],[1,"fas","fa-cubes","fa-lg","mr-2"],[1,"col-lg-9","p-2"],["mat-stroked-button","","class","ml-2 mb-2",3,"routerLink","queryParams",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"ml-2","mb-2",3,"routerLink","queryParams"],[1,"mr-2","fas","fa-scroll","fa-fw"],["class","col-12",4,"ngIf"],["animationDuration","0ms",2,"min-height","600px",3,"selectedTabChange"],["label","Standard output"],[2,"width","100%","overflow","auto"],[3,"text",4,"ngIf"],["label","System message"],["mat-tab-label",""],["mat-button","",2,"min-width","0.1%",3,"click"],[1,"fas","fa-sync","fa-fx","mr-2",2,"color","green"],["name","fontStyle","aria-label","Font Style",3,"ngModel","ngModelChange"],["value","table"],[3,"mode","taskLogs","resultID"],["role","alert",1,"alert","alert-danger"],["class","ml-4",4,"ngFor","ngForOf"],[1,"ml-4"],[3,"text"],["mat-button","",3,"click"],[1,"fas","fa-project-diagram"],["style","width: 100%;",3,"taskMapper","childTasks","taskArgs","resultList",4,"ngIf"],[1,"fas","fa-exclamation-triangle","mr-2"],[2,"width","100%",3,"taskMapper","childTasks","taskArgs","resultList"],[3,"currentProject","currentResult","taskID2Task","stepSelect",4,"ngIf"],[3,"currentProject","currentResult","taskID2Task","stepSelect"],["animationDuration","0ms"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"container-fluid"],[1,"col-md-3"],[1,"col-md-9"],[1,"col-md-9",3,"innerHTML"],["class","col-md-9",3,"innerHTML",4,"ngIf"],[1,"col-12","my-2"],[3,"theResult","currentUser","parent"],[1,"fas","fa-sync",2,"color","green"],[1,"col-md-12"],["animationDuration","0ms",2,"min-height","800px",3,"selectedTabChange"],[1,"fas","fa-sync","fa-fx",2,"color","green"],["class","row px-2",4,"ngIf"],[3,"click"],[3,"ngSwitch"],["aria-hidden","true",1,"fas","fa-trash","fa-fw"],[1,"row","px-2"],["md-raised-button","",3,"click",4,"ngIf"],["class","col-md-12",4,"ngIf"],["md-raised-button","",3,"click"],["class","col-lg-6 col-xl-4",3,"dataFile",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-6","col-xl-4",3,"dataFile"],[1,"overlay"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],["class","chi-rbtn",3,"active","click",4,"ngIf"],["aria-hidden","true",1,"fas",3,"ngClass"],[1,"chi-rbtn-content"],[1,"chi-rbtn",3,"routerLink","queryParams"],[1,"fas","fa-scroll","fa-fw"],[1,"fas","fa-network-wired","fa-fw"],[1,"far","fa-stop-circle","fa-fw"],[1,"far","fa-play-circle","fa-fw"],[1,"fas","fa-trash","fa-fw"]],template:function(t,e){1&t&&(m.TgZ(0,"ol",0),m.TgZ(1,"li",1),m.TgZ(2,"a",2),m._uU(3,"Home"),m.qZA(),m.qZA(),m.TgZ(4,"li",1),m.TgZ(5,"a",2),m._uU(6,"Project List"),m.qZA(),m.qZA(),m.TgZ(7,"li",1),m.YNc(8,me,2,0,"a",3),m.YNc(9,we,3,4,"a",4),m.qZA(),m.YNc(10,be,2,0,"li",5),m.TgZ(11,"li",1),m.YNc(12,Te,2,3,"a",6),m.qZA(),m.YNc(13,qe,5,6,"li",7),m.YNc(14,ve,2,0,"li",7),m.qZA(),m.TgZ(15,"div",8),m.TgZ(16,"h4",9),m._uU(17,"Result information"),m.qZA(),m.YNc(18,ye,2,0,"div",3),m._UZ(19,"br"),m._UZ(20,"br"),m.TgZ(21,"div",10,11),m.YNc(23,As,77,26,"div",3),m.YNc(24,qs,1,0,"div",12),m.qZA(),m.qZA(),m.TgZ(25,"div",13),m.YNc(26,Ds,15,10,"ng-container",3),m.qZA()),2&t&&(m.xp6(2),m.Q6J("routerLink",m.DdM(13,Ys)),m.xp6(3),m.Q6J("routerLink",m.DdM(14,Ms)),m.xp6(3),m.Q6J("ngIf",!e.currentProject),m.xp6(1),m.Q6J("ngIf",e.currentProject),m.xp6(1),m.Q6J("ngIf",void 0===e.result),m.xp6(2),m.Q6J("ngIf",e.currentProject),m.xp6(1),m.Q6J("ngIf",e.result),m.xp6(1),m.Q6J("ngIf",!e.result),m.xp6(4),m.Q6J("ngIf",e._viewControls.isLoading),m.xp6(5),m.Q6J("ngIf",!e._viewControls.isLoading&&void 0!==e.result),m.xp6(1),m.Q6J("ngIf",e._viewControls.isDeleting),m.xp6(1),m.Q6J("@rightButtonState",e.showRightButtonContent?"active":"inactive"),m.xp6(1),m.Q6J("ngIf",e.result&&e.currentProject))},directives:[Q.yS,i.O5,i.RF,i.n9,f.d,pt,ft.KE,l.Nt,n.Fj,n.nD,n.JJ,n.On,ft.qo,ft.R9,i.sg,r.zs,c.SP,c.uX,c.uD,r.lW,a.A9,a.Yi,ee,se.O,ie.t,pe,fe.A,i.mk],styles:['.wrap[_ngcontent-%COMP%]{width:100%;height:30px;white-space:nowrap;overflow:hidden;margin-top:5px;transform-style:preserve-3d;perspective:1600px}.wrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-left:-1%}.workflowProgress[_ngcontent-%COMP%]{margin:0 0 0 .5%;height:30px;position:relative;display:inline-block;text-align:left;line-height:30px;transition:all .8s;cursor:pointer}.workflowProgress[_ngcontent-%COMP%]:after, .workflowProgress[_ngcontent-%COMP%]:before{content:"";position:absolute;transition:all .8s;z-index:-1}.workflowProgress[_ngcontent-%COMP%]:before{height:15px;width:100%;top:0;left:0;background:#d3d3d3;transform:skew(45deg)}.workflowProgress[_ngcontent-%COMP%]:after{height:15px;width:100%;top:14px;left:0;background:#d3d3d3;transform:skew(-45deg)}.workflowProgress.success[_ngcontent-%COMP%]:after, .workflowProgress.success[_ngcontent-%COMP%]:before{background:#90ee90}.workflowProgress.error[_ngcontent-%COMP%]:after, .workflowProgress.error[_ngcontent-%COMP%]:before{background:#f08080}.workflowProgress.processing[_ngcontent-%COMP%]:after, .workflowProgress.processing[_ngcontent-%COMP%]:before{background:#f4a460}.workflowProgress.active[_ngcontent-%COMP%]:after, .workflowProgress.active[_ngcontent-%COMP%]:before{transition:all .3s cubic-bezier(.25,.8,.25,1)}.workflowProgress.blur[_ngcontent-%COMP%]:after, .workflowProgress.blur[_ngcontent-%COMP%]:before{opacity:.3}.mat-tab-body-content[_ngcontent-%COMP%]{overflow:hidden!important}'],data:{animation:[I.M]}}),t})();var Ls=s(20868),Os=s(44723);function Bs(t,e){1&t&&m._UZ(0,"th",38)}function $s(t,e){1&t&&(m.ynx(0),m._UZ(1,"i",41),m.BQk())}function Fs(t,e){1&t&&(m.ynx(0),m._UZ(1,"i",42),m.BQk())}function zs(t,e){if(1&t&&(m.TgZ(0,"td",39),m.YNc(1,$s,2,0,"ng-container",40),m.YNc(2,Fs,2,0,"ng-container",40),m.qZA()),2&t){const t=e.$implicit,s=m.oxw();m.uIk("rowspan",s.expandedResults.has(t.id)?2:1),m.xp6(1),m.Q6J("ngIf",s.expandedResults.has(t.id)),m.xp6(1),m.Q6J("ngIf",!s.expandedResults.has(t.id))}}function Es(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Project name"),m.qZA())}const Hs=function(t){return["/project",t,"info"]};function Vs(t,e){if(1&t&&(m.TgZ(0,"a",2),m._uU(1),m.qZA()),2&t){const t=m.oxw().$implicit,e=m.oxw();m.Q6J("routerLink",m.VKq(2,Hs,e.resultID2Project[t.id].id)),m.xp6(1),m.Oqu(null==e.resultID2Project[t.id]?null:e.resultID2Project[t.id].name)}}function Xs(t,e){if(1&t&&(m.TgZ(0,"td",44),m.YNc(1,Vs,2,4,"a",45),m.TgZ(2,"a",46),m._UZ(3,"span",47),m.qZA(),m.qZA()),2&t){const t=e.$implicit,s=m.oxw();m.xp6(1),m.Q6J("ngIf",t.project),m.xp6(1),m.Q6J("routerLink",m.VKq(2,Hs,s.resultID2Project[t.id].id))}}function Ws(t,e){1&t&&(m.TgZ(0,"th",48),m._uU(1,"Type"),m.qZA())}function Ks(t,e){1&t&&m._UZ(0,"i",55)}function Gs(t,e){1&t&&m._UZ(0,"i",56)}function ti(t,e){1&t&&m._UZ(0,"i",57)}function ei(t,e){1&t&&m._UZ(0,"i",58)}function si(t,e){if(1&t&&(m.TgZ(0,"td",49),m.TgZ(1,"div",50),m.YNc(2,Ks,1,0,"i",51),m.YNc(3,Gs,1,0,"i",52),m.YNc(4,ti,1,0,"i",53),m.YNc(5,ei,1,0,"i",54),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t?null:t.type),m.xp6(1),m.Q6J("ngSwitchCase","workflow"),m.xp6(1),m.Q6J("ngSwitchCase","standard"),m.xp6(1),m.Q6J("ngSwitchCase","child"),m.xp6(1),m.Q6J("ngSwitchCase","system")}}function ii(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Prefix"),m.qZA())}function ni(t,e){if(1&t&&(m.TgZ(0,"td",59),m.TgZ(1,"u",60),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(2),m.Oqu(t.prefix)}}function ri(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Result name"),m.qZA())}const ai=function(t){return["/result",t,"info"]};function oi(t,e){if(1&t&&(m.TgZ(0,"td",61),m.TgZ(1,"a",2),m._uU(2),m.qZA(),m.TgZ(3,"a",46),m._UZ(4,"span",47),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("routerLink",m.VKq(3,ai,t.id)),m.xp6(1),m.Oqu(null==t?null:t.name),m.xp6(1),m.Q6J("routerLink",m.VKq(5,ai,t.id))}}function li(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Suffix"),m.qZA())}function ci(t,e){if(1&t&&(m.TgZ(0,"td",62),m.TgZ(1,"u",60),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(2),m.Oqu(t.suffix)}}function ui(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Updated time"),m.qZA())}function di(t,e){if(1&t&&(m.TgZ(0,"td",63),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(null==t||null==t.updatedAt?null:t.updatedAt.format("YYYY/MM/DD HH:mm:ss"))}}function gi(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Status"),m.qZA())}function pi(t,e){1&t&&(m.TgZ(0,"p",69),m._UZ(1,"i",70),m.qZA())}function fi(t,e){1&t&&(m.TgZ(0,"p",71),m._UZ(1,"i",72),m.qZA())}function hi(t,e){1&t&&(m.TgZ(0,"p",73),m._UZ(1,"i",74),m.qZA())}function mi(t,e){1&t&&(m.TgZ(0,"p",75),m._UZ(1,"i",76),m.qZA())}function Zi(t,e){1&t&&(m.TgZ(0,"p",77),m._UZ(1,"i",78),m.qZA())}function xi(t,e){if(1&t&&(m.TgZ(0,"td",63),m.TgZ(1,"div",50),m.YNc(2,pi,2,0,"p",64),m.YNc(3,fi,2,0,"p",65),m.YNc(4,hi,2,0,"p",66),m.YNc(5,mi,2,0,"p",67),m.YNc(6,Zi,2,0,"p",68),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t?null:t.status),m.xp6(1),m.Q6J("ngSwitchCase",0),m.xp6(1),m.Q6J("ngSwitchCase",1),m.xp6(1),m.Q6J("ngSwitchCase",2),m.xp6(1),m.Q6J("ngSwitchCase",3),m.xp6(1),m.Q6J("ngSwitchCase",4)}}function wi(t,e){1&t&&(m.TgZ(0,"th",43),m._uU(1,"Owner"),m.qZA())}function bi(t,e){if(1&t&&(m.TgZ(0,"td",63),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(2),m.Oqu(null==t||null==t.owner?null:t.owner.name)}}function ki(t,e){if(1&t&&m._UZ(0,"chi-terminal",92),2&t){const t=m.oxw(3).$implicit;m.Q6J("text",null==t?null:t.stdOut)}}function Ti(t,e){if(1&t&&(m.TgZ(0,"div",89),m.YNc(1,ki,1,1,"chi-terminal",91),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Q6J("ngIf",t)}}function Ai(t,e){if(1&t&&m._UZ(0,"chi-terminal",92),2&t){const t=m.oxw(3).$implicit;m.Q6J("text",null==t?null:t.stdErr)}}function qi(t,e){if(1&t&&(m.TgZ(0,"div",89),m.YNc(1,Ai,1,1,"chi-terminal",91),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Q6J("ngIf",t)}}function vi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",93),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2).$implicit;return m.oxw().loadResultLogs(e.id)}),m._uU(1,"Task logs"),m.qZA()}}function yi(t,e){if(1&t){const t=m.EpF();m.ynx(0),m._UZ(1,"display-arguments",81),m.TgZ(2,"mat-tab-group",82),m.NdJ("selectedTabChange",function(e){m.CHM(t);const s=m.oxw().$implicit;return m.oxw().onResultTabChange(e,s.id)}),m.TgZ(3,"mat-tab",83),m.YNc(4,Ti,2,1,"ng-template",84),m.qZA(),m.TgZ(5,"mat-tab",85),m.YNc(6,qi,2,1,"ng-template",84),m.qZA(),m.TgZ(7,"mat-tab"),m.YNc(8,vi,2,0,"ng-template",86),m.TgZ(9,"button",87),m.NdJ("click",function(){m.CHM(t);const e=m.oxw().$implicit;return m.oxw().loadResultLogs(e.id)}),m._UZ(10,"i",88),m._uU(11," Refresh logs "),m.qZA(),m.TgZ(12,"div",89),m._UZ(13,"chi-tasklog-viewer",90),m.qZA(),m.qZA(),m.qZA(),m.BQk()}if(2&t){const t=m.oxw().$implicit,e=m.oxw();m.xp6(1),m.Q6J("theResult",t)("currentUser",e.currentUser),m.xp6(1),m.Q6J("selectedIndex",0),m.xp6(11),m.Q6J("taskLogs",e.resultTaskLogs[t.id])("resultID",t.id)}}function _i(t,e){if(1&t&&(m.ynx(0),m._UZ(1,"mat-progress-bar",94),m._UZ(2,"display-arguments",81),m.BQk()),2&t){const t=m.oxw().$implicit,e=m.oxw();m.xp6(1),m.Q6J("color","primary")("mode","buffer")("value",e.workflowProgresses[t.id].value)("bufferValue",e.workflowProgresses[t.id].bufferValue),m.xp6(1),m.Q6J("theResult",t)("currentUser",e.currentUser)}}function Ci(t,e){if(1&t&&(m.TgZ(0,"td",79),m.TgZ(1,"div",80),m.YNc(2,yi,14,5,"ng-container",40),m.YNc(3,_i,3,6,"ng-container",40),m.qZA(),m.qZA()),2&t){const t=e.$implicit,s=m.oxw();m.uIk("colspan",s.expandedResults.has(t.id)?8:9),m.xp6(1),m.Q6J("@detailExpand",s.expandedResults.has(t.id)?"expanded":"collapsed"),m.xp6(1),m.Q6J("ngIf","workflow"!==t.type),m.xp6(1),m.Q6J("ngIf","workflow"===t.type)}}function Si(t,e){1&t&&m._UZ(0,"tr",95)}function Ui(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tr",96),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw().toggleRow(e.id)}),m.qZA()}if(2&t){const t=e.$implicit,s=e.dataIndex,i=m.oxw();m.ekj("table-warning",s==i.newTaskIndex)("table-primary",s!=i.newTaskIndex&&i.expandedResults.has(t.id))}}function Ri(t,e){1&t&&m._UZ(0,"tr",97)}const Ni=function(){return["/home"]},Qi=function(){return["/project/list"]},Ii=function(){return["/result/activities"]},Ji=function(){return[10,30]},Pi=function(){return["expander","resultType","projectName","resultPrefix","resultName","resultSuffix","resultStatus","resultOwner","resultUpdateTime"]},Di=function(){return["resultDetail"]},Yi=function(){return[5,10,25,50,100,300]};let Mi=(()=>{class t{constructor(t,e,s,i,n,r){this.projectService=t,this.accountService=e,this.route=s,this.systemService=i,this.infoService=n,this.router=r,this.pageSize=30,this.pageIndex=0,this.totalPage=0,this.totalCount=0,this.activities=[],this.loadedResultID2Result={},this.expandedResults=new Set,this.resultID2Project={},this.workflowProgresses={},this.newTaskIndex=1,this.resultTaskLogs={},this._subs=[]}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this._subs.push(this.infoService.incomingDataChange$.subscribe(t=>{const e=t.type;if("Result"!==t.target)return;let s=t.data;"insert"!==e||s.parent||(this.resultID2Project[s.id]=s.project,s=new Os.x(s),this.loadedResultID2Result[s.id]=s,this.newTaskIndex++,this.activities.unshift(s),"workflow"===s.type&&(this.workflowProgresses[s.id]=2===s.status?{value:100,bufferValue:0}:this.calculateWorkflowProgress(s))),this.loadedResultID2Result[s.id]&&("update"===e?this.updateResult(s):"remove"===e&&this.removeResult(s))})),this._subs.push(this.infoService.incomingResultOutput$.subscribe(t=>{const e=t.target.split(":")[1],s=this.loadedResultID2Result[e];s&&"workflow"!==s.type&&("stdOut"===t.type?s.stdOut=t.data:"stdErr"===t.type&&(s.stdErr=t.data))})),this._subs.push(this.accountService.currentUser$.subscribe(t=>{this.currentUser=t})),this.route.queryParamMap.pipe((0,L.w)(t=>{const e=t.get("pageIndex"),s=t.get("pageSize");return this.pageIndex=e?+e:this.pageIndex,this.pageSize=s?+s:this.pageSize,this.projectService.getActivities(this.pageIndex,this.pageSize)})).subscribe(t=>t.isError?"":this.processActivities(t))}updateResult(t){for(let e=0;e<this.activities.length;e++){const s=this.activities[e];if(t.id===s.id){this.activities[e].name=t.name,this.activities[e].desc=t.desc,this.activities[e].prefix=t.prefix,this.activities[e].suffix=t.suffix,this.activities[e].status=t.status,this.activities[e].owner=t.owner,this.activities[e].updatedAt=P(t.updatedAt),"workflow"===t.type&&this.workflowProgresses[s.id]&&(this.workflowProgresses[s.id]=2===s.status?{value:100,bufferValue:0}:this.calculateWorkflowProgress(t));break}}this.activityTable&&this.activityTable.renderRows()}removeResult(t){for(let e=0;e<this.activities.length;e++)if(t.id===this.activities[e].id){this.activities.splice(e,1);break}delete this.loadedResultID2Result[t.id],delete this.workflowProgresses[t.id],this.activityTable&&this.activityTable.renderRows()}processActivities(t){this.newTaskIndex=-1,this.totalPage=t.success.totalPage,this.totalCount=t.success.totalCount;const e=t.success.records;this.resultID2Project=t.success.resultID2Project;const s=e.length;this.loadedResultID2Result={};for(let i=0;i<s;i++){const t=e[i];this.loadedResultID2Result[t.id]=t,"workflow"===t.type&&(this.workflowProgresses[t.id]=2===t.status?{value:100,bufferValue:0}:this.calculateWorkflowProgress(t))}this.activities=e}reloadActivities(){const t=this.projectService.getActivities(this.pageIndex,this.pageSize).subscribe(e=>{t.unsubscribe(),e.isError||this.processActivities(e)})}calculateWorkflowProgress(t){if("workflow"!==t.type)return{value:0,bufferValue:0};const e=t.task&&Array.isArray(t.task.mapper)?t.task.mapper.length:t.taskSnapshot.mapper.length,s=t.children||[],i=[];for(let n=0;n<e;n++){if(!Array.isArray(t.task.mapper))continue;const r=t.task.mapper[n].length,a=Array.isArray(s[n])?s[n].filter(t=>!!t):[];if(0===a.length)break;i[n]=0,a.length===r&&n<e-1?i[n]=2:0===a.length&&n>=1&&2===i[n-1]?i[n-1]=1:a.length===r&&n===e-1&&2!==t.status&&(i[n]=1)}return{value:100*i.filter(t=>2===t).length/e,bufferValue:100*i.filter(t=>1===t).length/e}}onPageChange(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.router.navigate(["result","activities"],{queryParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}})}toggleRow(t){this.expandedResults.has(t)?this.expandedResults.delete(t):this.expandedResults.add(t)}onResultTabChange(t,e){2===t.index&&this.loadResultLogs(e)}loadResultLogs(t){const e=this.projectService.getResultLogs(t).subscribe(s=>{e.unsubscribe();const i=s.success.split("\n").map(t=>t.split("\t")),n=i[0];this.resultTaskLogs[t]=i.slice(1).map(t=>{const e={};return t.forEach((t,s)=>e[n[s]]=t),new D(e)}).filter(t=>""!==t.process||"undefined"!==t.taskName)})}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(O.Y),m.Y36(E.B),m.Y36(Q.gz),m.Y36(z.o),m.Y36(B.C),m.Y36(Q.F0))},t.\u0275cmp=m.Xpm({type:t,selectors:[["result-activity"]],viewQuery:function(t,e){if(1&t&&m.Gf(d.BZ,5),2&t){let t;m.iGM(t=m.CRH())&&(e.activityTable=t.first)}},decls:57,vars:25,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"bdp-main-container"],[1,"chi-header"],["mat-stroked-button","",3,"click"],[1,"fas","fa-redo","mr-2"],[1,"table-responsive"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],["mat-table","","multiTemplateDataRows","",1,"table","table-striped","table-bordered","table-hover",3,"dataSource"],["activityTable",""],["matColumnDef","expander"],["mat-header-cell","","class","align-middle",4,"matHeaderCellDef"],["mat-cell","","class","link align-middle text-center p-0",4,"matCellDef"],["matColumnDef","projectName"],["mat-header-cell","","class","align-middle  text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle px-2",4,"matCellDef"],["matColumnDef","resultType"],["style","width: 30px;","mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["style","width: 30px;","mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultPrefix"],["mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultName"],["mat-cell","","class","align-middle text-center px-2",4,"matCellDef"],["matColumnDef","resultSuffix"],["mat-cell","","class","align-middle text-left",4,"matCellDef"],["matColumnDef","resultUpdateTime"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","resultStatus"],["matColumnDef","resultOwner"],["matColumnDef","resultDetail"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1)",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"table-warning","table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","result-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"align-middle"],["mat-cell","",1,"link","align-middle","text-center","p-0"],[4,"ngIf"],[1,"fas","fa-angle-up"],[1,"fas","fa-angle-down"],["mat-header-cell","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","px-2"],[3,"routerLink",4,"ngIf"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],["mat-header-cell","",1,"align-middle","text-center",2,"width","30px"],["mat-cell","",1,"align-middle","text-right",2,"width","30px"],[1,"col-md-9",3,"ngSwitch"],["class","fas fa-cogs fa-fw",4,"ngSwitchCase"],["class","fas fa-cog fa-fw",4,"ngSwitchCase"],["class","fas fa-puzzle-piece fa-fw",4,"ngSwitchCase"],["class","fas fa-server fa-fw",4,"ngSwitchCase"],[1,"fas","fa-cogs","fa-fw"],[1,"fas","fa-cog","fa-fw"],[1,"fas","fa-puzzle-piece","fa-fw"],[1,"fas","fa-server","fa-fw"],["mat-cell","",1,"align-middle","text-right"],[1,"text-muted"],["mat-cell","",1,"align-middle","text-center","px-2"],["mat-cell","",1,"align-middle","text-left"],["mat-cell","",1,"align-middle","text-center"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],["mat-cell","",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"result-details","my-3"],[3,"theResult","currentUser"],["animationDuration","0ms",3,"selectedIndex","selectedTabChange"],["label","Standard output"],["matTabContent",""],["label","Standard error"],["mat-tab-label",""],["mat-button","",3,"click"],[1,"fas","fa-sync","fa-fx",2,"color","green"],[2,"width","100%","overflow","auto"],[3,"taskLogs","resultID"],[3,"text",4,"ngIf"],[3,"text"],[3,"click"],[3,"color","mode","value","bufferValue"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"result-detail-row"]],template:function(t,e){1&t&&(m.TgZ(0,"ol",0),m.TgZ(1,"li",1),m.TgZ(2,"a",2),m._uU(3,"Home"),m.qZA(),m.qZA(),m.TgZ(4,"li",1),m.TgZ(5,"a",2),m._uU(6,"Project List"),m.qZA(),m.qZA(),m.TgZ(7,"li",1),m.TgZ(8,"a",2),m._uU(9,"Recent activities"),m.qZA(),m.TgZ(10,"a",3),m._UZ(11,"i",4),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",5),m.TgZ(13,"h3",6),m._uU(14,"Recent activities "),m.qZA(),m._UZ(15,"br"),m._UZ(16,"br"),m.TgZ(17,"button",7),m.NdJ("click",function(){return e.reloadActivities()}),m._UZ(18,"i",8),m._uU(19," Refresh "),m.qZA(),m.TgZ(20,"div",9),m.TgZ(21,"mat-paginator",10),m.NdJ("page",function(t){return e.onPageChange(t)}),m.qZA(),m.TgZ(22,"table",11,12),m.ynx(24,13),m.YNc(25,Bs,1,0,"th",14),m.YNc(26,zs,3,3,"td",15),m.BQk(),m.ynx(27,16),m.YNc(28,Es,2,0,"th",17),m.YNc(29,Xs,4,4,"td",18),m.BQk(),m.ynx(30,19),m.YNc(31,Ws,2,0,"th",20),m.YNc(32,si,6,5,"td",21),m.BQk(),m.ynx(33,22),m.YNc(34,ii,2,0,"th",23),m.YNc(35,ni,3,1,"td",24),m.BQk(),m.ynx(36,25),m.YNc(37,ri,2,0,"th",17),m.YNc(38,oi,5,7,"td",26),m.BQk(),m.ynx(39,27),m.YNc(40,li,2,0,"th",17),m.YNc(41,ci,3,1,"td",28),m.BQk(),m.ynx(42,29),m.YNc(43,ui,2,0,"th",17),m.YNc(44,di,2,1,"td",30),m.BQk(),m.ynx(45,31),m.YNc(46,gi,2,0,"th",23),m.YNc(47,xi,7,6,"td",30),m.BQk(),m.ynx(48,32),m.YNc(49,wi,2,0,"th",17),m.YNc(50,bi,3,1,"td",30),m.BQk(),m.ynx(51,33),m.YNc(52,Ci,4,4,"td",34),m.BQk(),m.YNc(53,Si,1,0,"tr",35),m.YNc(54,Ui,1,4,"tr",36),m.YNc(55,Ri,1,0,"tr",37),m.qZA(),m.TgZ(56,"mat-paginator",10),m.NdJ("page",function(t){return e.onPageChange(t)}),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(2),m.Q6J("routerLink",m.DdM(16,Ni)),m.xp6(3),m.Q6J("routerLink",m.DdM(17,Qi)),m.xp6(3),m.Q6J("routerLink",m.DdM(18,Ii)),m.xp6(2),m.Q6J("routerLink",m.DdM(19,Ii)),m.xp6(11),m.Q6J("pageSizeOptions",m.DdM(20,Ji))("pageSize",e.pageSize)("pageIndex",e.pageIndex)("length",e.totalCount),m.xp6(1),m.Q6J("dataSource",e.activities),m.xp6(31),m.Q6J("matHeaderRowDef",m.DdM(21,Pi)),m.xp6(1),m.Q6J("matRowDefColumns",m.DdM(22,Pi)),m.xp6(1),m.Q6J("matRowDefColumns",m.DdM(23,Di)),m.xp6(1),m.Q6J("pageSizeOptions",m.DdM(24,Yi))("pageSize",e.pageSize)("pageIndex",e.pageIndex)("length",e.totalCount))},directives:[Q.yS,r.lW,h.NW,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,d.ge,d.ev,i.O5,i.RF,i.n9,pt,c.SP,c.uX,c.Vc,c.uD,ee,se.O,C,d.XQ,d.Gk],styles:["tr.result-detail-row[_ngcontent-%COMP%]{height:0}.result-details[_ngcontent-%COMP%]{overflow:hidden}"],data:{animation:[(0,ht.X$)("detailExpand",[(0,ht.SB)("collapsed",(0,ht.oB)({height:"0px",minHeight:"0",display:"none"})),(0,ht.SB)("expanded",(0,ht.oB)({height:"*",display:"block"})),(0,ht.eR)("expanded <=> collapsed",(0,ht.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();function ji(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.hij(": ",t.currentProject.name,"")}}const Li=function(t){return["/project",t,"info"]};function Oi(t,e){if(1&t&&(m.TgZ(0,"a",2),m._uU(1,"Project "),m.YNc(2,ji,2,1,"span",7),m.qZA()),2&t){const t=m.oxw();m.Q6J("routerLink",m.VKq(2,Li,t.currentProject.id)),m.xp6(2),m.Q6J("ngIf",t.currentProject)}}const Bi=function(t){return["/project",t,"result","list"]};function $i(t,e){if(1&t&&(m.TgZ(0,"li",10),m.TgZ(1,"a",2),m._uU(2,"Result List"),m.qZA(),m.TgZ(3,"a",11),m._UZ(4,"i",12),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("routerLink",m.VKq(2,Bi,t.currentProject.id)),m.xp6(2),m.Q6J("routerLink",m.VKq(4,Bi,t.currentProject.id))}}function Fi(t,e){1&t&&(m.TgZ(0,"li",10),m._uU(1,"Result List"),m.qZA())}function zi(t,e){1&t&&(m.TgZ(0,"div"),m._uU(1,"Loading... "),m._UZ(2,"i",13),m.qZA())}function Ei(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"div",14),m.TgZ(2,"div",15),m.TgZ(3,"strong"),m._uU(4,"Project name"),m.qZA(),m.qZA(),m.TgZ(5,"div",16),m.TgZ(6,"span",17),m._uU(7),m.qZA(),m.qZA(),m.qZA(),m._UZ(8,"br"),m.TgZ(9,"div",14),m.TgZ(10,"div",15),m.TgZ(11,"strong"),m._uU(12,"Project description"),m.qZA(),m.qZA(),m.TgZ(13,"div",16),m.TgZ(14,"span",17),m._uU(15),m.qZA(),m.qZA(),m.qZA(),m._UZ(16,"br"),m.TgZ(17,"div",14),m.TgZ(18,"div",15),m.TgZ(19,"strong"),m._uU(20,"Number of results"),m.qZA(),m.qZA(),m.TgZ(21,"div",16),m.TgZ(22,"span",18),m._uU(23),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&t){const t=m.oxw();m.xp6(7),m.Oqu(null!=t.currentProject&&t.currentProject.name?null==t.currentProject?null:t.currentProject.name:"Unnamed"),m.xp6(8),m.Oqu(null!=t.currentProject&&t.currentProject.desc?null==t.currentProject?null:t.currentProject.desc:"No description"),m.xp6(8),m.AsE("",null==t.currentProject?null:t.currentProject.resultNumber," record(s), (",null==t.currentProject||null==t.currentProject.results?null:t.currentProject.results.length," including intermediate results)")}}function Hi(t,e){1&t&&(m.ynx(0),m._uU(1,"s"),m.BQk())}function Vi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",52),m.NdJ("click",function(){return m.CHM(t),m.oxw(3).stopResultDialog()}),m.TgZ(1,"mat-icon"),m._uU(2,"stop"),m.qZA(),m.qZA()}}function Xi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",52),m.NdJ("click",function(){return m.CHM(t),m.oxw(3).deleteResultDialog()}),m.TgZ(1,"mat-icon"),m._uU(2,"delete"),m.qZA(),m.qZA()}}function Wi(t,e){if(1&t&&(m.TgZ(0,"div",14),m.TgZ(1,"div",21),m.TgZ(2,"span"),m._uU(3),m.YNc(4,Hi,2,0,"ng-container",7),m.qZA(),m._UZ(5,"i",50),m.YNc(6,Vi,3,0,"button",51),m.YNc(7,Xi,3,0,"button",51),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(3),m.hij("Selected ",t.selectedList.length," result"),m.xp6(1),m.Q6J("ngIf",t.selectedList.length>1),m.xp6(2),m.Q6J("ngIf",t.currentProject.privilege.canRun),m.xp6(1),m.Q6J("ngIf",t.currentProject.privilege.canDeleteResult)}}function Ki(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"th",53),m.TgZ(1,"mat-checkbox",54,55),m.NdJ("change",function(e){return m.CHM(t),m.oxw(2).onAllCheckBoxChange(e)}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("checked",t.selectedList.length===t.pageSize||t.selectedList.length===t.results.length)("indeterminate",t.selectedList.length>0&&t.selectedList.length<t.pageSize&&t.selectedList.length<t.results.length)}}function Gi(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"td",56),m.TgZ(1,"mat-checkbox",57),m.NdJ("change",function(e){const s=m.CHM(t).$implicit;return m.oxw(2).onResultCheckBoxChange(e,s.id)})("click",function(t){return t.stopPropagation()}),m.qZA(),m.qZA()}if(2&t){const t=e.$implicit,s=m.oxw(2);m.uIk("rowspan",s.expandedResults.has(t.id)?2:1),m.xp6(1),m.Q6J("checked",s.selectedList.indexOf(t.id)>=0)}}function tn(t,e){1&t&&(m.TgZ(0,"th",58),m._uU(1,"Prefix"),m.qZA())}function en(t,e){if(1&t&&(m.TgZ(0,"td",59),m.TgZ(1,"u",60),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(2),m.Oqu(t.prefix)}}function sn(t,e){1&t&&(m.TgZ(0,"th",61),m._uU(1,"Result name"),m.qZA())}const nn=function(){return["/page"]},rn=function(t){return{result:t,proxy:!1}};function an(t,e){if(1&t&&(m.TgZ(0,"a",68),m._UZ(1,"i",69),m.qZA()),2&t){const t=m.oxw().$implicit;m.Q6J("routerLink",m.DdM(2,nn))("queryParams",m.VKq(3,rn,t.id))}}const on=function(t){return{result:t,proxy:"true"}};function ln(t,e){if(1&t&&(m.TgZ(0,"a",70),m._UZ(1,"i",71),m.qZA()),2&t){const t=m.oxw().$implicit;m.Q6J("routerLink",m.DdM(2,nn))("queryParams",m.VKq(3,on,t.id))}}const cn=function(t){return["/result",t,"info"]};function un(t,e){if(1&t&&(m.TgZ(0,"td",62),m.YNc(1,an,2,5,"a",63),m.YNc(2,ln,2,5,"a",64),m.TgZ(3,"a",65),m._uU(4),m.qZA(),m.TgZ(5,"a",66),m._UZ(6,"span",67),m.qZA(),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(2);m.xp6(1),m.Q6J("ngIf",s.currentProject.getValidResultPageKeys(null==s.taskID2Task[(null==t||null==t.task?null:t.task.id)||(null==t?null:t.task)]?null:s.taskID2Task[(null==t||null==t.task?null:t.task.id)||(null==t?null:t.task)].key).length>0),m.xp6(1),m.Q6J("ngIf",((null==t||null==t.task?null:t.task.proxy)||(null==s.taskID2Task[null==t?null:t.task]?null:s.taskID2Task[null==t?null:t.task].proxy))&&1==t.status),m.xp6(1),m.Q6J("routerLink",m.VKq(5,cn,t.id)),m.xp6(1),m.Oqu(null==t?null:t.name),m.xp6(1),m.Q6J("routerLink",m.VKq(7,cn,t.id))}}function dn(t,e){1&t&&(m.TgZ(0,"th",72),m._uU(1,"Type"),m.qZA())}function gn(t,e){1&t&&m._UZ(0,"i",79)}function pn(t,e){1&t&&m._UZ(0,"i",80)}function fn(t,e){1&t&&m._UZ(0,"i",81)}function hn(t,e){1&t&&m._UZ(0,"i",82)}function mn(t,e){if(1&t&&(m.TgZ(0,"td",73),m.TgZ(1,"div",74),m.YNc(2,gn,1,0,"i",75),m.YNc(3,pn,1,0,"i",76),m.YNc(4,fn,1,0,"i",77),m.YNc(5,hn,1,0,"i",78),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t?null:t.type),m.xp6(1),m.Q6J("ngSwitchCase","workflow"),m.xp6(1),m.Q6J("ngSwitchCase","standard"),m.xp6(1),m.Q6J("ngSwitchCase","child"),m.xp6(1),m.Q6J("ngSwitchCase","system")}}function Zn(t,e){1&t&&(m.TgZ(0,"th",58),m._uU(1,"Suffix"),m.qZA())}function xn(t,e){if(1&t&&(m.TgZ(0,"td",83),m.TgZ(1,"u",60),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(2),m.Oqu(t.suffix)}}function wn(t,e){1&t&&(m.TgZ(0,"th",58),m._uU(1,"Status"),m.qZA())}function bn(t,e){1&t&&(m.TgZ(0,"p",91),m._UZ(1,"i",92),m.qZA())}function kn(t,e){1&t&&(m.TgZ(0,"p",93),m._UZ(1,"i",94),m.qZA())}function Tn(t,e){1&t&&(m.TgZ(0,"p",95),m._UZ(1,"i",96),m.qZA())}function An(t,e){1&t&&(m.TgZ(0,"p",97),m._UZ(1,"i",98),m.qZA())}function qn(t,e){1&t&&(m.TgZ(0,"p",99),m._UZ(1,"i",100),m.qZA())}function vn(t,e){if(1&t&&(m.TgZ(0,"td",84),m.TgZ(1,"div",85),m.YNc(2,bn,2,0,"p",86),m.YNc(3,kn,2,0,"p",87),m.YNc(4,Tn,2,0,"p",88),m.YNc(5,An,2,0,"p",89),m.YNc(6,qn,2,0,"p",90),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Q6J("ngSwitch",null==t?null:t.status),m.xp6(1),m.Q6J("ngSwitchCase",0),m.xp6(1),m.Q6J("ngSwitchCase",1),m.xp6(1),m.Q6J("ngSwitchCase",2),m.xp6(1),m.Q6J("ngSwitchCase",3),m.xp6(1),m.Q6J("ngSwitchCase",4)}}function yn(t,e){1&t&&(m.TgZ(0,"th",58),m._uU(1,"Creation time"),m.qZA())}function _n(t,e){if(1&t&&(m.TgZ(0,"td",84),m._uU(1),m.qZA()),2&t){const t=e.$implicit;m.xp6(1),m.Oqu(null==t||null==t.createdAt?null:t.createdAt.format("YYYY/MM/DD HH:mm:ss"))}}function Cn(t,e){1&t&&(m.TgZ(0,"th",58),m._uU(1,"Owner"),m.qZA())}function Sn(t,e){if(1&t&&(m.TgZ(0,"td",84),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.xp6(2),m.Oqu(null==t||null==t.owner?null:t.owner.name)}}function Un(t,e){if(1&t&&m._UZ(0,"chi-terminal",115),2&t){const t=m.oxw(4).$implicit;m.Q6J("text",null==t?null:t.stdOut)}}function Rn(t,e){if(1&t&&(m.TgZ(0,"div",112),m.YNc(1,Un,1,1,"chi-terminal",114),m.qZA()),2&t){const t=m.oxw(3).$implicit;m.xp6(1),m.Q6J("ngIf",t)}}function Nn(t,e){if(1&t&&m._UZ(0,"chi-terminal",115),2&t){const t=m.oxw(4).$implicit;m.Q6J("text",null==t?null:t.stdErr)}}function Qn(t,e){if(1&t&&(m.TgZ(0,"div",112),m.YNc(1,Nn,1,1,"chi-terminal",114),m.qZA()),2&t){const t=m.oxw(3).$implicit;m.xp6(1),m.Q6J("ngIf",t)}}function In(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",116),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(3).$implicit;return m.oxw(2).loadResultLogs(e.id)}),m._uU(1,"Task logs"),m.qZA()}}function Jn(t,e){if(1&t){const t=m.EpF();m.ynx(0),m._UZ(1,"display-arguments",104),m.TgZ(2,"mat-tab-group",105),m.NdJ("selectedTabChange",function(e){m.CHM(t);const s=m.oxw(2).$implicit;return m.oxw(2).onResultTabChange(e,s.id)}),m.TgZ(3,"mat-tab",106),m.YNc(4,Rn,2,1,"ng-template",107),m.qZA(),m.TgZ(5,"mat-tab",108),m.YNc(6,Qn,2,1,"ng-template",107),m.qZA(),m.TgZ(7,"mat-tab"),m.YNc(8,In,2,0,"ng-template",109),m.TgZ(9,"button",110),m.NdJ("click",function(){m.CHM(t);const e=m.oxw(2).$implicit;return m.oxw(2).loadResultLogs(e.id)}),m._UZ(10,"i",111),m._uU(11," Refresh logs "),m.qZA(),m.TgZ(12,"div",112),m._UZ(13,"chi-tasklog-viewer",113),m.qZA(),m.qZA(),m.qZA(),m.BQk()}if(2&t){const t=m.oxw(2).$implicit,e=m.oxw(2);m.xp6(1),m.Q6J("theResult",t)("currentUser",e.currentUser),m.xp6(1),m.Q6J("selectedIndex",0),m.xp6(11),m.Q6J("taskLogs",e.resultTaskLogs[t.id])("resultID",t.id)}}function Pn(t,e){if(1&t&&m._UZ(0,"workflow-progress-display",119),2&t){const t=m.oxw(3).$implicit,e=m.oxw(2);m.Q6J("currentProject",e.currentProject)("currentResult",t)("taskID2Task",e.taskID2Task)}}function Dn(t,e){if(1&t&&(m.ynx(0),m._UZ(1,"display-arguments",104),m._UZ(2,"mat-progress-bar",117),m.YNc(3,Pn,1,3,"workflow-progress-display",118),m.BQk()),2&t){const t=m.oxw(2).$implicit,e=m.oxw(2);m.xp6(1),m.Q6J("theResult",t)("currentUser",e.currentUser),m.xp6(1),m.Q6J("color","primary")("mode","buffer")("value",e.workflowProgresses[t.id].value)("bufferValue",e.workflowProgresses[t.id].bufferValue),m.xp6(1),m.Q6J("ngIf",e.currentProject&&t&&e.expandedResults.has(t.id)&&e.taskID2Task)}}function Yn(t,e){if(1&t&&(m.ynx(0),m.YNc(1,Jn,14,5,"ng-container",7),m.YNc(2,Dn,4,7,"ng-container",7),m.BQk()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf","workflow"!==t.type),m.xp6(1),m.Q6J("ngIf","workflow"===t.type)}}function Mn(t,e){if(1&t&&(m.TgZ(0,"td",101),m.TgZ(1,"div",102),m.TgZ(2,"strong"),m._UZ(3,"i",103),m._uU(4,"Description"),m.qZA(),m._uU(5,": "),m.TgZ(6,"p"),m._uU(7),m.qZA(),m.YNc(8,Yn,3,2,"ng-container",7),m.qZA(),m.qZA()),2&t){const t=e.$implicit,s=m.oxw(2);m.uIk("colspan",s.expandedResults.has(t.id)?7:8),m.xp6(1),m.Q6J("@detailExpand",s.expandedResults.has(t.id)?"expanded":"collapsed"),m.xp6(6),m.Oqu(t.desc?t.desc:"No description"),m.xp6(1),m.Q6J("ngIf",s.expandedResults.has(t.id))}}function jn(t,e){1&t&&m._UZ(0,"tr",120)}function Ln(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"tr",121),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw(2).toggleRow(e.id)}),m.qZA()}if(2&t){const t=e.$implicit,s=m.oxw(2);m.ekj("table-primary",s.expandedResults.has(t.id))}}function On(t,e){1&t&&m._UZ(0,"tr",122)}const Bn=function(){return[10,30,50,100,300,500]},$n=function(){return["resultCheckbox","resultType","resultPrefix","resultName","resultSuffix","resultStatus","resultCreationTime","resultOwner"]},Fn=function(){return["resultDetail"]};function zn(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",19),m.YNc(1,Wi,8,4,"div",20),m.TgZ(2,"div",14),m.TgZ(3,"div",21,22),m.TgZ(5,"mat-paginator",23),m.NdJ("page",function(e){return m.CHM(t),m.oxw().onPageChange(e)}),m.qZA(),m.TgZ(6,"div",24),m.TgZ(7,"table",25),m.NdJ("matSortChange",function(e){return m.CHM(t),m.oxw().sortData(e)}),m.ALo(8,"slice"),m.ynx(9,26),m.YNc(10,Ki,3,2,"th",27),m.YNc(11,Gi,2,2,"td",28),m.BQk(),m.ynx(12,29),m.YNc(13,tn,2,0,"th",30),m.YNc(14,en,3,1,"td",31),m.BQk(),m.ynx(15,32),m.YNc(16,sn,2,0,"th",33),m.YNc(17,un,7,9,"td",34),m.BQk(),m.ynx(18,35),m.YNc(19,dn,2,0,"th",36),m.YNc(20,mn,6,5,"td",37),m.BQk(),m.ynx(21,38),m.YNc(22,Zn,2,0,"th",39),m.YNc(23,xn,3,1,"td",40),m.BQk(),m.ynx(24,41),m.YNc(25,wn,2,0,"th",30),m.YNc(26,vn,7,6,"td",42),m.BQk(),m.ynx(27,43),m.YNc(28,yn,2,0,"th",39),m.YNc(29,_n,2,1,"td",42),m.BQk(),m.ynx(30,44),m.YNc(31,Cn,2,0,"th",39),m.YNc(32,Sn,3,1,"td",42),m.BQk(),m.ynx(33,45),m.YNc(34,Mn,9,4,"td",46),m.BQk(),m.YNc(35,jn,1,0,"tr",47),m.YNc(36,Ln,1,2,"tr",48),m.YNc(37,On,1,0,"tr",49),m.qZA(),m.qZA(),m.TgZ(38,"mat-paginator",23),m.NdJ("page",function(e){return m.CHM(t),m.oxw().onPageChange(e)}),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.selectedList.length>0),m.xp6(4),m.Q6J("length",t.results.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",m.DdM(17,Bn)),m.xp6(2),m.Q6J("dataSource",m.Dn7(8,13,t.results,t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)),m.xp6(28),m.Q6J("matHeaderRowDef",m.DdM(18,$n)),m.xp6(1),m.Q6J("matRowDefColumns",m.DdM(19,$n)),m.xp6(1),m.Q6J("matRowDefColumns",m.DdM(20,Fn)),m.xp6(1),m.Q6J("length",t.results.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",m.DdM(21,Bn))}}function En(t,e){1&t&&m._UZ(0,"i",132)}function Hn(t,e){1&t&&m._UZ(0,"i",133)}const Vn=function(t){return["/project",t,"result","creation"]};function Xn(t,e){if(1&t&&(m.ynx(0),m.TgZ(1,"a",129),m._UZ(2,"i",134),m.TgZ(3,"span",131),m._uU(4,"Perform analysis"),m.qZA(),m.TgZ(5,"span",128),m._uU(6,"\u276f"),m.qZA(),m.qZA(),m._UZ(7,"br"),m.BQk()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("routerLink",m.VKq(3,Vn,t.currentProject.id)),m.xp6(2),m.ekj("active",t.showRightButtonContent)}}const Wn=function(t){return["/project",t,"dataFile","list"]};function Kn(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",123),m.TgZ(1,"a",124),m.NdJ("click",function(){m.CHM(t);const e=m.oxw();return e.showRightButtonContent=!e.showRightButtonContent}),m.YNc(2,En,1,0,"i",125),m.YNc(3,Hn,1,0,"i",126),m.TgZ(4,"span",127),m._uU(5,"MENU"),m.qZA(),m.TgZ(6,"span",128),m._uU(7,"\u276f"),m.qZA(),m.qZA(),m._UZ(8,"br"),m.YNc(9,Xn,8,5,"ng-container",7),m.TgZ(10,"a",129),m._UZ(11,"i",130),m.TgZ(12,"span",131),m._uU(13,"Data files"),m.qZA(),m.TgZ(14,"span",128),m._uU(15,"\u276f"),m.qZA(),m.qZA(),m._UZ(16,"br"),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("@rightButtonState",t.showRightButtonContent?"active":"inactive"),m.xp6(2),m.Q6J("ngIf",t.showRightButtonContent),m.xp6(1),m.Q6J("ngIf",!t.showRightButtonContent),m.xp6(1),m.ekj("active",t.showRightButtonContent),m.xp6(5),m.Q6J("ngIf",t.currentProject.privilege.canRun),m.xp6(1),m.Q6J("routerLink",m.VKq(9,Wn,t.currentProject.id)),m.xp6(2),m.ekj("active",t.showRightButtonContent)}}const Gn=function(){return["/home"]},tr=function(){return["/project/list"]},er=Q.Bz.forChild([{path:"list",component:(()=>{class t{constructor(t,e,s,i,n,r,a){this.projectService=t,this.accountService=e,this.router=s,this.route=i,this.dialog=n,this.taskService=r,this.systemService=a,this._viewControls={resultViewMode:"table",isResultDeleting:!1,confirmDelete:"",sortField:"createdAt",sortDirection:"desc",expandContent:{}},this.pageSize=30,this.pageIndex=0,this.selectedList=[],this.showRightButtonContent=!1,this.expandedResults=new Set,this.taskID2Task={},this.workflowProgresses={},this.resultTaskLogs={},this.loadedResultIDs=new Set,this._subs=[]}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this._subs.push(this.projectService.currentProject$.subscribe(t=>{setTimeout(()=>{var e;t&&t.id!==(null===(e=this.currentProject)||void 0===e?void 0:e.id)&&(this.currentProject=t,this.taskService.loadTasks(this.currentProject.packages.map(t=>t.id)))},100)})),this._subs.push(this.accountService.currentUser$.subscribe(t=>this.currentUser=t)),this._subs.push(this.taskService.taskList$.subscribe(t=>{if(t&&t.length>0)for(let e=0;e<t.length;e++){const s=t[e];this.taskID2Task[s.id]=s}})),this.route.paramMap.subscribe(t=>{const e=t.get("pid");e&&this.projectService.setCurrentProject(e)})}loadingResultInfo(t){if(this.loadedResultIDs.has(t))return;const e=this.projectService.loadResultInfo(t).subscribe(s=>{e.unsubscribe(),this.loadedResultIDs.add(t)})}goToNewResultPage(){this.currentProject&&this.router.navigate(["/project",this.currentProject.id,"result","creation"])}gotoResult(t,e){t&&t.id&&this.router.navigate(["/result",t.id,"info"],e?{queryParams:{edit:1}}:{})}onPageChange(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize}get results(){if(this.currentProject&&this.currentProject.results){let t=this.currentProject.results.slice(0);const e=this._viewControls.sortField;"createdAt"===e?(t.sort((t,s)=>P(t[e]).isBefore(s[e])?-1:1),"desc"===this._viewControls.sortDirection&&t.reverse()):t=(0,mt.X)(t,"owner"===e?[t=>t.owner.name]:[t=>t[e]],this._viewControls.sortDirection);const s=t.filter(t=>!t.parent);return s.forEach(t=>{this.workflowProgresses[t.id]=2===t.status?{value:100,bufferValue:0}:this.calculateWorkflowProgress(t)}),s}return[]}calculateWorkflowProgress(t){if("workflow"!==t.type)return{value:0,bufferValue:0};const e=t.task&&Array.isArray(t.task.mapper)?t.task.mapper.length:t.taskSnapshot.mapper.length,s=t.children||[],i=[];for(let n=0;n<e;n++){if(!Array.isArray(t.task.mapper))continue;const r=t.task.mapper[n].length,a=Array.isArray(s[n])?s[n].filter(t=>!!t):[];if(0===a.length)break;i[n]=0,a.length===r&&n<e-1?i[n]=2:0===a.length&&n>=1&&2===i[n-1]?i[n-1]=1:a.length===r&&n===e-1&&2!==t.status&&(i[n]=1)}return{value:100*i.filter(t=>2===t).length/e,bufferValue:100*i.filter(t=>t<=1).length/e}}onAllCheckBoxChange(t){this.selectedList=t.checked?this.results.slice(this.pageIndex*this.pageSize,(this.pageIndex+1)*this.pageSize).map(t=>t.id):[]}onResultTabChange(t,e){2===t.index&&this.loadResultLogs(e)}onResultCheckBoxChange(t,e){if(t.checked&&this.selectedList.indexOf(e)<0)this.selectedList.push(e);else if(!t.checked){const t=this.selectedList.indexOf(e);t>=0&&this.selectedList.splice(t,1)}}sortColumn(t){this._viewControls.sortField===t?this._viewControls.sortDirection="desc"===this._viewControls.sortDirection?"asc":"desc":(this._viewControls.sortField=t,this._viewControls.sortDirection="asc")}loadResultLogs(t){const e=this.projectService.getResultLogs(t).subscribe(s=>{e.unsubscribe();const i=s.success.split("\n").map(t=>t.split("\t")),n=i[0];this.resultTaskLogs[t]=i.slice(1).map((t,e)=>{const s={index:e};return t.forEach((t,e)=>s[n[e]]=t),new D(s)}).filter(t=>""!==t.process||"undefined"!==t.taskName)})}deleteResult(t,e){this._viewControls.isResultDeleting=!0,t.status=4;const s=this.projectService.deleteResult(t).subscribe(()=>{s.unsubscribe(),this._viewControls.isResultDeleting=!1})}batchDeleteResult(t){if(!this.currentProject)return;this.selectedList=[];const e=this.projectService.batchRemoveResult(t,this.currentProject.id).subscribe(()=>e.unsubscribe())}stopResult(t,e){const s=this.projectService.stopResult(t).subscribe(()=>s.unsubscribe())}batchStopResults(t){if(!this.currentProject)return;this.selectedList=[];const e=this.projectService.batchStopResult(t,this.currentProject.id).subscribe(()=>e.unsubscribe())}stopResultDialog(t){const e=this.dialog.open(j.N,{disableClose:!1});void 0!==t?(e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to stop the processes <strong>${t.name}</strong>?</h4>`,desc:`<span class="text-danger">This will stop the processes, name: <b>${t.name}</b><br>This cannot be undone. Make sure this is something you really want to do!</span><br>`}),e.afterClosed().subscribe(e=>{e&&this.stopResult(t,e)})):(e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to stop the selected'${this.selectedList.length}' result(s)?</h4>`,desc:'<span class="text-danger">This action will stop these tasks and cannot be undone.Make sure this is something you really want to do!</span><br>'}),e.afterClosed().subscribe(t=>{t&&this.batchStopResults(this.selectedList)}))}deleteResultDialog(t){const e=this.dialog.open(j.N,{disableClose:!1});void 0!==t?(e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to delete the result <strong>${t.name}</strong>?</h4>`,desc:`<span class="text-danger">This will delete the result, name: <b>${t.name}</b>, and all the associated outputs. <br>This cannot be undone. Make sure this is something you really want to do!</span><br>`}),e.afterClosed().subscribe(e=>{e&&this.deleteResult(t,e)})):(e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to delete the selected'${this.selectedList.length}' result(s)?</h4>`,desc:'<span class="text-danger">This action will delete these results and all their associated outputs. <br>This cannot be undone. Make sure this is something you really want to do!</span><br>'}),e.afterClosed().subscribe(t=>{t&&this.batchDeleteResult(this.selectedList)}))}toggleRow(t){this.expandedResults.has(t)?this.expandedResults.delete(t):(this.expandedResults.add(t),this.loadingResultInfo(t))}sortData(t){let e="createdAt";switch(t.active){case"resultName":e="name";break;case"resultPrefix":e="prefix";break;case"resultSuffix":e="suffix";break;case"resultStatus":e="status";break;case"resultType":e="type";break;case"resultCreationTime":e="createdAt";break;case"resultOwner":e="owner"}t.direction?(this._viewControls.sortDirection=t.direction,this._viewControls.sortField=e):(this._viewControls.sortDirection="desc",this._viewControls.sortField="createdAt")}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(O.Y),m.Y36(E.B),m.Y36(Q.F0),m.Y36(Q.gz),m.Y36(F.uw),m.Y36($.M),m.Y36(z.o))},t.\u0275cmp=m.Xpm({type:t,selectors:[["project-result-list"]],decls:20,vars:11,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"fas","fa-circle-notch","fa-fw","fa-spin","fa-lg"],[1,"row"],[1,"col-md-2"],[1,"col-md-9"],[2,"text-indent","36px","word-break","break-all","width","100%"],[2,"text-indent","36px"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"col-12"],["tableWidth",""],[2,"background-color","rgba(255,255, 255, 0.7)","border","thin solid darkgray",3,"length","pageSize","pageIndex","pageSizeOptions","page"],[1,"table-responsive",2,"width","100%"],["mat-table","","multiTemplateDataRows","","matSort","",1,"table","table-hover","table-striped","table-bordered",3,"dataSource","matSortChange"],["matColumnDef","resultCheckbox"],["mat-header-cell","","class","align-middle text-center","style","padding: 2px;",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-center","style","padding: 2px;",4,"matCellDef"],["matColumnDef","resultPrefix"],["mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultName"],["mat-header-cell","","mat-sort-header","","class","align-middle  text-left",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-left px-2",4,"matCellDef"],["matColumnDef","resultType"],["style","width: 30px;","mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["style","width: 30px;","mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultSuffix"],["mat-header-cell","","mat-sort-header","","class","align-middle  text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-left",4,"matCellDef"],["matColumnDef","resultStatus"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","resultCreationTime"],["matColumnDef","resultOwner"],["matColumnDef","resultDetail"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1);","class","px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","result-detail-row",4,"matRowDef","matRowDefColumns"],[1,"fa","fa-angle-double-right","ml-4","fa-lg"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click"],["mat-header-cell","",1,"align-middle","text-center",2,"padding","2px"],[3,"checked","indeterminate","change"],["allCheckBox",""],["mat-cell","",1,"align-middle","text-center",2,"padding","2px"],["color","primary",3,"checked","change","click"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-right"],[1,"text-muted"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-left"],["mat-cell","",1,"align-middle","text-left","px-2"],["mat-icon-button","","color","primary","matTooltip","Result Page",3,"routerLink","queryParams",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Proxy Page",3,"routerLink","queryParams",4,"ngIf"],[1,"ml-3",3,"routerLink"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],["mat-icon-button","","color","primary","matTooltip","Result Page",3,"routerLink","queryParams"],[1,"fas","fa-scroll","fa-fw","fa-lg"],["mat-icon-button","","color","primary","matTooltip","Proxy Page",3,"routerLink","queryParams"],[1,"fas","fa-network-wired","fa-fw","fa-lg"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center",2,"width","30px"],["mat-cell","",1,"align-middle","text-right",2,"width","30px"],[1,"col-md-9",3,"ngSwitch"],["class","fas fa-cogs fa-fw",4,"ngSwitchCase"],["class","fas fa-cog fa-fw",4,"ngSwitchCase"],["class","fas fa-puzzle-piece fa-fw",4,"ngSwitchCase"],["class","fas fa-server fa-fw",4,"ngSwitchCase"],[1,"fas","fa-cogs","fa-fw"],[1,"fas","fa-cog","fa-fw"],[1,"fas","fa-puzzle-piece","fa-fw"],[1,"fas","fa-server","fa-fw"],["mat-cell","",1,"align-middle","text-left"],["mat-cell","",1,"align-middle","text-center"],[3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],["mat-cell","",1,"px-3",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"result-details","my-3"],[1,"fas","fa-angle-right","mr-2"],[3,"theResult","currentUser"],[2,"width","100%",3,"selectedIndex","selectedTabChange"],["label","Standard output"],["matTabContent",""],["label","Standard error"],["mat-tab-label",""],["mat-button","",3,"click"],[1,"fas","fa-sync","fa-fx",2,"color","green"],[2,"width","100%","overflow","auto"],[3,"taskLogs","resultID"],[3,"text",4,"ngIf"],[3,"text"],[3,"click"],[3,"color","mode","value","bufferValue"],["style","width: 100%;",3,"currentProject","currentResult","taskID2Task",4,"ngIf"],[2,"width","100%",3,"currentProject","currentResult","taskID2Task"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"result-detail-row"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"chi-rbtn",3,"routerLink"],[1,"far","fa-file","fa-fw"],[1,"chi-rbtn-content"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],[1,"fa","fa-play","fa-fw"]],template:function(t,e){1&t&&(m.TgZ(0,"ol",0),m.TgZ(1,"li",1),m.TgZ(2,"a",2),m._uU(3,"Home"),m.qZA(),m.qZA(),m.TgZ(4,"li",1),m.TgZ(5,"a",2),m._uU(6,"Project List"),m.qZA(),m.qZA(),m.TgZ(7,"li",1),m.YNc(8,Oi,3,4,"a",3),m.qZA(),m.YNc(9,$i,5,6,"li",4),m.YNc(10,Fi,2,0,"li",4),m.qZA(),m.TgZ(11,"div",5),m.TgZ(12,"h3",6),m._uU(13,"Results in the Project: "),m.qZA(),m._UZ(14,"br"),m._UZ(15,"br"),m.YNc(16,zi,3,0,"div",7),m.YNc(17,Ei,24,4,"ng-container",7),m.qZA(),m.YNc(18,zn,39,22,"div",8),m.YNc(19,Kn,17,11,"div",9)),2&t&&(m.xp6(2),m.Q6J("routerLink",m.DdM(9,Gn)),m.xp6(3),m.Q6J("routerLink",m.DdM(10,tr)),m.xp6(3),m.Q6J("ngIf",e.currentProject),m.xp6(1),m.Q6J("ngIf",e.currentProject),m.xp6(1),m.Q6J("ngIf",!e.currentProject),m.xp6(6),m.Q6J("ngIf",!e.currentProject),m.xp6(1),m.Q6J("ngIf",e.currentProject),m.xp6(1),m.Q6J("ngIf",e.currentProject),m.xp6(1),m.Q6J("ngIf",e.currentProject))},directives:[Q.yS,i.O5,h.NW,d.BZ,g.YE,d.w1,d.fO,d.Dz,d.as,d.nj,r.lW,u.Hw,d.ge,R.oG,d.ev,g.nU,r.zs,p.gM,i.RF,i.n9,pt,c.SP,c.uX,c.Vc,c.uD,ee,se.O,C,pe,d.XQ,d.Gk],pipes:[i.OU],styles:[".result-details[_ngcontent-%COMP%]{overflow:hidden;display:none}tr.result-detail-row[_ngcontent-%COMP%]{height:0;width:100%}[_nghost-%COMP%]     .mat-sort-header-container{display:flex;justify-content:center}"],data:{animation:[I.M,(0,ht.X$)("detailExpand",[(0,ht.SB)("collapsed",(0,ht.oB)({height:"0px",padding:"0px",minHeight:"0",display:"none"})),(0,ht.SB)("expanded",(0,ht.oB)({height:"*",padding:"5px",display:"block"})),(0,ht.eR)("expanded <=> collapsed",(0,ht.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})(),canActivate:[Ls.P]},{path:":resultId/info",component:js,canActivate:[Ls.P]},{path:"activities",component:Mi,canActivate:[Ls.P]}]),sr=[];var ir=s(83733);let nr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[],imports:[[i.ez,Q.Bz,o.To,p.AV]]}),t})();var rr=s(3673);let ar=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[],imports:[[i.ez,n.u5,Q.Bz,d.p0,g.JX,h.TU,F.Is,r.ot,a.vV,U]]}),t})();var or=s(90658);let lr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[],imports:[[i.ez,n.u5,p.AV]]}),t})(),cr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({providers:[sr],imports:[[i.ez,n.u5,l.c,c.Nh,r.ot,a.vV,o.To,u.Ps,d.p0,g.JX,p.AV,R.p9,f.t,ar,rr.E,N.T,h.TU,U,lr,ir.w,nr,or.c,er]]}),t})()},22740:function(t,e,s){"use strict";s.d(e,{T:function(){return u}});var i=s(50144),n=s(61116),r=s(31041),a=s(84369),o=s(22797),l=s(95522),c=s(35366);let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({providers:[],imports:[[n.ez,r.u5,i.Bz,a.ot,o.QW,l.Hi]]}),t})()}}]);