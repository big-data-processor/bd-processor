!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var s=a(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return r(this,n)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"gs+/":function(t,r,a){"use strict";a.r(r),a.d(r,"ResultModule",function(){return fa});var c,o=a("ofXK"),l=a("3Pt+"),u=a("bTqV"),b=a("jaxi"),d=a("7EHt"),f=a("qFsG"),g=a("wZkO"),p=a("NFeN"),h=a("+0xr"),m=a("Dh3D"),v=a("Qu3c"),k=a("M9IT"),w=a("fXoL"),C=a("FKr1"),T=a("8LU1"),y=a("R1ws"),U=a("quSY"),x=a("xgIS"),S=a("pLZG"),P=["primaryValueBar"],R=Object(C.t)(function t(e){s(this,t),this._elementRef=e},"primary"),L=new w.s("mat-progress-bar-location",{providedIn:"root",factory:function(){var t=Object(w.W)(o.d),e=t?t.location:null;return{getPathname:function(){return e?e.pathname+e.search:""}}}}),I=0,D=((c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(a,t);var r=i(a);function a(t,e,n,i){var c;s(this,a),(c=r.call(this,t))._elementRef=t,c._ngZone=e,c._animationMode=n,c._isNoopAnimation=!1,c._value=0,c._bufferValue=0,c.animationEnd=new w.o,c._animationEndSubscription=U.a.EMPTY,c.mode="determinate",c.progressbarId="mat-progress-bar-"+I++;var o=i?i.getPathname().split("#")[0]:"";return c._rectangleFillValue="url('".concat(o,"#").concat(c.progressbarId,"')"),c._isNoopAnimation="NoopAnimations"===n,c}return e(a,[{key:"value",get:function(){return this._value},set:function(t){this._value=j(Object(T.f)(t)||0)}},{key:"bufferValue",get:function(){return this._bufferValue},set:function(t){this._bufferValue=j(t||0)}},{key:"_primaryTransform",value:function(){return{transform:"scale3d(".concat(this.value/100,", 1, 1)")}}},{key:"_bufferTransform",value:function(){return"buffer"===this.mode?{transform:"scale3d(".concat(this.bufferValue/100,", 1, 1)")}:null}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.runOutsideAngular(function(){var e=t._primaryValueBar.nativeElement;t._animationEndSubscription=Object(x.a)(e,"transitionend").pipe(Object(S.a)(function(t){return t.target===e})).subscribe(function(){"determinate"!==t.mode&&"buffer"!==t.mode||t._ngZone.run(function(){return t.animationEnd.next({value:t.value})})})})}},{key:"ngOnDestroy",value:function(){this._animationEndSubscription.unsubscribe()}}]),a}(R)).\u0275fac=function(t){return new(t||c)(w.Ob(w.l),w.Ob(w.B),w.Ob(y.a,8),w.Ob(L,8))},c.\u0275cmp=w.Ib({type:c,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){var n;1&t&&w.Qc(P,1),2&t&&w.xc(n=w.dc())&&(e._primaryValueBar=n.first)},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(w.Db("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),w.Gb("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[w.zb],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(w.Ub(0,"div",0),w.fc(),w.Ub(1,"svg",1),w.Ub(2,"defs"),w.Ub(3,"pattern",2),w.Pb(4,"circle",3),w.Tb(),w.Tb(),w.Pb(5,"rect",4),w.Tb(),w.ec(),w.Pb(6,"div",5),w.Pb(7,"div",6,7),w.Pb(9,"div",8),w.Tb()),2&t&&(w.Cb(3),w.nc("id",e.progressbarId),w.Cb(2),w.Db("fill",e._rectangleFillValue),w.Cb(1),w.nc("ngStyle",e._bufferTransform()),w.Cb(1),w.nc("ngStyle",e._primaryTransform()))},directives:[o.o],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),c);function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Math.max(e,Math.min(n,t))}var J,O=((J=function t(){s(this,t)}).\u0275fac=function(t){return new(t||J)},J.\u0275mod=w.Mb({type:J}),J.\u0275inj=w.Lb({imports:[[o.c,C.g],C.g]}),J),M=a("bSwM"),_=a("nNey"),A=a("tyNb"),$=a("RMCY"),F=a("wd/R"),B=function(){function t(e){s(this,t),this.index=e.index,this.process=String(e.process),this.taskName=String(e["task name"]),this.pid=String(e.pid),this.image=String(e.image),this.command=e.command?String(e.command):null,this.startTime="null"!==e["start time"]?F(new Date(e["start time"])):null,this.endTime="null"!==e["end time"]?F(new Date(e["end time"])):null,this.cpus=parseFloat(e.cpus),this.memory=String(e.memory),this.nodes=parseFloat(e.nodes),this.exitCode=void 0!==e["exit code"]?String(e["exit code"]):null}return e(t,[{key:"duration",get:function(){return null!=this.startTime&&null!=this.endTime?this.endTime.diff(this.startTime,"hours"):null}},{key:"isFull",get:function(){return this.command&&this.exitCode}}]),t}(),z=a("l5mm"),V=a("xsm5"),N=a("eIep"),q=a("c3AT"),E=a("2uAV"),H=a("i6c7"),G=a("0IaG"),W=a("YiK1"),X=a("flj8");function Y(t,e){1&t&&(w.Sb(0),w.Lc(1,"[Optional]"),w.Rb())}function Q(t,e){1&t&&(w.Sb(0),w.Lc(1,"[Hidden]"),w.Rb())}function K(t,e){1&t&&(w.Ub(0,"span",15),w.Lc(1,"Static value"),w.Tb())}function Z(t,e){1&t&&(w.Ub(0,"span",16),w.Lc(1,"Input value"),w.Tb())}function tt(t,e){1&t&&(w.Ub(0,"span",17),w.Lc(1,"List"),w.Tb())}function et(t,e){1&t&&(w.Ub(0,"span",18),w.Lc(1,"Input file"),w.Tb())}function nt(t,e){1&t&&(w.Ub(0,"span",19),w.Lc(1,"Output file"),w.Tb())}var it=function(t){return["/dataFile",t,"info"]},rt=function(t,e){return{"fa-folder":t,"fa-file-text-o":e}};function at(t,e){if(1&t&&(w.Ub(0,"div"),w.Ub(1,"a",21),w.Pb(2,"i",22),w.Ub(3,"span"),w.Ub(4,"u",23),w.Lc(5),w.Tb(),w.Ub(6,"b"),w.Lc(7),w.Tb(),w.Ub(8,"u",23),w.Lc(9),w.Tb(),w.Tb(),w.Tb(),w.Ub(10,"a",24),w.Pb(11,"span",25),w.Tb(),w.Tb()),2&t){var n=w.gc(2).$implicit;w.Cb(1),w.nc("routerLink",w.rc(8,it,n.value.id)),w.Cb(1),w.nc("ngClass",w.sc(10,rt,"Folder"===n.value.format,"Folder"!==n.value.format)),w.Cb(1),w.Gb("text-success","Folder"===n.value.format),w.Cb(2),w.Mc(n.value.prefix),w.Cb(2),w.Mc(n.value.name),w.Cb(2),w.Mc(n.value.suffix),w.Cb(1),w.nc("routerLink",w.rc(13,it,n.value.id))}}function st(t,e){if(1&t&&(w.Ub(0,"small",23),w.Lc(1),w.Tb()),2&t){var n=w.gc(3).$implicit;w.Cb(1),w.Mc(n.value)}}function ct(t,e){if(1&t&&(w.Ub(0,"div",20),w.Lc(1," File not found. (could have been deleted.)"),w.Pb(2,"br"),w.Jc(3,st,2,1,"small",26),w.Tb()),2&t){var n=w.gc(5);w.Cb(3),w.nc("ngIf",n.currentUser&&n.currentUser.auths.bdp>=3)}}function ot(t,e){if(1&t&&(w.Ub(0,"div",20),w.Jc(1,at,12,15,"div",7),w.Jc(2,ct,4,1,"div",14),w.Tb()),2&t){var n=w.gc().$implicit;w.Cb(1),w.nc("ngIf",n.value.status>=0&&n.value.id),w.Cb(1),w.nc("ngIf",!n.value.id)}}function lt(t,e){if(1&t&&(w.Ub(0,"div"),w.Ub(1,"strong"),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=w.gc().$implicit;w.Cb(2),w.Mc(n.value)}}function ut(t,e){if(1&t&&(w.Ub(0,"div"),w.Ub(1,"strong"),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=w.gc().$implicit;w.Cb(2),w.Mc(n.value.join(n.arg.listSplitter))}}var bt=function(){return["static","value"]};function dt(t,e){if(1&t&&(w.Ub(0,"tr",6),w.Ub(1,"td"),w.Jc(2,Y,2,0,"ng-container",7),w.Jc(3,Q,2,0,"ng-container",7),w.Ub(4,"b"),w.Lc(5),w.Tb(),w.Tb(),w.Ub(6,"td"),w.Sb(7,8),w.Jc(8,K,2,0,"span",9),w.Jc(9,Z,2,0,"span",10),w.Jc(10,tt,2,0,"span",11),w.Jc(11,et,2,0,"span",12),w.Jc(12,nt,2,0,"span",13),w.Rb(),w.Tb(),w.Ub(13,"td"),w.Jc(14,ot,3,2,"div",14),w.Jc(15,lt,3,1,"div",7),w.Jc(16,ut,3,1,"div",7),w.Tb(),w.Tb()),2&t){var n=e.$implicit,i=w.gc(3);w.nc("ngClass",i.getRowStyleByArgType(null==n.arg?null:n.arg.type)),w.Cb(2),w.nc("ngIf",n.arg.optional),w.Cb(1),w.nc("ngIf",n.arg.hidden),w.Cb(2),w.Mc(n.arg.name),w.Cb(2),w.nc("ngSwitch",null==n.arg?null:n.arg.type),w.Cb(1),w.nc("ngSwitchCase","static"),w.Cb(1),w.nc("ngSwitchCase","value"),w.Cb(1),w.nc("ngSwitchCase","list"),w.Cb(1),w.nc("ngSwitchCase","inFile"),w.Cb(1),w.nc("ngSwitchCase","outFile"),w.Cb(2),w.nc("ngIf","inFile"===(null==n.arg?null:n.arg.type)||"outFile"===(null==n.arg?null:n.arg.type)),w.Cb(1),w.nc("ngIf",w.qc(13,bt).indexOf(null==n.arg?null:n.arg.type)>=0),w.Cb(1),w.nc("ngIf","list"===(null==n.arg?null:n.arg.type))}}function ft(t,e){if(1&t&&(w.Ub(0,"table",3),w.Ub(1,"thead",4),w.Ub(2,"tr"),w.Ub(3,"th"),w.Lc(4,"Name"),w.Tb(),w.Ub(5,"th"),w.Lc(6,"Type"),w.Tb(),w.Ub(7,"th"),w.Lc(8,"Value"),w.Tb(),w.Tb(),w.Tb(),w.Ub(9,"tbody"),w.Jc(10,dt,17,14,"tr",5),w.Tb(),w.Tb()),2&t){var n=w.gc(2);w.Cb(10),w.nc("ngForOf",n.displayArguments())}}function gt(t,e){if(1&t&&(w.Ub(0,"mat-expansion-panel",1),w.Ub(1,"mat-expansion-panel-header"),w.Ub(2,"mat-panel-title"),w.Lc(3," Arguments "),w.Tb(),w.Ub(4,"mat-panel-description"),w.Lc(5," Arguments used to generate this result "),w.Tb(),w.Tb(),w.Jc(6,ft,11,1,"ng-template",2),w.Tb()),2&t){var n=w.gc();w.nc("expanded",n.expanded)}}var pt,ht=((pt=function(){function t(){s(this,t)}return e(t,[{key:"ngOnInit",value:function(){}},{key:"getRowStyleByArgType",value:function(t){return{"table-secondary":"value"===t,"table-white":"static"===t,"table-primary":"inFile"===t,"table-info":"list"===t,"table-success":"outFile"===t,"table-danger":!1}}},{key:"displayArguments",value:function(){var t=this,e=[];if(!this.theResult)return[];if(this.theResult.arguments)for(var n=function(n){var i={type:null},r=(i=t.theResult.taskSnapshot.arguments[n]).type||Object.keys(t.theResult.arguments[n])[0],a="";if(t.theResult.arguments[n]&&t.theResult.arguments[n][r]&&(a=t.theResult.arguments[n][r]),i.type||(i.type=r),"inFile"===r){var s=t.theResult.inFiles.filter(function(t){var e=t.id,n=a.split(/[\\/]/).pop();return a.indexOf(e)>=0||n===e})[0];s&&(a=s)}else if("outFile"===r){var c=t.theResult.outFiles.filter(function(t){var e=t.id,n=a.split(/[\\/]/).pop();return a.indexOf(e)>=0||n===e})[0];(c||t.parent&&(c=t.parent.outFiles.filter(function(t){var e=t.id,n=a.split(/[\\/]/).pop();return a.indexOf(e)>=0||n===e})[0]))&&(a=c)}e.push({arg:i,value:a})},i=0;i<this.theResult.arguments.length;i++)n(i);return e}}]),t}()).\u0275fac=function(t){return new(t||pt)},pt.\u0275cmp=w.Ib({type:pt,selectors:[["display-arguments"]],inputs:{theResult:"theResult",parent:"parent",currentUser:"currentUser",expanded:"expanded"},decls:1,vars:1,consts:[["style","background-color: rgba(255,255,255, 0.4)",3,"expanded",4,"ngIf"],[2,"background-color","rgba(255,255,255, 0.4)",3,"expanded"],["matExpansionPanelContent",""],[1,"table","table-hover","table-bordered","table-sm"],[1,"thead-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf"],[3,"ngSwitch"],["class","badge badge-dark",4,"ngSwitchCase"],["class","badge badge-secondary",4,"ngSwitchCase"],["class","badge badge-info",4,"ngSwitchCase"],["class","badge badge-primary",4,"ngSwitchCase"],["class","badge badge-success",4,"ngSwitchCase"],["style","word-break:break-all;",4,"ngIf"],[1,"badge","badge-dark"],[1,"badge","badge-secondary"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[2,"word-break","break-all"],[3,"routerLink"],[1,"mr-2","fa",2,"font-size","14px",3,"ngClass"],[1,"text-muted"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],["class","text-muted",4,"ngIf"]],template:function(t,e){1&t&&w.Jc(0,gt,7,1,"mat-expansion-panel",0),2&t&&w.nc("ngIf",e.theResult)},directives:[o.n,d.c,d.f,d.g,d.e,d.d,o.m,o.l,o.p,o.q,A.f],encapsulation:2,changeDetection:0}),pt),mt=a("kmnG"),vt=a("R0Ic"),kt=a("+mqT");function wt(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"#"),w.Tb())}function Ct(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit,i=w.gc(3);w.Db("rowspan",i.expandedTaskLogs.has(n.process)?2:1),w.Cb(1),w.Mc(n.index+1)}}function Tt(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Sub-TaskID"),w.Tb())}function yt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.process)}}function Ut(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Job ID"),w.Tb())}function xt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.pid)}}function St(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Task Name"),w.Tb())}function Pt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.taskName)}}function Rt(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Start time"),w.Tb())}function Lt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc((null==n.startTime?null:n.startTime.format("YYYY/MM/DD HH:mm:ss"))||"N/A")}}function It(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"End time"),w.Tb())}function Dt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc((null==n.endTime?null:n.endTime.format("YYYY/MM/DD HH:mm:ss"))||"N/A")}}function jt(t,e){1&t&&(w.Ub(0,"th",32),w.Lc(1,"Standard o/e"),w.Tb())}var Jt=function(t){return["/result","api",t,"taskLog"]},Ot=function(t){return{jobID:t,stdoe:"stdout"}},Mt=function(t){return{jobID:t,stdoe:"stderr"}};function _t(t,e){if(1&t&&(w.Sb(0),w.Ub(1,"a",33),w.Lc(2,"stdout"),w.Tb(),w.Lc(3," | "),w.Ub(4,"a",33),w.Lc(5,"stderr"),w.Tb(),w.Rb()),2&t){var n=w.gc().$implicit,i=w.gc(3);w.Cb(1),w.nc("routerLink",w.rc(4,Jt,i.resultID))("queryParams",w.rc(6,Ot,n.process)),w.Cb(3),w.nc("routerLink",w.rc(8,Jt,i.resultID))("queryParams",w.rc(10,Mt,n.process))}}function At(t,e){if(1&t&&(w.Ub(0,"td",31),w.Jc(1,_t,6,12,"ng-container",3),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("ngIf",n.startTime)}}function $t(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Cores"),w.Tb())}function Ft(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.cpus)}}function Bt(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Memory"),w.Tb())}function zt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.memory)}}function Vt(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Nodes"),w.Tb())}function Nt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.nodes)}}function qt(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Exit code"),w.Tb())}function Et(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n.exitCode)}}function Ht(t,e){1&t&&(w.Ub(0,"th",30),w.Lc(1,"Duration"),w.Tb())}function Gt(t,e){if(1&t&&(w.Ub(0,"td",31),w.Lc(1),w.Tb()),2&t){var n=e.$implicit,i=w.gc(3);w.Cb(1),w.Mc(i.timeDurations[n.index])}}function Wt(t,e){if(1&t&&(w.Ub(0,"td",34),w.Ub(1,"div",35),w.Ub(2,"strong"),w.Lc(3,"Command"),w.Tb(),w.Lc(4,": "),w.Ub(5,"small",1),w.Lc(6),w.Tb(),w.Tb(),w.Tb()),2&t){var n=e.$implicit,i=w.gc(3);w.Db("colspan",i.expandedTaskLogs.has(n.process)?11:12),w.Cb(1),w.nc("@detailExpand",i.expandedTaskLogs.has(n.process)?"expanded":"collapsed"),w.Cb(5),w.Mc(n.command)}}function Xt(t,e){1&t&&w.Pb(0,"tr",36)}function Yt(t,e){if(1&t){var n=w.Vb();w.Ub(0,"tr",37),w.cc("click",function(){w.Bc(n);var t=e.$implicit;return w.gc(3).toggleRows(t.process)}),w.Tb()}if(2&t){var i=e.$implicit,r=w.gc(3);w.Gb("table-primary",r.expandedTaskLogs.has(i.process))}}function Qt(t,e){if(1&t&&w.Pb(0,"tr",38),2&t){var n=e.$implicit,i=w.gc(3);w.Gb("table-primary",i.expandedTaskLogs.has(n.process))}}var Kt=function(){return["taskIndex","process","pid","taskName","stdoe","start","end","cpus","memory","nodes","exitCode","duration"]},Zt=function(){return["command"]};function te(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",8),w.Ub(1,"table",9),w.cc("matSortChange",function(t){return w.Bc(n),w.gc(2).sortLogs(t)}),w.hc(2,"slice"),w.Sb(3,10),w.Jc(4,wt,2,0,"th",11),w.Jc(5,Ct,2,2,"td",12),w.Rb(),w.Sb(6,13),w.Jc(7,Tt,2,0,"th",11),w.Jc(8,yt,2,1,"td",12),w.Rb(),w.Sb(9,14),w.Jc(10,Ut,2,0,"th",11),w.Jc(11,xt,2,1,"td",12),w.Rb(),w.Sb(12,15),w.Jc(13,St,2,0,"th",11),w.Jc(14,Pt,2,1,"td",12),w.Rb(),w.Sb(15,16),w.Jc(16,Rt,2,0,"th",11),w.Jc(17,Lt,2,1,"td",12),w.Rb(),w.Sb(18,17),w.Jc(19,It,2,0,"th",11),w.Jc(20,Dt,2,1,"td",12),w.Rb(),w.Sb(21,18),w.Jc(22,jt,2,0,"th",19),w.Jc(23,At,2,1,"td",12),w.Rb(),w.Sb(24,20),w.Jc(25,$t,2,0,"th",11),w.Jc(26,Ft,2,1,"td",12),w.Rb(),w.Sb(27,21),w.Jc(28,Bt,2,0,"th",11),w.Jc(29,zt,2,1,"td",12),w.Rb(),w.Sb(30,22),w.Jc(31,Vt,2,0,"th",11),w.Jc(32,Nt,2,1,"td",12),w.Rb(),w.Sb(33,23),w.Jc(34,qt,2,0,"th",11),w.Jc(35,Et,2,1,"td",12),w.Rb(),w.Sb(36,24),w.Jc(37,Ht,2,0,"th",11),w.Jc(38,Gt,2,1,"td",12),w.Rb(),w.Sb(39,25),w.Jc(40,Wt,7,3,"td",26),w.Rb(),w.Jc(41,Xt,1,0,"tr",27),w.Jc(42,Yt,1,2,"tr",28),w.Jc(43,Qt,1,2,"tr",29),w.Tb(),w.Tb()}if(2&t){var i=w.gc(2);w.Cb(1),w.nc("dataSource",w.kc(2,4,i._taskLogs,i.pageIndex*i.pageSize,(i.pageIndex+1)*i.pageSize)),w.Cb(40),w.nc("matHeaderRowDef",w.qc(8,Kt)),w.Cb(1),w.nc("matRowDefColumns",w.qc(9,Kt)),w.Cb(1),w.nc("matRowDefColumns",w.qc(10,Zt))}}var ee=function(){return[5,10,25,50,100,500]};function ne(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div"),w.Ub(1,"mat-button-toggle-group",4),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc().filterType=t})("ngModelChange",function(){return w.Bc(n),w.gc().updateFilter()}),w.Ub(2,"mat-button-toggle",5),w.Lc(3,"All"),w.Tb(),w.Ub(4,"mat-button-toggle",5),w.Lc(5,"Running"),w.Tb(),w.Ub(6,"mat-button-toggle",5),w.Lc(7,"Failed"),w.Tb(),w.Ub(8,"mat-button-toggle",5),w.Lc(9,"Finished"),w.Tb(),w.Tb(),w.Ub(10,"mat-paginator",6),w.cc("page",function(t){return w.Bc(n),w.gc().onPageChange(t)}),w.Tb(),w.Jc(11,te,44,11,"div",7),w.Ub(12,"mat-paginator",6),w.cc("page",function(t){return w.Bc(n),w.gc().onPageChange(t)}),w.Tb(),w.Tb()}if(2&t){var i=w.gc();w.Cb(1),w.nc("ngModel",i.filterType),w.Cb(1),w.nc("value","all"),w.Cb(2),w.nc("value","running"),w.Cb(2),w.nc("value","failed"),w.Cb(2),w.nc("value","finished"),w.Cb(2),w.nc("length",null==i.taskLogs?null:i.taskLogs.length)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",w.qc(14,ee)),w.Cb(1),w.nc("ngIf","table"===i.mode),w.Cb(1),w.nc("length",null==i.taskLogs?null:i.taskLogs.length)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",w.qc(15,ee))}}var ie,re=((ie=function(){function t(e){s(this,t),this.dialog=e,this.mode="table",this.taskLogs=[],this.displayColumns=[],this.displayRows=[],this.filterType="all",this.fullTaskLogs=["process","pid","taskName","stdoe","start","end","cpus","memory","nodes","exitCode"],this.prepareTaskLogs=["process","taskName","exec","args","cpus","memory","nodes"],this.expandedTaskLogs=new Set,this.progressFinished=0,this.progressRunning=0,this.progressMode="indeterminate",this.taskFinishedNumber=0,this.taskRunningNumber=0,this.taskNotStartedNumber=0,this.chartOptions={xAxis:{minorTickWidth:1},navigator:{enabled:!0,series:{type:"gantt",pointPadding:.25},yAxis:{min:0,max:10,reversed:!0,categories:[]}},scrollbar:{enabled:!0,liveRedraw:!0},yAxis:{type:"category",grid:{enabled:!0,borderColor:"rgba(0, 0, 0, 0.3)",borderWidth:.1,columns:[{title:{text:"Task ID"},labels:{format:"{point.process}"}},{title:{text:"PID"},labels:{format:"{point.pid}"}}]}},series:[],chart:{zoomType:"x",height:"auto"},tooltip:{formatter:function(){var t=F.duration(F(this.point.end).diff(this.point.start));return"<b>".concat(this.point.id,"</b><br/><b>Start</b>: ").concat(F(this.point.start).format("LLLL"),"</b><br>\n            <b>End</b>: ").concat(F(this.point.end).format("LLLL")," </b><br>\n            <b>Duration</b>: ").concat(t.humanize()," (").concat(t.format("hh:mm:ss",{trim:!1}),")")}},time:{timezoneOffset:(new Date).getTimezoneOffset()}},this.pageSize=10,this.pageIndex=0}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.pageSize=10,this.pageIndex=0,this.timeDurations=[],this.timer$=Object(z.a)(3e3),this.timerSubscriber=this.timer$.subscribe(function(){t.taskLogs&&(t.taskLogs.forEach(function(e,n){t.timeDurations[n]&&("null"!==e.exitCode||!e.startTime||"null"===e.startTime.toString()||e.endTime&&"null"!==e.endTime.toString())||(t.timeDurations[n]=t.taskDuration(e))}),t.taskLogTable&&t.taskLogTable.renderRows&&t.taskLogTable.renderRows())}),momentDurationFormatSetup(F)}},{key:"ngOnChanges",value:function(t){var e=this;t.mode&&(this.mode=t.mode.currentValue);var n=!1;if(t.taskLogs){var i=t.taskLogs.currentValue;n=t.taskLogs.isFirstChange(),i?i[0]&&i[0].isFull?(this.displayColumns=this.fullTaskLogs,this.progressMode="buffer",this.taskFinishedNumber=i.filter(function(t){return null!=t.exitCode&&t.startTime&&"null"!==t.startTime.toString()&&(!t.endTime||"null"!==t.endTime.toString())}).length,this.taskRunningNumber=i.filter(function(t){return null==t.exitCode&&t.startTime&&"null"!==t.startTime.toString()&&(!t.endTime||"null"===t.endTime.toString())}).length,this.progressFinished=this.taskFinishedNumber/i.length*100,this.progressRunning=this.progressFinished+this.taskRunningNumber/i.length*100,this.timeDurations=this.taskLogs.map(function(t){return e.taskDuration(t)})):(this.displayColumns=this.prepareTaskLogs,this.progressMode="indeterminate"):(this.displayColumns=[],this.progressMode="indeterminate")}"graph"===this.mode&&this.taskLogs?this.prepareGraphData(n):"table"===this.mode&&this.taskLogs&&this.taskLogTable&&this.taskLogTable.renderRows&&this.taskLogTable.renderRows()}},{key:"taskDuration",value:function(t){var e=t.startTime,n=t.endTime;if(!e)return"N/A";e=F(e),n=n?F(n):F();var i=F(n).diff(e);return F.duration(i).format("hh:mm:ss",{trim:!1})}},{key:"prepareGraphData",value:function(t){var e=this;if(this.taskLogs){var n=[],i=[];this.taskLogs.slice(this.pageIndex*this.pageSize,(this.pageIndex+1)*this.pageSize).forEach(function(t,r){var a="pending";null!==t.startTime&&(n.push({y:r,id:t.process,process:t.process,pid:t.pid,name:t.taskName,start:t.startTime?t.startTime.valueOf():null,end:t.endTime?t.endTime.valueOf():(new Date).valueOf()+1e4,cpus:t.cpus,memory:t.memory,nodes:t.nodes,resultID:e.resultID,exitCode:t.exitCode}),t.startTime&&(a=t.endTime?"0"===t.exitCode?"success":"failed":"running"),i.push("success"===a?"rgb(144,238,144)":"failed"===a?"#f08080":"running"===a?"rgb(245,164,96)":"#cccccc"))}),this.chartOptions.series=[{data:n,type:"gantt",minPointLength:3,colors:i,events:{}}];var r=n.length,a=50;r>=100?a=30:r>=50&&(a=45);var s=a*r;this.chartOptions.chart.height=s>300?s:300,this.chartOptions.navigator.yAxis={min:0,max:r+2,reversed:!0,categories:[]},t||setTimeout(function(){return e.updateFlag=!0},500)}}},{key:"onPageChange",value:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.prepareGraphData()}},{key:"toggleRows",value:function(t){this.expandedTaskLogs.has(t)?this.expandedTaskLogs.delete(t):this.expandedTaskLogs.add(t)}},{key:"_taskLogs",get:function(){var t=this;if(Array.isArray(this.taskLogs)){var e=[];switch(this.filterType){case"running":e=this.taskLogs.filter(function(t){return t.startTime&&!t.endTime});break;case"failed":e=this.taskLogs.filter(function(t){return t.startTime&&t.endTime&&"0"!==t.exitCode});break;case"finished":e=this.taskLogs.filter(function(t){return t.startTime&&t.endTime&&"0"===t.exitCode});break;default:e=this.taskLogs.slice()}var n=this.sortField||"index";this.sortDirection=this.sortDirection||"asc";var i="desc"===this.sortDirection?-1:1;return"start"===n||"end"===n?e.sort(function(t,e){return F(t[n+"Time"]).isBefore(e[n+"Time"])?-1*i:1*i}):e="duration"===n?Object(kt.a)(e,[function(e){return t.timeDurations[e.index]},function(t){return t.index}],[this.sortDirection,"asc"]):Object(kt.a)(e,[function(t){return t[n]}],this.sortDirection),e}return[]}},{key:"updateFilter",value:function(){this.taskLogTable.renderRows()}},{key:"sortLogs",value:function(t){t.direction?(this.sortField="taskIndex"===t.active?"index":t.active,this.sortDirection=t.direction):(this.sortField="index",this.sortDirection="asc"),this.taskLogTable.renderRows()}},{key:"ngOnDestroy",value:function(){this.timerSubscriber.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||ie)(w.Ob(G.b))},ie.\u0275cmp=w.Ib({type:ie,selectors:[["chi-tasklog-viewer"]],viewQuery:function(t,e){var n;1&t&&w.Qc(h.n,1),2&t&&w.xc(n=w.dc())&&(e.taskLogTable=n.first)},inputs:{taskLogs:"taskLogs",resultID:"resultID",mode:"mode"},features:[w.Ab],decls:5,vars:6,consts:[[2,"width","100%","overflow-x","auto"],[1,"text-muted"],[3,"mode","value","bufferValue"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"value"],[3,"length","pageSize","pageIndex","pageSizeOptions","page"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","","matSort","",1,"table","table-bordered","table-hover",3,"dataSource","matSortChange"],["matColumnDef","taskIndex"],["mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","process"],["matColumnDef","pid"],["matColumnDef","taskName"],["matColumnDef","start"],["matColumnDef","end"],["matColumnDef","stdoe"],["mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["matColumnDef","cpus"],["matColumnDef","memory"],["matColumnDef","nodes"],["matColumnDef","exitCode"],["matColumnDef","duration"],["matColumnDef","command"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1);","class","px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","link",3,"table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","command-detail-row",3,"table-primary",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-center"],["mat-header-cell","",1,"align-middle","text-center"],["target","_blank",3,"routerLink","queryParams"],["mat-cell","",1,"px-3",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"command-details","my-3"],["mat-header-row",""],["mat-row","",1,"link",3,"click"],["mat-row","",1,"command-detail-row"]],template:function(t,e){1&t&&(w.Ub(0,"div",0),w.Ub(1,"small",1),w.Lc(2),w.Tb(),w.Pb(3,"mat-progress-bar",2),w.Jc(4,ne,13,16,"div",3),w.Tb()),2&t&&(w.Cb(2),w.Oc("Progress: ",e.taskFinishedNumber,"/",null==e.taskLogs?null:e.taskLogs.length,""),w.Cb(1),w.nc("mode",e.progressMode)("value",e.progressFinished)("bufferValue",e.progressRunning),w.Cb(1),w.nc("ngIf",e.taskLogs))},directives:[D,o.n,b.b,l.i,l.l,b.a,k.a,h.n,m.a,h.c,h.i,h.b,h.k,h.m,h.h,m.b,h.a,A.f,h.j,h.l],pipes:[o.v],styles:[".command-details[_ngcontent-%COMP%]{display:none;overflow:hidden}tr.command-detail-row[_ngcontent-%COMP%]{height:0;width:100%}[_nghost-%COMP%]     .mat-sort-header-container{display:flex;justify-content:center}"],data:{animation:[Object(vt.m)("detailExpand",[Object(vt.j)("collapsed",Object(vt.k)({height:"0px",padding:"0px",minHeight:"0",display:"none"})),Object(vt.j)("expanded",Object(vt.k)({height:"*",padding:"5px",display:"block"})),Object(vt.l)("expanded <=> collapsed",Object(vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),ie),ae=a("9zvm"),se=a("QFvA"),ce=["workflowProgressDisplay"];function oe(t,e){1&t&&(w.Ub(0,"span",15),w.Pb(1,"i",16),w.Tb())}function le(t,e){1&t&&(w.Ub(0,"span",17),w.Pb(1,"i",18),w.Tb())}function ue(t,e){1&t&&(w.Ub(0,"span",19),w.Pb(1,"i",20),w.Tb())}function be(t,e){1&t&&(w.Ub(0,"span",21),w.Pb(1,"i",22),w.Tb())}function de(t,e){1&t&&(w.Ub(0,"span",23),w.Pb(1,"i",24),w.Tb())}function fe(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",6),w.cc("click",function(){w.Bc(n);var t=w.gc().index,e=w.gc().index,i=w.gc();return i.showStep(e*i.displayStepsInARow+t)}),w.Ub(1,"div",7),w.Ub(2,"span",8),w.Jc(3,oe,2,0,"span",9),w.Jc(4,le,2,0,"span",10),w.Jc(5,ue,2,0,"span",11),w.Jc(6,be,2,0,"span",12),w.Jc(7,de,2,0,"span",13),w.Tb(),w.Ub(8,"span",14),w.Lc(9),w.Tb(),w.Lc(10),w.Tb(),w.Tb()}if(2&t){var i=w.gc().index,r=w.gc().index,a=w.gc();w.Gc("width",96/a.displayStepsInARow+"%"),w.Gb("success",2==a.childResultStatus[r*a.displayStepsInARow+i])("error",3==a.childResultStatus[r*a.displayStepsInARow+i])("processing",1==a.childResultStatus[r*a.displayStepsInARow+i])("active",null!=a.displayStep&&a.displayStep==r*a.displayStepsInARow+i)("blur",null!=a.displayStep&&a.displayStep!=r*a.displayStepsInARow+i),w.Cb(1),w.Gc("width","100%")("margin-left",0==i?"5px":"0px"),w.Cb(1),w.nc("ngSwitch",a.childResultStatus[r*a.displayStepsInARow+i]),w.Cb(1),w.nc("ngSwitchCase",0),w.Cb(1),w.nc("ngSwitchCase",1),w.Cb(1),w.nc("ngSwitchCase",2),w.Cb(1),w.nc("ngSwitchCase",3),w.Cb(1),w.nc("ngSwitchCase",4),w.Cb(2),w.Nc(" ",r*a.displayStepsInARow+i+1,". "),w.Cb(1),w.Nc(" ",a.getStepName(r*a.displayStepsInARow+i)," ")}}function ge(t,e){if(1&t&&(w.Sb(0),w.Jc(1,fe,11,24,"div",5),w.Rb()),2&t){var n=e.index,i=w.gc().index,r=w.gc();w.Cb(1),w.nc("ngIf",(r.displayStep===i*r.displayStepsInARow+n||void 0===r.displayStep)&&r.isMinimal||!r.isMinimal)}}function pe(t,e){if(1&t&&(w.Ub(0,"div",3),w.Jc(1,ge,2,1,"ng-container",4),w.Tb()),2&t){var n=e.$implicit,i=w.gc();w.Gc("width",i.displayWidth+"px"),w.Cb(1),w.nc("ngForOf",n)}}var he,me=((he=function(){function t(){s(this,t),this.stepSelect=new w.o,this.displayStepsInARow=5,this.isMinimal=!1}return e(t,[{key:"ngOnInit",value:function(){this.displayStep=void 0,this.childResultStatus=[],this.displayWidth=0}},{key:"ngOnChanges",value:function(t){var e=this;for(var n in t)"currentResult"===n?this.currentResult=t[n].currentValue:"currentProject"===n?this.currentProject=t[n].currentValue:"taskID2Task"===n&&(this.taskID2Task=t[n].currentValue);this.currentProject&&this.currentResult&&setTimeout(function(){e.settingStepsInARow()},300)}},{key:"settingStepsInARow",value:function(){var t=this.resultInfoEl.nativeElement.offsetWidth;this.isMinimal=!1,t>=1400?this.displayStepsInARow=7:t>=1024?this.displayStepsInARow=5:t>=480?this.displayStepsInARow=3:(this.displayStepsInARow=1,this.isMinimal=!0),this.displayWidth!==.99*t&&(this.displayWidth=.99*t,this.childResults=this.getChildResults(),this.checkChildResultStatus(),this.stepDisplay=this.displaySteps())}},{key:"onResize",value:function(t){var e=this;!1!==this.onResizeTimer&&clearTimeout(this.onResizeTimer),this.displayWidth=0,this.onResizeTimer=setTimeout(function(){e.settingStepsInARow()},800)}},{key:"getChildResults",value:function(){var t=[[]];if(this.currentProject&&this.currentResult)for(var e=this.currentProject.results,n=0;n<this.currentResult.children.length;n++){var i=this.currentResult.children[n];t[n]=[];for(var r=0;r<i.length;r++)for(var a=0;a<e.length;a++)e[a].id===i[r]&&(t[n][r]=e[a])}return t}},{key:"showStep",value:function(t){this.displayStep=this.displayStep===t?void 0:t,this.stepSelect.emit(this.displayStep)}},{key:"displaySteps",value:function(){for(var t=this.displayStepsInARow,e=Math.ceil(this.childResults.length/t),n=[],i=0;i<e;i++)n[i]=this.childResults.slice(i*t,(i+1)*t);return n}},{key:"checkChildResultStatus",value:function(){this.childResultStatus=[];for(var t=0;t<this.childResults.length;t++){var e=this.childResults[t];if(Array.isArray(e)&&e.length>0){this.childResultStatus[t]=2;for(var n=0;n<e.length;n++)switch(e[n].status){case 0:this.childResultStatus[t]=0;break;case 1:this.childResultStatus[t]=this.childResultStatus[t]>1?1:this.childResultStatus[t];break;case 3:this.childResultStatus[t]=3}}else this.childResultStatus[t]=-1}}},{key:"getStepName",value:function(t){var e,n=this,i="";if(!this.currentResult)return i;if(this.currentResult.task&&this.currentResult.task.id?e=this.currentResult.task:this.currentResult.taskSnapshot&&this.currentResult.taskSnapshot.id&&(e=this.currentResult.taskSnapshot),e){if(Array.isArray(e.stepNames)&&(i=e.stepNames[t]))return i;if(e.mapper){var r=e.mapper[t];i=r?r.map(function(t){return t.id&&n.taskID2Task[t.id]?n.taskID2Task[t.id].name:""}).join(", "):"N/A"}else this.childResults[t]&&(i=this.childResults[t].map(function(t){return t.name}).join(", "))}return i}}]),t}()).\u0275fac=function(t){return new(t||he)},he.\u0275cmp=w.Ib({type:he,selectors:[["workflow-progress-display"]],viewQuery:function(t,e){var n;1&t&&w.Qc(ce,3),2&t&&w.xc(n=w.dc())&&(e.resultInfoEl=n.first)},inputs:{currentResult:"currentResult",currentProject:"currentProject",displayStep:"displayStep",taskID2Task:"taskID2Task"},outputs:{stepSelect:"stepSelect"},features:[w.Ab],decls:3,vars:1,consts:[[2,"width","100%","padding-left","1%",3,"resize"],["workflowProgressDisplay",""],["class","wrap",3,"width",4,"ngFor","ngForOf"],[1,"wrap"],[4,"ngFor","ngForOf"],["class","workflowProgress",3,"width","success","error","processing","active","blur","click",4,"ngIf"],[1,"workflowProgress",3,"click"],[2,"padding","0 20px","overflow","hidden","text-overflow","ellipsis"],[3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"text-muted"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash","fa-fw"]],template:function(t,e){1&t&&(w.Ub(0,"div",0,1),w.cc("resize",function(t){return e.onResize(t)},!1,w.Ac),w.Jc(2,pe,2,3,"div",2),w.Tb()),2&t&&(w.Cb(2),w.nc("ngForOf",e.stepDisplay))},directives:[o.m,o.n,o.p,o.q],styles:['.wrap[_ngcontent-%COMP%]{overflow:hidden;perspective:1600px;transform-style:preserve-3d;white-space:nowrap;width:100%}.wrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-left:-1%}.workflowProgress[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;height:30px;line-height:30px;margin:0 0 0 .5%;position:relative;text-align:left;transition:all .8s}.workflowProgress[_ngcontent-%COMP%]:after, .workflowProgress[_ngcontent-%COMP%]:before{content:"";position:absolute;transition:all .8s;z-index:-1}.workflowProgress[_ngcontent-%COMP%]:before{background:#d3d3d3;height:15px;left:0;top:0;transform:skew(45deg);width:100%}.workflowProgress[_ngcontent-%COMP%]:after{background:#d3d3d3;height:15px;left:0;top:14px;transform:skew(-45deg);width:100%}.workflowProgress.success[_ngcontent-%COMP%]:after, .workflowProgress.success[_ngcontent-%COMP%]:before{background:#90ee90}.workflowProgress.error[_ngcontent-%COMP%]:after, .workflowProgress.error[_ngcontent-%COMP%]:before{background:#f08080}.workflowProgress.processing[_ngcontent-%COMP%]:after, .workflowProgress.processing[_ngcontent-%COMP%]:before{background:#f4a460}.workflowProgress.active[_ngcontent-%COMP%]:after, .workflowProgress.active[_ngcontent-%COMP%]:before{transition:all .3s cubic-bezier(.25,.8,.25,1)}.workflowProgress.blur[_ngcontent-%COMP%]:after, .workflowProgress.blur[_ngcontent-%COMP%]:before{opacity:.3}']}),he),ve=a("l8fv"),ke=["resultInfoContainer"];function we(t,e){1&t&&(w.Ub(0,"a"),w.Lc(1,"Project"),w.Tb())}function Ce(t,e){if(1&t&&(w.Ub(0,"span"),w.Lc(1),w.Tb()),2&t){var n=w.gc(2);w.Cb(1),w.Nc(": ",n.currentProject.name,"")}}var Te=function(t){return["/project",t]};function ye(t,e){if(1&t){var n=w.Vb();w.Ub(0,"a",14),w.cc("click",function(){return w.Bc(n),w.gc().gotoProject()}),w.Lc(1,"Project "),w.Jc(2,Ce,2,1,"span",3),w.Tb()}if(2&t){var i=w.gc();w.nc("routerLink",w.rc(2,Te,i.currentProject.id)),w.Cb(2),w.nc("ngIf",i.currentProject)}}function Ue(t,e){1&t&&(w.Ub(0,"li",1),w.Lc(1,"Project"),w.Tb())}var xe=function(t){return["/project",t,"result","list"]};function Se(t,e){if(1&t&&(w.Ub(0,"a",2),w.Lc(1," Result List "),w.Tb()),2&t){var n=w.gc();w.nc("routerLink",w.rc(1,xe,n.currentProject.id))}}var Pe=function(t){return["/result",t,"info"]};function Re(t,e){if(1&t&&(w.Ub(0,"li",15),w.Ub(1,"a",2),w.Lc(2,"Result"),w.Tb(),w.Ub(3,"a",16),w.Pb(4,"i",17),w.Tb(),w.Tb()),2&t){var n=w.gc();w.Cb(1),w.nc("routerLink",w.rc(2,Pe,n.result.id)),w.Cb(2),w.nc("routerLink",w.rc(4,Pe,n.result.id))}}function Le(t,e){1&t&&(w.Ub(0,"li",15),w.Lc(1,"Result"),w.Tb())}function Ie(t,e){1&t&&(w.Ub(0,"div"),w.Lc(1," Loading... "),w.Tb())}function De(t,e){if(1&t&&(w.Ub(0,"p"),w.Ub(1,"u",36),w.Lc(2),w.Tb(),w.Lc(3),w.Ub(4,"u",36),w.Lc(5),w.Tb(),w.Tb()),2&t){var n=w.gc(2);w.Cb(2),w.Mc(null==n.result?null:n.result.prefix),w.Cb(1),w.Mc(null==n.result?null:n.result.name),w.Cb(2),w.Mc(null==n.result?null:n.result.suffix)}}function je(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Ub(1,"mat-form-field",37),w.Ub(2,"input",38),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc(2).result.prefix=t}),w.Tb(),w.Tb(),w.Ub(3,"mat-form-field",37),w.Ub(4,"input",39),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc(2).result.suffix=t}),w.Tb(),w.Tb(),w.Ub(5,"mat-form-field",40),w.Ub(6,"input",41),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc(2).result.name=t}),w.Tb(),w.Ub(7,"span",42),w.Pb(8,"u",43),w.Tb(),w.Ub(9,"span",44),w.Pb(10,"u",43),w.Tb(),w.Tb(),w.Rb()}if(2&t){var i=w.gc(2);w.Cb(2),w.nc("ngModel",i.result.prefix),w.Cb(2),w.nc("ngModel",i.result.suffix),w.Cb(2),w.nc("ngModel",i.result.name),w.Cb(2),w.nc("innerHTML",null==i.result?null:i.result.prefix,w.Cc),w.Cb(2),w.nc("innerHTML",null==i.result?null:i.result.suffix,w.Cc)}}function Je(t,e){1&t&&(w.Ub(0,"p"),w.Lc(1,"(no description)"),w.Tb())}function Oe(t,e){if(1&t){var n=w.Vb();w.Ub(0,"mat-form-field",40),w.Ub(1,"textarea",45),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc(2).result.desc=t}),w.Lc(2),w.Tb(),w.Tb()}if(2&t){var i=w.gc(2);w.Cb(1),w.nc("ngModel",i.result.desc),w.Cb(1),w.Mc(i.result.desc)}}var Me=function(){return["/admin","task"]},_e=function(t){return{pkgs:t}};function Ae(t,e){if(1&t&&(w.Ub(0,"a",47),w.Pb(1,"i",48),w.Tb()),2&t){var n=w.gc(3);w.nc("routerLink",w.qc(2,Me))("queryParams",w.rc(3,_e,n.currentPackage.id))}}function $e(t,e){if(1&t&&(w.Ub(0,"div",24),w.Ub(1,"div",19),w.Ub(2,"strong"),w.Lc(3,"Package name"),w.Tb(),w.Tb(),w.Ub(4,"div",20),w.Pb(5,"i",46),w.Lc(6),w.Jc(7,Ae,2,5,"a",25),w.Tb(),w.Tb()),2&t){var n=w.gc(2);w.Cb(6),w.Nc("",null==n.currentPackage?null:n.currentPackage.fullname," "),w.Cb(1),w.nc("ngIf",null==n.currentPackage||null==n.currentPackage.privilege?null:n.currentPackage.privilege.canView)}}var Fe=function(t,e){return{pkgs:t,tasks:e}};function Be(t,e){if(1&t&&(w.Ub(0,"a",47),w.Pb(1,"i",48),w.Tb()),2&t){var n=w.gc(2);w.nc("routerLink",w.qc(2,Me))("queryParams",w.sc(3,Fe,n.currentPackage.id,null==n.result||null==n.result.task?null:n.result.task.id))}}function ze(t,e){1&t&&(w.Ub(0,"p",49),w.Pb(1,"i",50),w.Lc(2,"Queued"),w.Tb())}function Ve(t,e){1&t&&(w.Ub(0,"p",51),w.Pb(1,"i",52),w.Lc(2,"Running"),w.Tb())}function Ne(t,e){1&t&&(w.Ub(0,"p",53),w.Pb(1,"i",54),w.Lc(2,"Success"),w.Tb())}function qe(t,e){1&t&&(w.Ub(0,"p",55),w.Pb(1,"i",56),w.Lc(2,"Error"),w.Tb())}function Ee(t,e){1&t&&(w.Ub(0,"p",57),w.Pb(1,"i",58),w.Lc(2,"Deleting"),w.Tb())}function He(t,e){if(1&t&&(w.Ub(0,"div",18),w.Ub(1,"div",19),w.Ub(2,"strong"),w.Lc(3,"Finished time"),w.Tb(),w.Tb(),w.Ub(4,"div",20),w.Ub(5,"p"),w.Lc(6),w.Tb(),w.Tb(),w.Tb()),2&t){var n=w.gc(2);w.Cb(6),w.Mc(null!=n.result&&n.result.timer[2]?null==n.result?null:n.result.timer[2].toString():null!=n.result&&n.result.timer[1]?n.result.timer[1].toString():"")}}function Ge(t,e){if(1&t&&(w.Ub(0,"li",73),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(n)}}function We(t,e){if(1&t&&(w.Ub(0,"div",34),w.Ub(1,"ul",71),w.Jc(2,Ge,2,1,"li",72),w.Tb(),w.Tb()),2&t){var n=w.gc(3);w.Cb(2),w.nc("ngForOf",n.result.error.notes)}}function Xe(t,e){if(1&t&&w.Pb(0,"chi-terminal",74),2&t){var n=w.gc(3);w.nc("text",null==n.result?null:n.result.stdOut)}}function Ye(t,e){if(1&t&&w.Pb(0,"chi-terminal",74),2&t){var n=w.gc(3);w.nc("text",null==n.result?null:n.result.stdErr)}}function Qe(t,e){1&t&&(w.Ub(0,"div"),w.Lc(1,"Task logs"),w.Tb())}function Ke(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",18),w.Jc(1,We,3,1,"div",59),w.Ub(2,"div",34),w.Ub(3,"mat-tab-group",60),w.cc("selectedTabChange",function(t){w.Bc(n);var e=w.gc(2);return e.onResultTabChange(t,e.result.id)}),w.Ub(4,"mat-tab",61),w.Ub(5,"div",62),w.Jc(6,Xe,1,1,"chi-terminal",63),w.Tb(),w.Tb(),w.Ub(7,"mat-tab",64),w.Ub(8,"div",62),w.Jc(9,Ye,1,1,"chi-terminal",63),w.Tb(),w.Tb(),w.Ub(10,"mat-tab"),w.Jc(11,Qe,2,0,"ng-template",65),w.Ub(12,"div",62),w.Ub(13,"button",66),w.cc("click",function(){w.Bc(n);var t=w.gc(2);return t.loadResultLogs(t.result.id)}),w.Pb(14,"i",67),w.Lc(15,"Refresh logs "),w.Tb(),w.Ub(16,"mat-button-toggle-group",68),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc(2).taskLogViewMode=t}),w.Ub(17,"mat-button-toggle",69),w.Lc(18,"Table View"),w.Tb(),w.Tb(),w.Pb(19,"chi-tasklog-viewer",70),w.Tb(),w.Tb(),w.Tb(),w.Tb(),w.Tb()}if(2&t){var i=w.gc(2);w.Cb(1),w.nc("ngIf",i.result.error&&i.result.error.notes),w.Cb(5),w.nc("ngIf",i.result),w.Cb(3),w.nc("ngIf",i.result),w.Cb(7),w.nc("ngModel",i.taskLogViewMode),w.Cb(3),w.nc("mode",i.taskLogViewMode)("taskLogs",i.resultTaskLogs[i.result.id])("resultID",i.result.id)}}function Ze(t,e){if(1&t&&(w.Ub(0,"div",34),w.Ub(1,"div",71),w.Pb(2,"i",78),w.Lc(3),w.Tb(),w.Tb()),2&t){var n=w.gc(3);w.Cb(3),w.Nc("",n.result.stdErr," ")}}function tn(t,e){if(1&t&&w.Pb(0,"bdp-workflow-planner",79),2&t){var n=w.gc(3);w.nc("taskMapper",n.result.task.mapper)("childTasks",n.taskList)("taskArgs",n.result.task.arguments)("resultList",n.childResults)}}function en(t,e){if(1&t){var n=w.Vb();w.Ub(0,"workflow-progress-display",81),w.cc("stepSelect",function(t){return w.Bc(n),w.gc(4).showStep(t)}),w.Tb()}if(2&t){var i=w.gc(4);w.nc("currentProject",i.currentProject)("currentResult",i.result)("taskID2Task",i.taskID2Task)}}function nn(t,e){if(1&t&&(w.Ub(0,"div",34),w.Jc(1,en,1,3,"workflow-progress-display",80),w.Tb()),2&t){var n=w.gc(3);w.Cb(1),w.nc("ngIf",n.currentProject&&n.result)}}function rn(t,e){1&t&&(w.Ub(0,"span",49),w.Pb(1,"i",50),w.Tb())}function an(t,e){1&t&&(w.Ub(0,"span",51),w.Pb(1,"i",52),w.Tb())}function sn(t,e){1&t&&(w.Ub(0,"span",53),w.Pb(1,"i",54),w.Tb())}function cn(t,e){1&t&&(w.Ub(0,"span",55),w.Pb(1,"i",56),w.Tb())}function on(t,e){1&t&&(w.Ub(0,"span",57),w.Pb(1,"i",95),w.Tb())}function ln(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",93),w.cc("click",function(){w.Bc(n);var t=w.gc(2),e=t.$implicit,i=t.index;return w.gc(4).loadResultInfo(e.id,i)}),w.Ub(1,"span",94),w.Jc(2,rn,2,0,"span",27),w.Jc(3,an,2,0,"span",28),w.Jc(4,sn,2,0,"span",29),w.Jc(5,cn,2,0,"span",30),w.Jc(6,on,2,0,"span",31),w.Tb(),w.Lc(7),w.Tb()}if(2&t){var i=w.gc(2).$implicit;w.Cb(1),w.nc("ngSwitch",i&&i.status),w.Cb(1),w.nc("ngSwitchCase",0),w.Cb(1),w.nc("ngSwitchCase",1),w.Cb(1),w.nc("ngSwitchCase",2),w.Cb(1),w.nc("ngSwitchCase",3),w.Cb(1),w.nc("ngSwitchCase",4),w.Cb(1),w.Nc(" ",i.name," ")}}function un(t,e){if(1&t&&w.Pb(0,"div",32),2&t){var n=w.gc(2).$implicit,i=w.gc(4);w.nc("innerHTML",i.resultTimers[n.id].timerDisplay,w.Cc)}}function bn(t,e){if(1&t&&(w.Ub(0,"div",18),w.Ub(1,"div",19),w.Ub(2,"strong"),w.Lc(3,"Finished time"),w.Tb(),w.Tb(),w.Ub(4,"div",20),w.Ub(5,"p"),w.Lc(6),w.Tb(),w.Tb(),w.Tb()),2&t){var n=w.gc(2).$implicit;w.Cb(6),w.Mc(null==n||null==n.timer[2]?null:n.timer[2].toString())}}function dn(t,e){1&t&&(w.Ub(0,"div"),w.Lc(1,"Task logs"),w.Tb())}function fn(t,e){if(1&t){var n=w.Vb();w.Ub(0,"button",99),w.cc("click",function(){w.Bc(n);var t=w.gc(3),e=t.$implicit,i=t.index;return w.gc(4).loadResultInfo(e.id,i)}),w.Lc(1,"Load intermediate output file(s)"),w.Tb()}}function gn(t,e){1&t&&(w.Ub(0,"div",89),w.Ub(1,"b"),w.Lc(2,"Intermediate output file(s)"),w.Tb(),w.Tb())}function pn(t,e){if(1&t){var n=w.Vb();w.Ub(0,"datafile-card",101),w.cc("onFocused",function(t){return w.Bc(n),w.gc(8).onFocusedDataFile(t)}),w.Tb()}2&t&&w.nc("dataFile",e.$implicit)}function hn(t,e){if(1&t&&(w.Ub(0,"div",89),w.Ub(1,"div",18),w.Jc(2,pn,1,1,"datafile-card",100),w.Tb(),w.Tb()),2&t){var n=w.gc(3).$implicit,i=w.gc(4);w.Cb(2),w.nc("ngForOf",n.outFiles)("ngForTrackBy",i.trackByDataFile)}}function mn(t,e){if(1&t&&(w.Ub(0,"div",96),w.Jc(1,fn,2,0,"button",97),w.Jc(2,gn,3,0,"div",98),w.Pb(3,"br"),w.Jc(4,hn,3,2,"div",98),w.Tb()),2&t){var n=w.gc(2).$implicit;w.Cb(1),w.nc("ngIf",!n.outFiles[0].id),w.Cb(1),w.nc("ngIf",n.outFiles[0].id),w.Cb(2),w.nc("ngIf",n.outFiles[0].id)}}function vn(t,e){if(1&t){var n=w.Vb();w.Ub(0,"mat-tab"),w.Jc(1,ln,8,7,"ng-template",65),w.Ub(2,"div",84),w.Ub(3,"div",18),w.Ub(4,"div",19),w.Ub(5,"b"),w.Lc(6,"Name"),w.Tb(),w.Tb(),w.Ub(7,"div",20),w.Lc(8),w.Tb(),w.Tb(),w.Ub(9,"div",18),w.Ub(10,"div",19),w.Ub(11,"b"),w.Lc(12,"Description"),w.Tb(),w.Tb(),w.Pb(13,"div",32),w.Tb(),w.Ub(14,"div",18),w.Ub(15,"div",19),w.Ub(16,"strong"),w.Lc(17,"Timer"),w.Tb(),w.Tb(),w.Jc(18,un,1,1,"div",85),w.Tb(),w.Ub(19,"div",18),w.Ub(20,"div",19),w.Ub(21,"strong"),w.Lc(22,"Creation time"),w.Tb(),w.Tb(),w.Ub(23,"div",20),w.Ub(24,"p"),w.Lc(25),w.Tb(),w.Tb(),w.Tb(),w.Jc(26,bn,7,1,"div",33),w.Ub(27,"div",18),w.Ub(28,"div",86),w.Pb(29,"display-arguments",87),w.Tb(),w.Tb(),w.Ub(30,"div",18),w.Ub(31,"div",34),w.Ub(32,"button",75),w.cc("click",function(){w.Bc(n);var t=w.gc(),e=t.$implicit,i=t.index;return w.gc(4).loadResultInfo(e.id,i)}),w.Pb(33,"i",88),w.Lc(34," Refresh "),w.Tb(),w.Tb(),w.Ub(35,"div",89),w.Ub(36,"mat-tab-group",90),w.cc("selectedTabChange",function(t){w.Bc(n);var e=w.gc().$implicit;return w.gc(4).onResultTabChange(t,e.id)}),w.Ub(37,"mat-tab",61),w.Ub(38,"div",62),w.Pb(39,"chi-terminal",74),w.Tb(),w.Tb(),w.Ub(40,"mat-tab",64),w.Ub(41,"div",62),w.Pb(42,"chi-terminal",74),w.Tb(),w.Tb(),w.Ub(43,"mat-tab"),w.Jc(44,dn,2,0,"ng-template",65),w.Ub(45,"button",75),w.cc("click",function(){w.Bc(n);var t=w.gc().$implicit;return w.gc(4).loadResultLogs(t.id)}),w.Pb(46,"i",91),w.Lc(47," Refresh logs "),w.Tb(),w.Ub(48,"mat-button-toggle-group",68),w.cc("ngModelChange",function(t){return w.Bc(n),w.gc(5).taskLogViewMode=t}),w.Ub(49,"mat-button-toggle",69),w.Lc(50,"Table View"),w.Tb(),w.Tb(),w.Ub(51,"div",62),w.Pb(52,"chi-tasklog-viewer",70),w.Tb(),w.Tb(),w.Tb(),w.Tb(),w.Tb(),w.Pb(53,"br"),w.Jc(54,mn,5,3,"div",92),w.Tb(),w.Tb()}if(2&t){var i=w.gc().$implicit,r=w.gc(4);w.Cb(8),w.Mc(i.name),w.Cb(5),w.nc("innerHTML",i.desc||"(no description)",w.Cc),w.Cb(5),w.nc("ngIf",r.resultTimers[i.id]),w.Cb(7),w.Mc(null==i||null==i.createdAt?null:i.createdAt.toString()),w.Cb(1),w.nc("ngIf",2==(null==i?null:i.status)||3==(null==i?null:i.status)),w.Cb(3),w.nc("theResult",i)("currentUser",r.currentUser)("parent",r.result),w.Cb(10),w.nc("text",null==i?null:i.stdOut),w.Cb(3),w.nc("text",null==i?null:i.stdErr),w.Cb(6),w.nc("ngModel",r.taskLogViewMode),w.Cb(4),w.nc("mode",r.taskLogViewMode)("taskLogs",r.resultTaskLogs[i.id])("resultID",i.id),w.Cb(2),w.nc("ngIf",i&&i.outFiles&&i.outFiles.length>0)}}function kn(t,e){if(1&t&&(w.Sb(0),w.Jc(1,vn,55,15,"mat-tab",3),w.Rb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("ngIf",n)}}function wn(t,e){if(1&t&&(w.Ub(0,"div",34),w.Ub(1,"b"),w.Lc(2),w.Tb(),w.Lc(3),w.Ub(4,"div"),w.Ub(5,"mat-tab-group",82),w.Jc(6,kn,2,1,"ng-container",83),w.Tb(),w.Tb(),w.Tb()),2&t){var n=w.gc(3);w.Cb(2),w.Nc("Task(s) in Step ",n._viewControls.displayStep+1,""),w.Cb(1),w.Nc(": ",n.getStepName(n._viewControls.displayStep)," "),w.Cb(3),w.nc("ngForOf",n.childResults[n._viewControls.displayStep])("ngForTrackBy",n.trackByResult)}}function Cn(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",18),w.Jc(1,Ze,4,1,"div",59),w.Ub(2,"div",34),w.Ub(3,"strong"),w.Lc(4,"Progress"),w.Tb(),w.Tb(),w.Ub(5,"div",34),w.Ub(6,"button",75),w.cc("click",function(){w.Bc(n);var t=w.gc(2);return t.showWorkflowGraph=!t.showWorkflowGraph}),w.Pb(7,"i",76),w.Lc(8," Toggle workflow view"),w.Tb(),w.Jc(9,tn,1,4,"bdp-workflow-planner",77),w.Tb(),w.Jc(10,nn,2,1,"div",59),w.Pb(11,"br"),w.Pb(12,"br"),w.Jc(13,wn,7,4,"div",59),w.Tb()}if(2&t){var i=w.gc(2);w.Cb(1),w.nc("ngIf",i.result.stdErr),w.Cb(8),w.nc("ngIf",i.showWorkflowGraph&&i.taskList&&i.result.task&&"workflow"===i.result.task.type),w.Cb(1),w.nc("ngIf",i.currentProject&&i.result),w.Cb(3),w.nc("ngIf",i._viewControls.displayStep>=0)}}function Tn(t,e){if(1&t&&(w.Ub(0,"div"),w.Ub(1,"div",18),w.Ub(2,"div",19),w.Ub(3,"strong"),w.Lc(4,"Result title"),w.Tb(),w.Tb(),w.Ub(5,"div",20),w.Jc(6,De,6,3,"p",3),w.Jc(7,je,11,5,"ng-container",3),w.Tb(),w.Tb(),w.Ub(8,"div",18),w.Ub(9,"div",19),w.Ub(10,"strong"),w.Lc(11,"Description"),w.Tb(),w.Tb(),w.Ub(12,"div",20),w.Ub(13,"div",21),w.Jc(14,Je,2,0,"p",3),w.Ub(15,"p"),w.Lc(16),w.Tb(),w.Tb(),w.Jc(17,Oe,3,2,"mat-form-field",22),w.Tb(),w.Tb(),w.Jc(18,$e,8,2,"div",23),w.Ub(19,"div",24),w.Ub(20,"div",19),w.Ub(21,"strong"),w.Lc(22,"Task name"),w.Tb(),w.Tb(),w.Ub(23,"div",20),w.Lc(24),w.Jc(25,Be,2,6,"a",25),w.Tb(),w.Tb(),w.Ub(26,"div",24),w.Ub(27,"div",19),w.Ub(28,"strong"),w.Lc(29,"Task description"),w.Tb(),w.Tb(),w.Ub(30,"div",20),w.Ub(31,"mat-expansion-panel"),w.Ub(32,"mat-expansion-panel-header"),w.Ub(33,"mat-panel-title"),w.Lc(34," Click to view task description "),w.Tb(),w.Tb(),w.Lc(35),w.Tb(),w.Tb(),w.Tb(),w.Ub(36,"div",24),w.Ub(37,"div",19),w.Ub(38,"strong"),w.Lc(39,"Task runner"),w.Tb(),w.Tb(),w.Ub(40,"div",20),w.Ub(41,"span"),w.Lc(42),w.Tb(),w.Tb(),w.Tb(),w.Ub(43,"div",18),w.Ub(44,"div",19),w.Ub(45,"strong"),w.Lc(46,"Status"),w.Tb(),w.Tb(),w.Ub(47,"div",26),w.Jc(48,ze,3,0,"p",27),w.Jc(49,Ve,3,0,"p",28),w.Jc(50,Ne,3,0,"p",29),w.Jc(51,qe,3,0,"p",30),w.Jc(52,Ee,3,0,"p",31),w.Tb(),w.Tb(),w.Ub(53,"div",18),w.Ub(54,"div",19),w.Ub(55,"strong"),w.Lc(56,"Timer"),w.Tb(),w.Tb(),w.Pb(57,"div",32),w.Tb(),w.Ub(58,"div",18),w.Ub(59,"div",19),w.Ub(60,"strong"),w.Lc(61,"Creation time"),w.Tb(),w.Tb(),w.Ub(62,"div",20),w.Ub(63,"p"),w.Lc(64),w.Tb(),w.Tb(),w.Tb(),w.Jc(65,He,7,1,"div",33),w.Ub(66,"div",18),w.Ub(67,"div",34),w.Pb(68,"display-arguments",35),w.Tb(),w.Tb(),w.Jc(69,Ke,20,7,"div",33),w.Jc(70,Cn,14,4,"div",33),w.Tb()),2&t){var n=w.gc();w.Cb(6),w.nc("ngIf",!n._viewControls.isEditing),w.Cb(1),w.nc("ngIf",n._viewControls.isEditing),w.Cb(6),w.nc("hidden",n._viewControls.isEditing),w.Cb(1),w.nc("ngIf",!(null!=n.result&&n.result.desc)),w.Cb(2),w.Mc(null==n.result?null:n.result.desc),w.Cb(1),w.nc("ngIf",n._viewControls.isEditing),w.Cb(1),w.nc("ngIf",n.currentPackage),w.Cb(6),w.Nc(" ",n.result.task&&n.result.task.name?n.result.task.name:n.result.taskSnapshot.name," "),w.Cb(1),w.nc("ngIf",null==n.currentPackage||null==n.currentPackage.privilege?null:n.currentPackage.privilege.canView),w.Cb(10),w.Nc(" ",n.result.task&&n.result.task.desc?n.result.task.desc:n.result.taskSnapshot.desc," "),w.Cb(7),w.Mc(n.result.owner?n.result.owner.name:"Unknown user"),w.Cb(5),w.nc("ngSwitch",null==n.result?null:n.result.status),w.Cb(1),w.nc("ngSwitchCase",0),w.Cb(1),w.nc("ngSwitchCase",1),w.Cb(1),w.nc("ngSwitchCase",2),w.Cb(1),w.nc("ngSwitchCase",3),w.Cb(1),w.nc("ngSwitchCase",4),w.Cb(5),w.nc("innerHTML",n.currentResultTimer,w.Cc),w.Cb(7),w.Mc(null==n.result?null:n.result.createdAt.toString()),w.Cb(1),w.nc("ngIf",2==(null==n.result?null:n.result.status)||3==(null==n.result?null:n.result.status)),w.Cb(3),w.nc("theResult",n.result)("currentUser",n.currentUser)("expanded",!0),w.Cb(1),w.nc("ngIf","workflow"!==n.result.type),w.Cb(1),w.nc("ngIf","workflow"==n.result.type)}}function yn(t,e){1&t&&w.Pb(0,"div",102)}function Un(t,e){1&t&&w.Pb(0,"i",108)}function xn(t,e){1&t&&w.Pb(0,"i",109)}var Sn=function(t,e){return{"fa-edit":t,"fa-save":e}};function Pn(t,e){if(1&t){var n=w.Vb();w.Ub(0,"a",103),w.cc("click",function(){return w.Bc(n),w.gc(3).onSave()}),w.Pb(1,"i",111),w.Ub(2,"span",112),w.Lc(3),w.Tb(),w.Ub(4,"span",107),w.Lc(5,"\u276f"),w.Tb(),w.Tb()}if(2&t){var i=w.gc(3);w.Gb("active",i._viewControls.isEditing),w.Cb(1),w.nc("ngClass",w.sc(6,Sn,!i._viewControls.isEditing,i._viewControls.isEditing)),w.Cb(1),w.Gb("active",i.showRightButtonContent||i._viewControls.isEditing),w.Cb(1),w.Mc(i._viewControls.isEditing?"Click to save":"Modify info")}}function Rn(t,e){if(1&t&&(w.Sb(0),w.Jc(1,Pn,6,9,"a",110),w.Pb(2,"br"),w.Rb()),2&t){var n=w.gc(2);w.Cb(1),w.nc("ngIf",!n.result.readOnly)}}var Ln=function(){return["/page"]},In=function(t){return{result:t,proxy:"false"}};function Dn(t,e){if(1&t&&(w.Sb(0),w.Ub(1,"a",113),w.Pb(2,"i",114),w.Ub(3,"span",112),w.Lc(4,"Result Page"),w.Tb(),w.Ub(5,"span",107),w.Lc(6,"\u276f"),w.Tb(),w.Tb(),w.Pb(7,"br"),w.Rb()),2&t){var n=w.gc(2);w.Cb(1),w.nc("routerLink",w.qc(4,Ln))("queryParams",w.rc(5,In,n.result.id)),w.Cb(2),w.Gb("active",n.showRightButtonContent)}}var jn=function(t){return{result:t,proxy:"true"}};function Jn(t,e){if(1&t&&(w.Sb(0),w.Ub(1,"a",113),w.Pb(2,"i",115),w.Ub(3,"span",112),w.Lc(4,"Proxy Page"),w.Tb(),w.Ub(5,"span",107),w.Lc(6,"\u276f"),w.Tb(),w.Tb(),w.Pb(7,"br"),w.Rb()),2&t){var n=w.gc(2);w.Cb(1),w.nc("routerLink",w.qc(4,Ln))("queryParams",w.rc(5,jn,n.result.id)),w.Cb(2),w.Gb("active",n.showRightButtonContent)}}function On(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Ub(1,"a",103),w.cc("click",function(){w.Bc(n);var t=w.gc(2);return t.stopResultDialog(t.result)}),w.Pb(2,"i",116),w.Ub(3,"span",112),w.Lc(4,"Stop"),w.Tb(),w.Ub(5,"span",107),w.Lc(6,"\u276f"),w.Tb(),w.Tb(),w.Pb(7,"br"),w.Rb()}if(2&t){var i=w.gc(2);w.Cb(3),w.Gb("active",i.showRightButtonContent)}}function Mn(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Ub(1,"a",103),w.cc("click",function(){w.Bc(n);var t=w.gc(2);return t.resumeResultDialog(t.result)}),w.Pb(2,"i",117),w.Ub(3,"span",112),w.Lc(4,"Resume"),w.Tb(),w.Ub(5,"span",107),w.Lc(6,"\u276f"),w.Tb(),w.Tb(),w.Pb(7,"br"),w.Rb()}if(2&t){var i=w.gc(2);w.Cb(3),w.Gb("active",i.showRightButtonContent)}}function _n(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Ub(1,"a",103),w.cc("click",function(){w.Bc(n);var t=w.gc(2);return t.deleteResultDialog(t.result)}),w.Pb(2,"i",118),w.Ub(3,"span",112),w.Lc(4,"Delete"),w.Tb(),w.Ub(5,"span",107),w.Lc(6,"\u276f"),w.Tb(),w.Tb(),w.Pb(7,"br"),w.Rb()}if(2&t){var i=w.gc(2);w.Cb(3),w.Gb("active",i.showRightButtonContent)}}function An(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Ub(1,"a",103),w.cc("click",function(){w.Bc(n);var t=w.gc();return t.showRightButtonContent=!t.showRightButtonContent}),w.Jc(2,Un,1,0,"i",104),w.Jc(3,xn,1,0,"i",105),w.Ub(4,"span",106),w.Lc(5,"MENU"),w.Tb(),w.Ub(6,"span",107),w.Lc(7,"\u276f"),w.Tb(),w.Tb(),w.Pb(8,"br"),w.Jc(9,Rn,3,1,"ng-container",3),w.Jc(10,Dn,8,7,"ng-container",3),w.Jc(11,Jn,8,7,"ng-container",3),w.Jc(12,On,8,2,"ng-container",3),w.Jc(13,Mn,8,2,"ng-container",3),w.Jc(14,_n,8,2,"ng-container",3),w.Rb()}if(2&t){var i=w.gc();w.Cb(2),w.nc("ngIf",i.showRightButtonContent),w.Cb(1),w.nc("ngIf",!i.showRightButtonContent),w.Cb(1),w.Gb("active",i.showRightButtonContent),w.Cb(5),w.nc("ngIf",i.currentProject.privilege.canEditResult),w.Cb(1),w.nc("ngIf",i.currentProject.getValidResultPageKeys(i.result.task.key).length>0),w.Cb(1),w.nc("ngIf",1===i.result.status&&i.result.task&&null!==i.result.task.proxy),w.Cb(1),w.nc("ngIf",i.result.status<2&&i.currentProject.privilege.canRun),w.Cb(1),w.nc("ngIf",1!==i.result.status&&i.currentProject.privilege.canRun),w.Cb(1),w.nc("ngIf",i.currentProject.privilege.canDeleteResult)}}var $n,Fn=function(){return["/home"]},Bn=function(){return["/project/list"]},zn=(($n=function(){function t(e,n,i,r,a,c,o,l){s(this,t),this.router=e,this.route=n,this.projectService=i,this.infoService=r,this.taskService=a,this.dialog=c,this.systemService=o,this.accountService=l,this._subs=[]}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.resultTaskLogs={},this.taskID2Task={},this.childResults=[],this.stepDisplay=[],this.resultTimers={},this.taskLogViewMode="table",this._isLoadingChildResult="",this.showWorkflowGraph=!1,this.currentPackage=null,this.timer$=Object(z.a)(1e3),this._viewControls={isLoading:!0,isEditing:!1,isDeleting:!1,workflowSteps:[[]],displayStepsInARow:5,childResultStatus:[],displayStep:void 0,displayChildResults:[],displayChildResultIndex:0,confirmDelete:""},this.showRightButtonContent=!1,this.settingStepsInARow(),this._subs.push(this.accountService.currentUser$.subscribe(function(e){t.currentUser=e})),this._subs.push(this.timer$.subscribe(function(){for(var e=Object.keys(t.resultTimers),n=0;n<e.length;n++){var i=t.resultTimers[e[n]];i.timerDisplay=t.resultTimerDisplay(i.result)}t.result&&(t.currentResultTimer=t.resultTimerDisplay(t.result))})),this._subs.push(this.taskService.taskList$.subscribe(function(e){if(e&&e.length>0){t.taskList={};for(var n=0;n<e.length;n++){var i=e[n];t.taskList[i.id]=i,t.taskID2Task[i.id]=i}}})),this._subs.push(this.projectService.currentResult$.subscribe(function(e){e&&t.result&&e&&(e&&e.id===t.result.id?(t.result=void 0,t.childResults=[],setTimeout(function(){t.result=e,t.setCurrentPackage(),"workflow"===t.result.type&&t.prepareWorkflowChildren()},1)):e&&e.parent===t.result.id&&t.prepareWorkflowChildren(),t.resultTimers[e.id]={result:e,timerDisplay:t.resultTimerDisplay(e)})})),this._subs.push(this.projectService.currentProject$.subscribe(function(e){var n;e&&e.id!==(null===(n=t.currentProject)||void 0===n?void 0:n.id)&&(t.currentProject=e,Array.isArray(t.currentProject.packages)&&t.taskService.loadTasks(t.currentProject.packages.map(function(t){return t.id})),t.setCurrentPackage())})),this._subs.push(this.systemService.sysInfo$.subscribe(function(e){return e?t.recaptchaKey=e.reCaptchaSiteKey:""})),this.route.queryParamMap.subscribe(function(e){t._viewControls.isEditing="1"===e.get("edit")}),this._subs.push(this.infoService.incomingMessage$.subscribe(function(e){"35"===e.code&&t.router.navigate(["/project/list"])})),this.route.paramMap.pipe(Object(N.a)(function(e){return t.projectService.loadResultInfo(e.get("resultId"))})).subscribe(function(e){e.isError||(t.result=e.success,t.result&&"workflow"===t.result.type&&t.prepareWorkflowChildren(),t._viewControls.isLoading=!1,t.systemService.toggleNavbar(!0),t.systemService.maintainRightSidebarStatus(),t.setCurrentPackage())}),momentDurationFormatSetup(F)}},{key:"setCurrentPackage",value:function(){var t=this;if(!this.currentProject||!this.result)return null;var e=null;if(this.result.task&&this.result.task.package?e=this.result.task.package:this.result.taskSnapshot&&this.result.taskSnapshot.package&&(e=this.result.taskSnapshot.package),e)var n=this.taskService.loadPackage(e,!0).subscribe(function(e){n.unsubscribe(),t.currentPackage=e.isError?null:e.success});else this.currentPackage=null}},{key:"prepareWorkflowChildren",value:function(){this.childResults=this.getChildResults(),this.checkChildResultStatus(),this.stepDisplay=this.displayStep()}},{key:"settingStepsInARow",value:function(){var t=this.resultInfoEl.nativeElement.offsetWidth;this._viewControls.displayStepsInARow=t>=1400?7:t>=1024?5:t>=480?3:1,this.stepDisplay=this.displayStep()}},{key:"displayStep",value:function(){for(var t=this._viewControls.displayStepsInARow,e=this.childResults,n=Math.ceil(e.length/t),i=[],r=0;r<n;r++)i[r]=e.slice(r*t,(r+1)*t);return i}},{key:"getChildResults",value:function(){var t=[[]];if(this.currentProject&&this.result)for(var e=this.currentProject.results,n=0;n<this.result.children.length;n++){var i=this.result.children[n];t[n]=[];for(var r=0;r<i.length;r++)for(var a=0;a<e.length;a++)e[a].id===i[r]&&(t[n][r]=e[a])}return t}},{key:"cssResultStatus",value:function(t){var e={"fa-hourglass-half":!1,"fa-circle-o-notch":!1,"fa-check":!1,"fa-times":!1,"fa-trash":!1};if(t)switch(t){case 0:e["fa-hourglass-half"]=!0;break;case 1:e["fa-circle-o-notch"]=!0;break;case 2:e["fa-check"]=!0;break;case 3:e["fa-times"]=!0;break;case 4:e["fa-trash"]=!0}return e}},{key:"checkChildResultStatus",value:function(){if(this.result){var t=this._viewControls.childResultStatus;if(this.result.task&&this.result.task.mapper)for(var e=0;e<this.childResults.length;e++){var n=this.childResults[e];if(n.length>0){t[e]=2;for(var i=0;i<n.length;i++){var r=n[i];if(r){if(0===r.status){t[e]=0;break}if(1===r.status)t[e]=t[e]>1?1:t[e];else if(3===r.status){t[e]=3;break}}}}else t[e]=-1}}}},{key:"getStepName",value:function(t){var e,n=this,i="N/A";if(!this.result)return i;if(this.result.task&&this.result.task.id?e=this.result.task:this.result.taskSnapshot&&this.result.taskSnapshot.id&&(e=this.result.taskSnapshot),!e)return i;if(Array.isArray(e.stepNames)&&(i=e.stepNames[t]))return i;if(e.mapper){var r=e.mapper[t];r&&(i="["+r.map(function(t){return t.id&&n.taskID2Task[t.id]?n.taskID2Task[t.id].name:""}).join(", ")+"]")}else this.childResults[t]&&(i=this.childResults[t].map(function(t){return t.name}).join(", "));return i}},{key:"gotoProject",value:function(){this.router.navigate(["/project/"+this.result.project+"/info"])}},{key:"onSave",value:function(){var t=this;if(this._viewControls.isEditing){this._viewControls.isEditing=!1;var e=this.projectService.updateResultInfo(this.result).subscribe(function(n){e.unsubscribe(),t.result=n.success})}else this._viewControls.isEditing=!0}},{key:"trackByDataFile",value:function(t,e){return e.id?e.id:void 0}},{key:"trackByResult",value:function(t,e){return e.id?e.id:void 0}},{key:"onFocusedDataFile",value:function(t){this.focusedDataFile=t.dataFile}},{key:"loadResultInfo",value:function(t,e){var n=this;this._viewControls.displayChildResultIndex=e,this._isLoadingChildResult=t;var i=this.projectService.loadResultInfo(t).subscribe(function(){i.unsubscribe(),n._isLoadingChildResult=void 0})}},{key:"resultTimerDisplay",value:function(t){var e,n,i,r,a,s;if(t)if("workflow"!==t.type){if(0===t.status)return e=F(t.timer[0]),r=F().diff(e),"The task is currently in queue and has waited for around <b>\n          ".concat(F.duration(r).format("hh:mm:ss",{trim:!1}),"</b>.");if(1===t.status)return e=F(t.timer[0]),n=F(t.timer[1]),s=F(),r=n.diff(e),a=s.diff(n),"The task waited for\n          <b>".concat(F.duration(r).format("hh:mm:ss.S",{trim:!1}),"</b> and is currently running for\n          <b>").concat(F.duration(a).format("hh:mm:ss",{trim:!1}),"</b>.");if(2===t.status||3===t.status)return e=F(t.timer[0]),n=F(t.timer[1]),i=F(t.timer[2]),r=n.diff(e),a=i.diff(n),"The task waited for <b> ".concat(F.duration(r).format("hh:mm:ss.S",{trim:!1}),"</b> and then took <b>").concat(F.duration(a).format("hh:mm:ss.S",{trim:!1}),"</b> to finish.")}else{if(1===t.status)return n=F(t.timer[0]),a=(s=F()).diff(n),"This task is currently running for <b>".concat(F.duration(a).format("hh:mm:ss",{trim:!1}),"</b>.");if(2===t.status||3===t.status)return n=F(t.timer[0]),a=(i=F(t.timer[1])).diff(n),"The task took <b>".concat(F.duration(a).format("hh:mm:ss.S",{trim:!1}),"</b> to finish.")}}},{key:"stopResult",value:function(t,e){var n=this.projectService.stopResult(t).subscribe(function(){return n.unsubscribe()})}},{key:"resumeResult",value:function(t){var e=this.projectService.resumeResult(t.id).subscribe(function(){return e.unsubscribe()})}},{key:"stopResultDialog",value:function(t){var e=this,n=this.dialog.open(V.a,{disableClose:!1});n.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to stop the processes <strong>'.concat(t.name,"</strong>'?</h4>"),desc:'<span class="text-danger">This will stop the processes, name: <b>'.concat(t.name,"</b><br>This cannot be undone. Make sure this is something you really want to do!</span><br>")}),n.afterClosed().subscribe(function(n){n&&e.stopResult(t,n)})}},{key:"resumeResultDialog",value:function(t){var e=this,n=this.dialog.open(V.a,{disableClose:!1});n.componentInstance.setOptions({title:'<h4 class="modal-title text-primary">Are you sure you want to resume or re-run the process <strong>'.concat(t.name,"</strong>'?</h4>"),desc:'<span class="text-primary">This will resume/re-run the processes, name: <b>'.concat(t.name,"</b><br>")}),n.afterClosed().subscribe(function(n){n&&e.resumeResult(t)})}},{key:"deleteResult",value:function(t,e){var n=this,i=this.projectService.deleteResult(t).subscribe(function(e){i.unsubscribe(),e.isError||(t.status=4,n.router.navigate(["/project",n.result.project,"result","list"]))})}},{key:"deleteResultDialog",value:function(t){var e=this,n=this.dialog.open(V.a,{disableClose:!1});n.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to delete the result <strong>'.concat(t.name,"</strong>'?</h4>"),desc:'<span class="text-danger">This will delete the result, name: <b>'.concat(t.name,"</b>, and all the associated outputs. <br>This cannot be undone. Make sure this is something you really want to do!</span><br>")}),n.afterClosed().subscribe(function(n){n&&e.deleteResult(t,n)})}},{key:"showStep",value:function(t){if(this.result)if(this._viewControls.displayStep===t)this._viewControls.displayStep=void 0;else if(this._viewControls.displayStep=t,this._viewControls.displayChildResultIndex=0,void 0!==this._viewControls.displayStep){var e=this.childResults[this._viewControls.displayStep][0];e&&this.loadResultInfo(e.id,0)}}},{key:"onResultTabChange",value:function(t,e){2===t.index&&this.loadResultLogs(e)}},{key:"loadResultLogs",value:function(t){var e=this;this.resultTaskLogs[t]=[];var n=this.projectService.getResultLogs(t).subscribe(function(i){n.unsubscribe();var r=i.success.split("\n").map(function(t){return t.split("\t")}),a=r[0];e.resultTaskLogs[t]=r.slice(1).map(function(t,e){var n={index:e};return t.forEach(function(t,e){return n[a[e]]=t}),new B(n)}).filter(function(t){return""!==t.process||"undefined"!==t.taskName})})}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(t){return t.unsubscribe()})}}]),t}()).\u0275fac=function(t){return new(t||$n)(w.Ob(A.c),w.Ob(A.a),w.Ob(q.a),w.Ob(E.a),w.Ob(H.a),w.Ob(G.b),w.Ob(W.a),w.Ob(X.a))},$n.\u0275cmp=w.Ib({type:$n,selectors:[["result-info"]],viewQuery:function(t,e){var n;1&t&&w.Qc(ke,3),2&t&&w.xc(n=w.dc())&&(e.resultInfoEl=n.first)},decls:27,vars:15,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[4,"ngIf"],[3,"routerLink","click",4,"ngIf"],["class","breadcrumb-item",4,"ngIf"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[1,"container-fluid",2,"height","100%"],["resultInfoContainer",""],["class","overlay",4,"ngIf"],[1,"chi-right-menu"],[3,"routerLink","click"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"row"],[1,"col-md-3"],[1,"col-md-9"],[3,"hidden"],["style","width: 100%;",4,"ngIf"],["class","row mb-3",4,"ngIf"],[1,"row","mb-3"],["target","_blank",3,"routerLink","queryParams",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"col-md-9",3,"innerHTML"],["class","row",4,"ngIf"],[1,"col-12"],[3,"theResult","currentUser","expanded"],[1,"text-muted",2,"white-space","pre"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for this result record.",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for this result record.",3,"ngModel","ngModelChange"],[2,"width","100%"],["matInput","","type","text","maxlength","80","size","80","placeholder","The result title (length must be smaller or equal than 80 characters)",3,"ngModel","ngModelChange"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["matInput","","placeholder","Say something about this subset. (max length: 160 characters)","maxlength","160","rows","3",3,"ngModel","ngModelChange"],[1,"fas","fa-cube","fa-fw","mr-2"],["target","_blank",3,"routerLink","queryParams"],[1,"fas","fa-external-link-alt","fa-fw","ml-2"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],["class","col-12",4,"ngIf"],["animationDuration","0ms",2,"min-height","600px",3,"selectedTabChange"],["label","Standard output"],[2,"width","100%","overflow","auto"],[3,"text",4,"ngIf"],["label","System message"],["mat-tab-label",""],["mat-button","",2,"min-width","0.1%",3,"click"],[1,"fas","fa-sync","fa-fx","mr-2",2,"color","green"],["name","fontStyle","aria-label","Font Style",3,"ngModel","ngModelChange"],["value","table"],[3,"mode","taskLogs","resultID"],["role","alert",1,"alert","alert-danger"],["class","ml-4",4,"ngFor","ngForOf"],[1,"ml-4"],[3,"text"],["mat-button","",3,"click"],[1,"fas","fa-project-diagram"],["style","width: 100%;",3,"taskMapper","childTasks","taskArgs","resultList",4,"ngIf"],[1,"fas","fa-exclamation-triangle","mr-2"],[2,"width","100%",3,"taskMapper","childTasks","taskArgs","resultList"],[3,"currentProject","currentResult","taskID2Task","stepSelect",4,"ngIf"],[3,"currentProject","currentResult","taskID2Task","stepSelect"],["animationDuration","0ms"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"container-fluid"],["class","col-md-9",3,"innerHTML",4,"ngIf"],[1,"col-12","my-2"],[3,"theResult","currentUser","parent"],[1,"fas","fa-sync",2,"color","green"],[1,"col-md-12"],["animationDuration","0ms",2,"min-height","800px",3,"selectedTabChange"],[1,"fas","fa-sync","fa-fx",2,"color","green"],["class","row px-2",4,"ngIf"],[3,"click"],[3,"ngSwitch"],["aria-hidden","true",1,"fas","fa-trash","fa-fw"],[1,"row","px-2"],["md-raised-button","",3,"click",4,"ngIf"],["class","col-md-12",4,"ngIf"],["md-raised-button","",3,"click"],["class","col-lg-6 col-xl-4",3,"dataFile","onFocused",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-6","col-xl-4",3,"dataFile","onFocused"],[1,"overlay"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],["class","chi-rbtn",3,"active","click",4,"ngIf"],["aria-hidden","true",1,"fas",3,"ngClass"],[1,"chi-rbtn-content"],[1,"chi-rbtn",3,"routerLink","queryParams"],[1,"fas","fa-scroll","fa-fw"],[1,"fas","fa-network-wired","fa-fw"],[1,"far","fa-stop-circle","fa-fw"],[1,"far","fa-play-circle","fa-fw"],[1,"fas","fa-trash","fa-fw"]],template:function(t,e){1&t&&(w.Ub(0,"ol",0),w.Ub(1,"li",1),w.Ub(2,"a",2),w.Lc(3,"Home"),w.Tb(),w.Tb(),w.Ub(4,"li",1),w.Ub(5,"a",2),w.Lc(6,"Project List"),w.Tb(),w.Tb(),w.Ub(7,"li",1),w.Jc(8,we,2,0,"a",3),w.Jc(9,ye,3,4,"a",4),w.Tb(),w.Jc(10,Ue,2,0,"li",5),w.Ub(11,"li",1),w.Jc(12,Se,2,3,"a",6),w.Tb(),w.Jc(13,Re,5,6,"li",7),w.Jc(14,Le,2,0,"li",7),w.Tb(),w.Ub(15,"div",8),w.Ub(16,"h4",9),w.Lc(17,"Result information"),w.Tb(),w.Jc(18,Ie,2,0,"div",3),w.Pb(19,"br"),w.Pb(20,"br"),w.Ub(21,"div",10,11),w.Jc(23,Tn,71,25,"div",3),w.Jc(24,yn,1,0,"div",12),w.Tb(),w.Tb(),w.Ub(25,"div",13),w.Jc(26,An,15,10,"ng-container",3),w.Tb()),2&t&&(w.Cb(2),w.nc("routerLink",w.qc(13,Fn)),w.Cb(3),w.nc("routerLink",w.qc(14,Bn)),w.Cb(3),w.nc("ngIf",!e.currentProject),w.Cb(1),w.nc("ngIf",e.currentProject),w.Cb(1),w.nc("ngIf",void 0===e.result),w.Cb(2),w.nc("ngIf",e.currentProject),w.Cb(1),w.nc("ngIf",e.result),w.Cb(1),w.nc("ngIf",!e.result),w.Cb(4),w.nc("ngIf",e._viewControls.isLoading),w.Cb(5),w.nc("ngIf",!e._viewControls.isLoading&&void 0!==e.result),w.Cb(1),w.nc("ngIf",e._viewControls.isDeleting),w.Cb(1),w.nc("@rightButtonState",e.showRightButtonContent?"active":"inactive"),w.Cb(1),w.nc("ngIf",e.result&&e.currentProject))},directives:[A.f,o.n,d.c,d.f,d.g,o.p,o.q,ht,mt.b,f.a,l.b,l.e,l.i,l.l,mt.f,mt.g,g.c,g.a,g.d,u.b,b.b,b.a,re,o.m,ae.a,se.a,me,ve.a,o.l],styles:['.wrap[_ngcontent-%COMP%]{height:30px;margin-top:5px;overflow:hidden;perspective:1600px;transform-style:preserve-3d;white-space:nowrap;width:100%}.wrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-left:-1%}.workflowProgress[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;height:30px;line-height:30px;margin:0 0 0 .5%;position:relative;text-align:left;transition:all .8s}.workflowProgress[_ngcontent-%COMP%]:after, .workflowProgress[_ngcontent-%COMP%]:before{content:"";position:absolute;transition:all .8s;z-index:-1}.workflowProgress[_ngcontent-%COMP%]:before{background:#d3d3d3;height:15px;left:0;top:0;transform:skew(45deg);width:100%}.workflowProgress[_ngcontent-%COMP%]:after{background:#d3d3d3;height:15px;left:0;top:14px;transform:skew(-45deg);width:100%}.workflowProgress.success[_ngcontent-%COMP%]:after, .workflowProgress.success[_ngcontent-%COMP%]:before{background:#90ee90}.workflowProgress.error[_ngcontent-%COMP%]:after, .workflowProgress.error[_ngcontent-%COMP%]:before{background:#f08080}.workflowProgress.processing[_ngcontent-%COMP%]:after, .workflowProgress.processing[_ngcontent-%COMP%]:before{background:#f4a460}.workflowProgress.active[_ngcontent-%COMP%]:after, .workflowProgress.active[_ngcontent-%COMP%]:before{transition:all .3s cubic-bezier(.25,.8,.25,1)}.workflowProgress.blur[_ngcontent-%COMP%]:after, .workflowProgress.blur[_ngcontent-%COMP%]:before{opacity:.3}.mat-tab-body-content[_ngcontent-%COMP%]{overflow:hidden!important}'],data:{animation:[$.a]}}),$n),Vn=a("MKys"),Nn=a("ODXS");function qn(t,e){1&t&&w.Pb(0,"th",38)}function En(t,e){1&t&&(w.Sb(0),w.Pb(1,"i",41),w.Rb())}function Hn(t,e){1&t&&(w.Sb(0),w.Pb(1,"i",42),w.Rb())}function Gn(t,e){if(1&t&&(w.Ub(0,"td",39),w.Jc(1,En,2,0,"ng-container",40),w.Jc(2,Hn,2,0,"ng-container",40),w.Tb()),2&t){var n=e.$implicit,i=w.gc();w.Db("rowspan",i.expandedResults.has(n.id)?2:1),w.Cb(1),w.nc("ngIf",i.expandedResults.has(n.id)),w.Cb(1),w.nc("ngIf",!i.expandedResults.has(n.id))}}function Wn(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Project name"),w.Tb())}var Xn=function(t){return["/project",t,"info"]};function Yn(t,e){if(1&t&&(w.Ub(0,"a",2),w.Lc(1),w.Tb()),2&t){var n=w.gc().$implicit,i=w.gc();w.nc("routerLink",w.rc(2,Xn,i.resultID2Project[n.id]._id)),w.Cb(1),w.Mc(null==i.resultID2Project[n.id]?null:i.resultID2Project[n.id].name)}}function Qn(t,e){if(1&t&&(w.Ub(0,"td",44),w.Jc(1,Yn,2,4,"a",45),w.Ub(2,"a",46),w.Pb(3,"span",47),w.Tb(),w.Tb()),2&t){var n=e.$implicit,i=w.gc();w.Cb(1),w.nc("ngIf",n.project),w.Cb(1),w.nc("routerLink",w.rc(2,Xn,i.resultID2Project[n.id]._id))}}function Kn(t,e){1&t&&(w.Ub(0,"th",48),w.Lc(1,"Type"),w.Tb())}function Zn(t,e){1&t&&w.Pb(0,"i",55)}function ti(t,e){1&t&&w.Pb(0,"i",56)}function ei(t,e){1&t&&w.Pb(0,"i",57)}function ni(t,e){1&t&&w.Pb(0,"i",58)}function ii(t,e){if(1&t&&(w.Ub(0,"td",49),w.Ub(1,"div",50),w.Jc(2,Zn,1,0,"i",51),w.Jc(3,ti,1,0,"i",52),w.Jc(4,ei,1,0,"i",53),w.Jc(5,ni,1,0,"i",54),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("ngSwitch",null==n?null:n.type),w.Cb(1),w.nc("ngSwitchCase","workflow"),w.Cb(1),w.nc("ngSwitchCase","standard"),w.Cb(1),w.nc("ngSwitchCase","child"),w.Cb(1),w.nc("ngSwitchCase","system")}}function ri(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Prefix"),w.Tb())}function ai(t,e){if(1&t&&(w.Ub(0,"td",59),w.Ub(1,"u",60),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(2),w.Mc(n.prefix)}}function si(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Result name"),w.Tb())}var ci=function(t){return["/result",t,"info"]};function oi(t,e){if(1&t&&(w.Ub(0,"td",61),w.Ub(1,"a",2),w.Lc(2),w.Tb(),w.Ub(3,"a",46),w.Pb(4,"span",47),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("routerLink",w.rc(3,ci,n.id)),w.Cb(1),w.Mc(null==n?null:n.name),w.Cb(1),w.nc("routerLink",w.rc(5,ci,n.id))}}function li(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Suffix"),w.Tb())}function ui(t,e){if(1&t&&(w.Ub(0,"td",62),w.Ub(1,"u",60),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(2),w.Mc(n.suffix)}}function bi(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Updated time"),w.Tb())}function di(t,e){if(1&t&&(w.Ub(0,"td",63),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(null==n||null==n.updatedAt?null:n.updatedAt.format("YYYY/MM/DD HH:mm:ss"))}}function fi(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Status"),w.Tb())}function gi(t,e){1&t&&(w.Ub(0,"p",69),w.Pb(1,"i",70),w.Tb())}function pi(t,e){1&t&&(w.Ub(0,"p",71),w.Pb(1,"i",72),w.Tb())}function hi(t,e){1&t&&(w.Ub(0,"p",73),w.Pb(1,"i",74),w.Tb())}function mi(t,e){1&t&&(w.Ub(0,"p",75),w.Pb(1,"i",76),w.Tb())}function vi(t,e){1&t&&(w.Ub(0,"p",77),w.Pb(1,"i",78),w.Tb())}function ki(t,e){if(1&t&&(w.Ub(0,"td",63),w.Ub(1,"div",50),w.Jc(2,gi,2,0,"p",64),w.Jc(3,pi,2,0,"p",65),w.Jc(4,hi,2,0,"p",66),w.Jc(5,mi,2,0,"p",67),w.Jc(6,vi,2,0,"p",68),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("ngSwitch",null==n?null:n.status),w.Cb(1),w.nc("ngSwitchCase",0),w.Cb(1),w.nc("ngSwitchCase",1),w.Cb(1),w.nc("ngSwitchCase",2),w.Cb(1),w.nc("ngSwitchCase",3),w.Cb(1),w.nc("ngSwitchCase",4)}}function wi(t,e){1&t&&(w.Ub(0,"th",43),w.Lc(1,"Owner"),w.Tb())}function Ci(t,e){if(1&t&&(w.Ub(0,"td",63),w.Ub(1,"span"),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(2),w.Mc(null==n||null==n.owner?null:n.owner.name)}}function Ti(t,e){if(1&t&&w.Pb(0,"chi-terminal",92),2&t){var n=w.gc(3).$implicit;w.nc("text",null==n?null:n.stdOut)}}function yi(t,e){if(1&t&&(w.Ub(0,"div",89),w.Jc(1,Ti,1,1,"chi-terminal",91),w.Tb()),2&t){var n=w.gc(2).$implicit;w.Cb(1),w.nc("ngIf",n)}}function Ui(t,e){if(1&t&&w.Pb(0,"chi-terminal",92),2&t){var n=w.gc(3).$implicit;w.nc("text",null==n?null:n.stdErr)}}function xi(t,e){if(1&t&&(w.Ub(0,"div",89),w.Jc(1,Ui,1,1,"chi-terminal",91),w.Tb()),2&t){var n=w.gc(2).$implicit;w.Cb(1),w.nc("ngIf",n)}}function Si(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",93),w.cc("click",function(){w.Bc(n);var t=w.gc(2).$implicit;return w.gc().loadResultLogs(t.id)}),w.Lc(1,"Task logs"),w.Tb()}}function Pi(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Pb(1,"display-arguments",81),w.Ub(2,"mat-tab-group",82),w.cc("selectedTabChange",function(t){w.Bc(n);var e=w.gc().$implicit;return w.gc().onResultTabChange(t,e.id)}),w.Ub(3,"mat-tab",83),w.Jc(4,yi,2,1,"ng-template",84),w.Tb(),w.Ub(5,"mat-tab",85),w.Jc(6,xi,2,1,"ng-template",84),w.Tb(),w.Ub(7,"mat-tab"),w.Jc(8,Si,2,0,"ng-template",86),w.Ub(9,"button",87),w.cc("click",function(){w.Bc(n);var t=w.gc().$implicit;return w.gc().loadResultLogs(t.id)}),w.Pb(10,"i",88),w.Lc(11," Refresh logs "),w.Tb(),w.Ub(12,"div",89),w.Pb(13,"chi-tasklog-viewer",90),w.Tb(),w.Tb(),w.Tb(),w.Rb()}if(2&t){var i=w.gc().$implicit,r=w.gc();w.Cb(1),w.nc("theResult",i)("currentUser",r.currentUser),w.Cb(1),w.nc("selectedIndex",0),w.Cb(11),w.nc("taskLogs",r.resultTaskLogs[i.id])("resultID",i.id)}}function Ri(t,e){if(1&t&&(w.Sb(0),w.Pb(1,"mat-progress-bar",94),w.Pb(2,"display-arguments",81),w.Rb()),2&t){var n=w.gc().$implicit,i=w.gc();w.Cb(1),w.nc("color","primary")("mode","buffer")("value",i.workflowProgresses[n.id].value)("bufferValue",i.workflowProgresses[n.id].bufferValue),w.Cb(1),w.nc("theResult",n)("currentUser",i.currentUser)}}function Li(t,e){if(1&t&&(w.Ub(0,"td",79),w.Ub(1,"div",80),w.Jc(2,Pi,14,5,"ng-container",40),w.Jc(3,Ri,3,6,"ng-container",40),w.Tb(),w.Tb()),2&t){var n=e.$implicit,i=w.gc();w.Db("colspan",i.expandedResults.has(n.id)?8:9),w.Cb(1),w.nc("@detailExpand",i.expandedResults.has(n.id)?"expanded":"collapsed"),w.Cb(1),w.nc("ngIf","workflow"!==n.type),w.Cb(1),w.nc("ngIf","workflow"===n.type)}}function Ii(t,e){1&t&&w.Pb(0,"tr",95)}function Di(t,e){if(1&t){var n=w.Vb();w.Ub(0,"tr",96),w.cc("click",function(){w.Bc(n);var t=e.$implicit,i=e.dataIndex;return w.gc().toggleRow(t.id,i)}),w.Tb()}if(2&t){var i=e.$implicit,r=e.dataIndex,a=w.gc();w.Gb("table-warning",r==a.newTaskIndex)("table-primary",r!=a.newTaskIndex&&a.expandedResults.has(i.id))}}function ji(t,e){1&t&&w.Pb(0,"tr",97)}var Ji,Oi=function(){return["/home"]},Mi=function(){return["/project/list"]},_i=function(){return["/result/activities"]},Ai=function(){return[10,30]},$i=function(){return["expander","resultType","projectName","resultPrefix","resultName","resultSuffix","resultStatus","resultOwner","resultUpdateTime"]},Fi=function(){return["resultDetail"]},Bi=function(){return[5,10,25,50,100,300]},zi=((Ji=function(){function t(e,n,i,r,a,c){s(this,t),this.projectService=e,this.accountService=n,this.route=i,this.systemService=r,this.infoService=a,this.router=c,this.pageSize=30,this.pageIndex=0,this.totalPage=0,this.totalCount=0,this.newTaskIndex=1,this._subs=[],this.expandedResults=new Set,this.workflowProgresses={},this.resultTaskLogs={},this.resultID2Project={}}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this._subs.push(this.infoService.incomingDataChange$.subscribe(function(e){var n=e.type;if("Result"===e.target){var i=e.data;"insert"!==n||i.parent||(t.resultID2Project[i.id]=i.project,i=new Nn.a(i),t.loadedResultID2Result[i.id]=i,t.newTaskIndex++,t.activities.unshift(i),"workflow"===i.type&&(t.workflowProgresses[i.id]=2===i.status?{value:100,bufferValue:0}:t.calculateWorkflowProgress(i))),t.loadedResultID2Result[i.id]&&("update"===n?t.updateResult(i):"remove"===n&&t.removeResult(i))}})),this._subs.push(this.infoService.incomingResultOutput$.subscribe(function(e){var n=e.target.split(":")[1],i=t.loadedResultID2Result[n];i&&"workflow"!==i.type&&(i[e.type]=e.data)})),this._subs.push(this.accountService.currentUser$.subscribe(function(e){t.currentUser=e})),this.route.queryParamMap.pipe(Object(N.a)(function(e){return t.pageIndex=+e.get("pageIndex"),t.pageSize=+e.get("pageSize"),t.pageSize||(t.pageSize=10),t.projectService.getActivities(t.pageIndex,t.pageSize)})).subscribe(function(e){return e.isError?"":t.processActivities(e)})}},{key:"updateResult",value:function(t){for(var e=0;e<this.activities.length;e++){var n=this.activities[e];if(t.id===n.id){this.activities[e].name=t.name,this.activities[e].desc=t.desc,this.activities[e].prefix=t.prefix,this.activities[e].suffix=t.suffix,this.activities[e].status=t.status,this.activities[e].owner=t.owner,this.activities[e].updatedAt=F(t.updatedAt),"workflow"===t.type&&this.workflowProgresses[n.id]&&(this.workflowProgresses[n.id]=2===n.status?{value:100,bufferValue:0}:this.calculateWorkflowProgress(t));break}}this.activityTable.renderRows()}},{key:"removeResult",value:function(t){for(var e=0;e<this.activities.length;e++)if(t.id===this.activities[e].id){this.activities.splice(e,1);break}delete this.loadedResultID2Result[t.id],delete this.workflowProgresses[t.id],this.activityTable.renderRows()}},{key:"processActivities",value:function(t){this.newTaskIndex=-1,this.totalPage=t.success.totalPage,this.totalCount=t.success.totalCount;var e=t.success.records;this.resultID2Project=t.success.resultID2Project;var n=e.length;this.loadedResultID2Result={};for(var i=0;i<n;i++){var r=e[i];this.loadedResultID2Result[r.id]=r,"workflow"===r.type&&(this.workflowProgresses[r.id]=2===r.status?{value:100,bufferValue:0}:this.calculateWorkflowProgress(r))}this.activities=e}},{key:"reloadActivities",value:function(){var t=this,e=this.projectService.getActivities(this.pageIndex,this.pageSize).subscribe(function(n){e.unsubscribe(),n.isError||t.processActivities(n)})}},{key:"calculateWorkflowProgress",value:function(t){if("workflow"===t.type){for(var e=t.task&&Array.isArray(t.task.mapper)?t.task.mapper.length:t.taskSnapshot.mapper.length,n=t.children||[],i=[],r=0;r<e;r++)if(Array.isArray(t.task.mapper)){var a=t.task.mapper[r].length,s=Array.isArray(n[r])?n[r].filter(function(t){return!!t}):[];if(0===s.length)break;i[r]=0,s.length===a&&r<e-1?i[r]=2:0===s.length&&r>=1&&2===i[r-1]?i[r-1]=1:s.length===a&&r===e-1&&2!==t.status&&(i[r]=1)}return{value:100*i.filter(function(t){return 2===t}).length/e,bufferValue:100*i.filter(function(t){return 1===t}).length/e}}}},{key:"onPageChange",value:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.router.navigate(["result","activities"],{queryParams:{pageIndex:this.pageIndex,pageSize:this.pageSize}})}},{key:"toggleRow",value:function(t,e){this.expandedResults.has(t)?this.expandedResults.delete(t):this.expandedResults.add(t)}},{key:"onResultTabChange",value:function(t,e){2===t.index&&this.loadResultLogs(e)}},{key:"loadResultLogs",value:function(t){var e=this,n=this.projectService.getResultLogs(t).subscribe(function(i){n.unsubscribe();var r=i.success.split("\n").map(function(t){return t.split("\t")}),a=r[0];e.resultTaskLogs[t]=r.slice(1).map(function(t){var e={};return t.forEach(function(t,n){return e[a[n]]=t}),new B(e)}).filter(function(t){return""!==t.process||"undefined"!==t.taskName})})}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(t){return t.unsubscribe()})}}]),t}()).\u0275fac=function(t){return new(t||Ji)(w.Ob(q.a),w.Ob(X.a),w.Ob(A.a),w.Ob(W.a),w.Ob(E.a),w.Ob(A.c))},Ji.\u0275cmp=w.Ib({type:Ji,selectors:[["result-activity"]],viewQuery:function(t,e){var n;1&t&&w.Qc(h.n,1),2&t&&w.xc(n=w.dc())&&(e.activityTable=n.first)},decls:57,vars:25,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"bdp-main-container"],[1,"chi-header"],["mat-stroked-button","",3,"click"],[1,"fas","fa-redo","mr-2"],[1,"table-responsive"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],["mat-table","","multiTemplateDataRows","",1,"table","table-striped","table-bordered","table-hover",3,"dataSource"],["activityTable",""],["matColumnDef","expander"],["mat-header-cell","","class","align-middle",4,"matHeaderCellDef"],["mat-cell","","class","link align-middle text-center p-0",4,"matCellDef"],["matColumnDef","projectName"],["mat-header-cell","","class","align-middle  text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle px-2",4,"matCellDef"],["matColumnDef","resultType"],["style","width: 30px;","mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["style","width: 30px;","mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultPrefix"],["mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultName"],["mat-cell","","class","align-middle text-center px-2",4,"matCellDef"],["matColumnDef","resultSuffix"],["mat-cell","","class","align-middle text-left",4,"matCellDef"],["matColumnDef","resultUpdateTime"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","resultStatus"],["matColumnDef","resultOwner"],["matColumnDef","resultDetail"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1)",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"table-warning","table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","result-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"align-middle"],["mat-cell","",1,"link","align-middle","text-center","p-0"],[4,"ngIf"],[1,"fas","fa-angle-up"],[1,"fas","fa-angle-down"],["mat-header-cell","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","px-2"],[3,"routerLink",4,"ngIf"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],["mat-header-cell","",1,"align-middle","text-center",2,"width","30px"],["mat-cell","",1,"align-middle","text-right",2,"width","30px"],[1,"col-md-9",3,"ngSwitch"],["class","fas fa-cogs fa-fw",4,"ngSwitchCase"],["class","fas fa-cog fa-fw",4,"ngSwitchCase"],["class","fas fa-puzzle-piece fa-fw",4,"ngSwitchCase"],["class","fas fa-server fa-fw",4,"ngSwitchCase"],[1,"fas","fa-cogs","fa-fw"],[1,"fas","fa-cog","fa-fw"],[1,"fas","fa-puzzle-piece","fa-fw"],[1,"fas","fa-server","fa-fw"],["mat-cell","",1,"align-middle","text-right"],[1,"text-muted"],["mat-cell","",1,"align-middle","text-center","px-2"],["mat-cell","",1,"align-middle","text-left"],["mat-cell","",1,"align-middle","text-center"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],["mat-cell","",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"result-details","my-3"],[3,"theResult","currentUser"],["animationDuration","0ms",3,"selectedIndex","selectedTabChange"],["label","Standard output"],["matTabContent",""],["label","Standard error"],["mat-tab-label",""],["mat-button","",3,"click"],[1,"fas","fa-sync","fa-fx",2,"color","green"],[2,"width","100%","overflow","auto"],[3,"taskLogs","resultID"],[3,"text",4,"ngIf"],[3,"text"],[3,"click"],[3,"color","mode","value","bufferValue"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"result-detail-row"]],template:function(t,e){1&t&&(w.Ub(0,"ol",0),w.Ub(1,"li",1),w.Ub(2,"a",2),w.Lc(3,"Home"),w.Tb(),w.Tb(),w.Ub(4,"li",1),w.Ub(5,"a",2),w.Lc(6,"Project List"),w.Tb(),w.Tb(),w.Ub(7,"li",1),w.Ub(8,"a",2),w.Lc(9,"Recent activities"),w.Tb(),w.Ub(10,"a",3),w.Pb(11,"i",4),w.Tb(),w.Tb(),w.Tb(),w.Ub(12,"div",5),w.Ub(13,"h3",6),w.Lc(14,"Recent activities "),w.Tb(),w.Pb(15,"br"),w.Pb(16,"br"),w.Ub(17,"button",7),w.cc("click",function(){return e.reloadActivities()}),w.Pb(18,"i",8),w.Lc(19," Refresh "),w.Tb(),w.Ub(20,"div",9),w.Ub(21,"mat-paginator",10),w.cc("page",function(t){return e.onPageChange(t)}),w.Tb(),w.Ub(22,"table",11,12),w.Sb(24,13),w.Jc(25,qn,1,0,"th",14),w.Jc(26,Gn,3,3,"td",15),w.Rb(),w.Sb(27,16),w.Jc(28,Wn,2,0,"th",17),w.Jc(29,Qn,4,4,"td",18),w.Rb(),w.Sb(30,19),w.Jc(31,Kn,2,0,"th",20),w.Jc(32,ii,6,5,"td",21),w.Rb(),w.Sb(33,22),w.Jc(34,ri,2,0,"th",23),w.Jc(35,ai,3,1,"td",24),w.Rb(),w.Sb(36,25),w.Jc(37,si,2,0,"th",17),w.Jc(38,oi,5,7,"td",26),w.Rb(),w.Sb(39,27),w.Jc(40,li,2,0,"th",17),w.Jc(41,ui,3,1,"td",28),w.Rb(),w.Sb(42,29),w.Jc(43,bi,2,0,"th",17),w.Jc(44,di,2,1,"td",30),w.Rb(),w.Sb(45,31),w.Jc(46,fi,2,0,"th",23),w.Jc(47,ki,7,6,"td",30),w.Rb(),w.Sb(48,32),w.Jc(49,wi,2,0,"th",17),w.Jc(50,Ci,3,1,"td",30),w.Rb(),w.Sb(51,33),w.Jc(52,Li,4,4,"td",34),w.Rb(),w.Jc(53,Ii,1,0,"tr",35),w.Jc(54,Di,1,4,"tr",36),w.Jc(55,ji,1,0,"tr",37),w.Tb(),w.Ub(56,"mat-paginator",10),w.cc("page",function(t){return e.onPageChange(t)}),w.Tb(),w.Tb(),w.Tb()),2&t&&(w.Cb(2),w.nc("routerLink",w.qc(16,Oi)),w.Cb(3),w.nc("routerLink",w.qc(17,Mi)),w.Cb(3),w.nc("routerLink",w.qc(18,_i)),w.Cb(2),w.nc("routerLink",w.qc(19,_i)),w.Cb(11),w.nc("pageSizeOptions",w.qc(20,Ai))("pageSize",e.pageSize)("pageIndex",e.pageIndex)("length",e.totalCount),w.Cb(1),w.nc("dataSource",e.activities),w.Cb(31),w.nc("matHeaderRowDef",w.qc(21,$i)),w.Cb(1),w.nc("matRowDefColumns",w.qc(22,$i)),w.Cb(1),w.nc("matRowDefColumns",w.qc(23,Fi)),w.Cb(1),w.nc("pageSizeOptions",w.qc(24,Bi))("pageSize",e.pageSize)("pageIndex",e.pageIndex)("length",e.totalCount))},directives:[A.f,u.b,k.a,h.n,h.c,h.i,h.b,h.k,h.m,h.h,h.a,o.n,o.p,o.q,ht,g.c,g.a,g.b,g.d,re,ae.a,D,h.j,h.l],styles:["tr.result-detail-row[_ngcontent-%COMP%]{height:0}.result-details[_ngcontent-%COMP%]{overflow:hidden}"],data:{animation:[Object(vt.m)("detailExpand",[Object(vt.j)("collapsed",Object(vt.k)({height:"0px",minHeight:"0",display:"none"})),Object(vt.j)("expanded",Object(vt.k)({height:"*",display:"block"})),Object(vt.l)("expanded <=> collapsed",Object(vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),Ji);function Vi(t,e){if(1&t&&(w.Ub(0,"span"),w.Lc(1),w.Tb()),2&t){var n=w.gc(2);w.Cb(1),w.Nc(": ",n.currentProject.name,"")}}var Ni=function(t){return["/project",t,"info"]};function qi(t,e){if(1&t&&(w.Ub(0,"a",2),w.Lc(1,"Project "),w.Jc(2,Vi,2,1,"span",14),w.Tb()),2&t){var n=w.gc();w.nc("routerLink",w.rc(2,Ni,n.currentProject.id)),w.Cb(2),w.nc("ngIf",n.currentProject)}}var Ei=function(t){return["/project",t,"result","list"]};function Hi(t,e){if(1&t&&(w.Ub(0,"li",15),w.Ub(1,"a",2),w.Lc(2,"Result List"),w.Tb(),w.Ub(3,"a",16),w.Pb(4,"i",17),w.Tb(),w.Tb()),2&t){var n=w.gc();w.Cb(1),w.nc("routerLink",w.rc(2,Ei,n.currentProject.id)),w.Cb(2),w.nc("routerLink",w.rc(4,Ei,n.currentProject.id))}}function Gi(t,e){1&t&&(w.Ub(0,"li",15),w.Lc(1,"Result List"),w.Tb())}function Wi(t,e){1&t&&(w.Sb(0),w.Lc(1,"s"),w.Rb())}function Xi(t,e){if(1&t){var n=w.Vb();w.Ub(0,"button",51),w.cc("click",function(){return w.Bc(n),w.gc(3).stopResultDialog()}),w.Ub(1,"mat-icon"),w.Lc(2,"stop"),w.Tb(),w.Tb()}}function Yi(t,e){if(1&t){var n=w.Vb();w.Ub(0,"button",51),w.cc("click",function(){return w.Bc(n),w.gc(3).deleteResultDialog()}),w.Ub(1,"mat-icon"),w.Lc(2,"delete"),w.Tb(),w.Tb()}}function Qi(t,e){if(1&t&&(w.Ub(0,"div",7),w.Ub(1,"div",20),w.Ub(2,"span"),w.Lc(3),w.Jc(4,Wi,2,0,"ng-container",14),w.Tb(),w.Pb(5,"i",49),w.Jc(6,Xi,3,0,"button",50),w.Jc(7,Yi,3,0,"button",50),w.Tb(),w.Tb()),2&t){var n=w.gc(2);w.Cb(3),w.Nc("Selected ",n.selectedList.length," result"),w.Cb(1),w.nc("ngIf",n.selectedList.length>1),w.Cb(2),w.nc("ngIf",n.currentProject.privilege.canRun),w.Cb(1),w.nc("ngIf",n.currentProject.privilege.canDeleteResult)}}function Ki(t,e){if(1&t){var n=w.Vb();w.Ub(0,"th",52),w.Ub(1,"mat-checkbox",53,54),w.cc("change",function(t){return w.Bc(n),w.gc(2).onAllCheckBoxChange(t)}),w.Tb(),w.Tb()}if(2&t){var i=w.gc(2);w.Cb(1),w.nc("checked",i.selectedList.length===i.pageSize||i.selectedList.length===i.results.length)("indeterminate",i.selectedList.length>0&&i.selectedList.length<i.pageSize&&i.selectedList.length<i.results.length)}}function Zi(t,e){if(1&t){var n=w.Vb();w.Ub(0,"td",55),w.Ub(1,"mat-checkbox",56),w.cc("change",function(t){w.Bc(n);var i=e.$implicit;return w.gc(2).onResultCheckBoxChange(t,i.id)})("click",function(t){return t.stopPropagation()}),w.Tb(),w.Tb()}if(2&t){var i=e.$implicit,r=w.gc(2);w.Db("rowspan",r.expandedResults.has(i.id)?2:1),w.Cb(1),w.nc("checked",r.selectedList.indexOf(i.id)>=0)}}function tr(t,e){1&t&&(w.Ub(0,"th",57),w.Lc(1,"Prefix"),w.Tb())}function er(t,e){if(1&t&&(w.Ub(0,"td",58),w.Ub(1,"u",59),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(2),w.Mc(n.prefix)}}function nr(t,e){1&t&&(w.Ub(0,"th",60),w.Lc(1,"Result name"),w.Tb())}var ir=function(){return["/page"]},rr=function(t){return{result:t,proxy:!1}};function ar(t,e){if(1&t&&(w.Ub(0,"a",67),w.Pb(1,"i",68),w.Tb()),2&t){var n=w.gc().$implicit;w.nc("routerLink",w.qc(2,ir))("queryParams",w.rc(3,rr,n.id))}}var sr=function(t){return{result:t,proxy:"true"}};function cr(t,e){if(1&t&&(w.Ub(0,"a",69),w.Pb(1,"i",70),w.Tb()),2&t){var n=w.gc().$implicit;w.nc("routerLink",w.qc(2,ir))("queryParams",w.rc(3,sr,n.id))}}var or=function(t){return["/result",t,"info"]};function lr(t,e){if(1&t&&(w.Ub(0,"td",61),w.Jc(1,ar,2,5,"a",62),w.Jc(2,cr,2,5,"a",63),w.Ub(3,"a",64),w.Lc(4),w.Tb(),w.Ub(5,"a",65),w.Pb(6,"span",66),w.Tb(),w.Tb()),2&t){var n=e.$implicit,i=w.gc(2);w.Cb(1),w.nc("ngIf",i.currentProject.getValidResultPageKeys(null==i.taskID2Task[(null==n||null==n.task?null:n.task.id)||(null==n?null:n.task)]?null:i.taskID2Task[(null==n||null==n.task?null:n.task.id)||(null==n?null:n.task)].key).length>0),w.Cb(1),w.nc("ngIf",((null==n||null==n.task?null:n.task.proxy)||(null==i.taskID2Task[null==n?null:n.task]?null:i.taskID2Task[null==n?null:n.task].proxy))&&1==n.status),w.Cb(1),w.nc("routerLink",w.rc(5,or,n.id)),w.Cb(1),w.Mc(null==n?null:n.name),w.Cb(1),w.nc("routerLink",w.rc(7,or,n.id))}}function ur(t,e){1&t&&(w.Ub(0,"th",71),w.Lc(1,"Type"),w.Tb())}function br(t,e){1&t&&w.Pb(0,"i",78)}function dr(t,e){1&t&&w.Pb(0,"i",79)}function fr(t,e){1&t&&w.Pb(0,"i",80)}function gr(t,e){1&t&&w.Pb(0,"i",81)}function pr(t,e){if(1&t&&(w.Ub(0,"td",72),w.Ub(1,"div",73),w.Jc(2,br,1,0,"i",74),w.Jc(3,dr,1,0,"i",75),w.Jc(4,fr,1,0,"i",76),w.Jc(5,gr,1,0,"i",77),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("ngSwitch",null==n?null:n.type),w.Cb(1),w.nc("ngSwitchCase","workflow"),w.Cb(1),w.nc("ngSwitchCase","standard"),w.Cb(1),w.nc("ngSwitchCase","child"),w.Cb(1),w.nc("ngSwitchCase","system")}}function hr(t,e){1&t&&(w.Ub(0,"th",57),w.Lc(1,"Suffix"),w.Tb())}function mr(t,e){if(1&t&&(w.Ub(0,"td",82),w.Ub(1,"u",59),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(2),w.Mc(n.suffix)}}function vr(t,e){1&t&&(w.Ub(0,"th",57),w.Lc(1,"Status"),w.Tb())}function kr(t,e){1&t&&(w.Ub(0,"p",90),w.Pb(1,"i",91),w.Tb())}function wr(t,e){1&t&&(w.Ub(0,"p",92),w.Pb(1,"i",93),w.Tb())}function Cr(t,e){1&t&&(w.Ub(0,"p",94),w.Pb(1,"i",95),w.Tb())}function Tr(t,e){1&t&&(w.Ub(0,"p",96),w.Pb(1,"i",97),w.Tb())}function yr(t,e){1&t&&(w.Ub(0,"p",98),w.Pb(1,"i",99),w.Tb())}function Ur(t,e){if(1&t&&(w.Ub(0,"td",83),w.Ub(1,"div",84),w.Jc(2,kr,2,0,"p",85),w.Jc(3,wr,2,0,"p",86),w.Jc(4,Cr,2,0,"p",87),w.Jc(5,Tr,2,0,"p",88),w.Jc(6,yr,2,0,"p",89),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.nc("ngSwitch",null==n?null:n.status),w.Cb(1),w.nc("ngSwitchCase",0),w.Cb(1),w.nc("ngSwitchCase",1),w.Cb(1),w.nc("ngSwitchCase",2),w.Cb(1),w.nc("ngSwitchCase",3),w.Cb(1),w.nc("ngSwitchCase",4)}}function xr(t,e){1&t&&(w.Ub(0,"th",57),w.Lc(1,"Creation time"),w.Tb())}function Sr(t,e){if(1&t&&(w.Ub(0,"td",83),w.Lc(1),w.Tb()),2&t){var n=e.$implicit;w.Cb(1),w.Mc(null==n||null==n.createdAt?null:n.createdAt.format("YYYY/MM/DD HH:mm:ss"))}}function Pr(t,e){1&t&&(w.Ub(0,"th",57),w.Lc(1,"Owner"),w.Tb())}function Rr(t,e){if(1&t&&(w.Ub(0,"td",83),w.Ub(1,"span"),w.Lc(2),w.Tb(),w.Tb()),2&t){var n=e.$implicit;w.Cb(2),w.Mc(null==n||null==n.owner?null:n.owner.name)}}function Lr(t,e){if(1&t&&w.Pb(0,"chi-terminal",114),2&t){var n=w.gc(4).$implicit;w.nc("text",null==n?null:n.stdOut)}}function Ir(t,e){if(1&t&&(w.Ub(0,"div",111),w.Jc(1,Lr,1,1,"chi-terminal",113),w.Tb()),2&t){var n=w.gc(3).$implicit;w.Cb(1),w.nc("ngIf",n)}}function Dr(t,e){if(1&t&&w.Pb(0,"chi-terminal",114),2&t){var n=w.gc(4).$implicit;w.nc("text",null==n?null:n.stdErr)}}function jr(t,e){if(1&t&&(w.Ub(0,"div",111),w.Jc(1,Dr,1,1,"chi-terminal",113),w.Tb()),2&t){var n=w.gc(3).$implicit;w.Cb(1),w.nc("ngIf",n)}}function Jr(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",115),w.cc("click",function(){w.Bc(n);var t=w.gc(3).$implicit;return w.gc(2).loadResultLogs(t.id)}),w.Lc(1,"Task logs"),w.Tb()}}function Or(t,e){if(1&t){var n=w.Vb();w.Sb(0),w.Pb(1,"display-arguments",103),w.Ub(2,"mat-tab-group",104),w.cc("selectedTabChange",function(t){w.Bc(n);var e=w.gc(2).$implicit;return w.gc(2).onResultTabChange(t,e.id)}),w.Ub(3,"mat-tab",105),w.Jc(4,Ir,2,1,"ng-template",106),w.Tb(),w.Ub(5,"mat-tab",107),w.Jc(6,jr,2,1,"ng-template",106),w.Tb(),w.Ub(7,"mat-tab"),w.Jc(8,Jr,2,0,"ng-template",108),w.Ub(9,"button",109),w.cc("click",function(){w.Bc(n);var t=w.gc(2).$implicit;return w.gc(2).loadResultLogs(t.id)}),w.Pb(10,"i",110),w.Lc(11," Refresh logs "),w.Tb(),w.Ub(12,"div",111),w.Pb(13,"chi-tasklog-viewer",112),w.Tb(),w.Tb(),w.Tb(),w.Rb()}if(2&t){var i=w.gc(2).$implicit,r=w.gc(2);w.Cb(1),w.nc("theResult",i)("currentUser",r.currentUser),w.Cb(1),w.nc("selectedIndex",0),w.Cb(11),w.nc("taskLogs",r.resultTaskLogs[i.id])("resultID",i.id)}}function Mr(t,e){if(1&t&&w.Pb(0,"workflow-progress-display",118),2&t){var n=w.gc(3).$implicit,i=w.gc(2);w.nc("currentProject",i.currentProject)("currentResult",n)("taskID2Task",i.taskID2Task)}}function _r(t,e){if(1&t&&(w.Sb(0),w.Pb(1,"display-arguments",103),w.Pb(2,"mat-progress-bar",116),w.Jc(3,Mr,1,3,"workflow-progress-display",117),w.Rb()),2&t){var n=w.gc(2).$implicit,i=w.gc(2);w.Cb(1),w.nc("theResult",n)("currentUser",i.currentUser),w.Cb(1),w.nc("color","primary")("mode","buffer")("value",i.workflowProgresses[n.id].value)("bufferValue",i.workflowProgresses[n.id].bufferValue),w.Cb(1),w.nc("ngIf",i.currentProject&&n&&i.expandedResults.has(n.id)&&i.taskID2Task)}}function Ar(t,e){if(1&t&&(w.Sb(0),w.Jc(1,Or,14,5,"ng-container",14),w.Jc(2,_r,4,7,"ng-container",14),w.Rb()),2&t){var n=w.gc().$implicit;w.Cb(1),w.nc("ngIf","workflow"!==n.type),w.Cb(1),w.nc("ngIf","workflow"===n.type)}}function $r(t,e){if(1&t&&(w.Ub(0,"td",100),w.Ub(1,"div",101),w.Ub(2,"strong"),w.Pb(3,"i",102),w.Lc(4,"Description"),w.Tb(),w.Lc(5,": "),w.Ub(6,"p"),w.Lc(7),w.Tb(),w.Jc(8,Ar,3,2,"ng-container",14),w.Tb(),w.Tb()),2&t){var n=e.$implicit,i=w.gc(2);w.Db("colspan",i.expandedResults.has(n.id)?7:8),w.Cb(1),w.nc("@detailExpand",i.expandedResults.has(n.id)?"expanded":"collapsed"),w.Cb(6),w.Mc(n.desc?n.desc:"No description"),w.Cb(1),w.nc("ngIf",i.expandedResults.has(n.id))}}function Fr(t,e){1&t&&w.Pb(0,"tr",119)}function Br(t,e){if(1&t){var n=w.Vb();w.Ub(0,"tr",120),w.cc("click",function(){w.Bc(n);var t=e.$implicit,i=e.dataIndex;return w.gc(2).toggleRow(t.id,i)}),w.Tb()}if(2&t){var i=e.$implicit,r=w.gc(2);w.Gb("table-primary",r.expandedResults.has(i.id))}}function zr(t,e){1&t&&w.Pb(0,"tr",121)}var Vr=function(){return[10,30,50,100,300,500]},Nr=function(){return["resultCheckbox","resultType","resultPrefix","resultName","resultSuffix","resultStatus","resultCreationTime","resultOwner"]},qr=function(){return["resultDetail"]};function Er(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",18),w.Jc(1,Qi,8,4,"div",19),w.Ub(2,"div",7),w.Ub(3,"div",20,21),w.Ub(5,"mat-paginator",22),w.cc("page",function(t){return w.Bc(n),w.gc().onPageChange(t)}),w.Tb(),w.Ub(6,"div",23),w.Ub(7,"table",24),w.cc("matSortChange",function(t){return w.Bc(n),w.gc().sortData(t)}),w.hc(8,"slice"),w.Sb(9,25),w.Jc(10,Ki,3,2,"th",26),w.Jc(11,Zi,2,2,"td",27),w.Rb(),w.Sb(12,28),w.Jc(13,tr,2,0,"th",29),w.Jc(14,er,3,1,"td",30),w.Rb(),w.Sb(15,31),w.Jc(16,nr,2,0,"th",32),w.Jc(17,lr,7,9,"td",33),w.Rb(),w.Sb(18,34),w.Jc(19,ur,2,0,"th",35),w.Jc(20,pr,6,5,"td",36),w.Rb(),w.Sb(21,37),w.Jc(22,hr,2,0,"th",38),w.Jc(23,mr,3,1,"td",39),w.Rb(),w.Sb(24,40),w.Jc(25,vr,2,0,"th",29),w.Jc(26,Ur,7,6,"td",41),w.Rb(),w.Sb(27,42),w.Jc(28,xr,2,0,"th",38),w.Jc(29,Sr,2,1,"td",41),w.Rb(),w.Sb(30,43),w.Jc(31,Pr,2,0,"th",38),w.Jc(32,Rr,3,1,"td",41),w.Rb(),w.Sb(33,44),w.Jc(34,$r,9,4,"td",45),w.Rb(),w.Jc(35,Fr,1,0,"tr",46),w.Jc(36,Br,1,2,"tr",47),w.Jc(37,zr,1,0,"tr",48),w.Tb(),w.Tb(),w.Ub(38,"mat-paginator",22),w.cc("page",function(t){return w.Bc(n),w.gc().onPageChange(t)}),w.Tb(),w.Tb(),w.Tb(),w.Tb()}if(2&t){var i=w.gc();w.Cb(1),w.nc("ngIf",i.selectedList.length>0),w.Cb(4),w.nc("length",i.results.length)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",w.qc(17,Vr)),w.Cb(2),w.nc("dataSource",w.kc(8,13,i.results,i.pageIndex*i.pageSize,(i.pageIndex+1)*i.pageSize)),w.Cb(28),w.nc("matHeaderRowDef",w.qc(18,Nr)),w.Cb(1),w.nc("matRowDefColumns",w.qc(19,Nr)),w.Cb(1),w.nc("matRowDefColumns",w.qc(20,qr)),w.Cb(1),w.nc("length",i.results.length)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",w.qc(21,Vr))}}function Hr(t,e){1&t&&w.Pb(0,"i",131)}function Gr(t,e){1&t&&w.Pb(0,"i",132)}var Wr=function(t){return["/project",t,"result","creation"]};function Xr(t,e){if(1&t&&(w.Sb(0),w.Ub(1,"a",128),w.Pb(2,"i",133),w.Ub(3,"span",130),w.Lc(4,"Perform analysis"),w.Tb(),w.Ub(5,"span",127),w.Lc(6,"\u276f"),w.Tb(),w.Tb(),w.Pb(7,"br"),w.Rb()),2&t){var n=w.gc(2);w.Cb(1),w.nc("routerLink",w.rc(3,Wr,n.currentProject.id)),w.Cb(2),w.Gb("active",n.showRightButtonContent)}}var Yr=function(t){return["/project",t,"dataFile","list"]};function Qr(t,e){if(1&t){var n=w.Vb();w.Ub(0,"div",122),w.Ub(1,"a",123),w.cc("click",function(){w.Bc(n);var t=w.gc();return t.showRightButtonContent=!t.showRightButtonContent}),w.Jc(2,Hr,1,0,"i",124),w.Jc(3,Gr,1,0,"i",125),w.Ub(4,"span",126),w.Lc(5,"MENU"),w.Tb(),w.Ub(6,"span",127),w.Lc(7,"\u276f"),w.Tb(),w.Tb(),w.Pb(8,"br"),w.Jc(9,Xr,8,5,"ng-container",14),w.Ub(10,"a",128),w.Pb(11,"i",129),w.Ub(12,"span",130),w.Lc(13,"Data files"),w.Tb(),w.Ub(14,"span",127),w.Lc(15,"\u276f"),w.Tb(),w.Tb(),w.Pb(16,"br"),w.Tb()}if(2&t){var i=w.gc();w.nc("@rightButtonState",i.showRightButtonContent?"active":"inactive"),w.Cb(2),w.nc("ngIf",i.showRightButtonContent),w.Cb(1),w.nc("ngIf",!i.showRightButtonContent),w.Cb(1),w.Gb("active",i.showRightButtonContent),w.Cb(5),w.nc("ngIf",i.currentProject.privilege.canRun),w.Cb(1),w.nc("routerLink",w.rc(9,Yr,i.currentProject.id)),w.Cb(2),w.Gb("active",i.showRightButtonContent)}}var Kr,Zr,ta,ea,na,ia=function(){return["/home"]},ra=function(){return["/project/list"]},aa=A.g.forChild([{path:"list",component:(Kr=function(){function t(e,n,i,r,a,c,o){s(this,t),this.projectService=e,this.accountService=n,this.router=i,this.route=r,this.dialog=a,this.taskService=c,this.systemService=o,this.pageSize=30,this.pageIndex=0,this._subs=[]}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.selectedList=[],this.taskID2Task={},this.showRightButtonContent=!1,this._viewControls={resultViewMode:"table",isResultDeleting:!1,confirmDelete:"",sortField:"createdAt",sortDirection:"desc",expandContent:{}},this.loadedResultIDs=new Set,this.expandedResults=new Set,this.workflowProgresses={},this.resultTaskLogs={},this._subs.push(this.projectService.currentProject$.subscribe(function(e){setTimeout(function(){var n;e&&e.id!==(null===(n=t.currentProject)||void 0===n?void 0:n.id)&&(t.currentProject=e,t.taskService.loadTasks(t.currentProject.packages.map(function(t){return t.id})))},100)})),this._subs.push(this.accountService.currentUser$.subscribe(function(e){return t.currentUser=e})),this._subs.push(this.taskService.taskList$.subscribe(function(e){if(e&&e.length>0)for(var n=0;n<e.length;n++){var i=e[n];t.taskID2Task[i.id]=i}})),this.route.paramMap.subscribe(function(e){return t.projectService.setCurrentProject(e.get("pid"))})}},{key:"loadingResultInfo",value:function(t){var e=this;if(!this.loadedResultIDs.has(t))var n=this.projectService.loadResultInfo(t).subscribe(function(i){n.unsubscribe(),e.loadedResultIDs.add(t)})}},{key:"onFocusedResult",value:function(t){this.focusedResult=t}},{key:"goToNewResultPage",value:function(){this.router.navigate(["/project",this.currentProject.id,"result","creation"])}},{key:"gotoResult",value:function(t,e){t&&t.id&&this.router.navigate(["/result",t.id,"info"],e?{queryParams:{edit:1}}:{})}},{key:"onPageChange",value:function(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize}},{key:"results",get:function(){var t=this;if(this.currentProject&&this.currentProject.results){var e=this.currentProject.results.slice(0),n=this._viewControls.sortField;"createdAt"===n?(e.sort(function(t,e){return F(t[n]).isBefore(e[n])?-1:1}),"desc"===this._viewControls.sortDirection&&e.reverse()):e="owner"===n?Object(kt.a)(e,[function(t){return t.owner.name}],this._viewControls.sortDirection):Object(kt.a)(e,[function(t){return t[n]}],this._viewControls.sortDirection);var i=e.filter(function(t){return!t.parent});return i.forEach(function(e){t.workflowProgresses[e.id]=2===e.status?{value:100,bufferValue:0}:t.calculateWorkflowProgress(e)}),i}return[]}},{key:"calculateWorkflowProgress",value:function(t){if("workflow"===t.type){for(var e=t.task&&Array.isArray(t.task.mapper)?t.task.mapper.length:t.taskSnapshot.mapper.length,n=t.children||[],i=[],r=0;r<e;r++)if(Array.isArray(t.task.mapper)){var a=t.task.mapper[r].length,s=Array.isArray(n[r])?n[r].filter(function(t){return!!t}):[];if(0===s.length)break;i[r]=0,s.length===a&&r<e-1?i[r]=2:0===s.length&&r>=1&&2===i[r-1]?i[r-1]=1:s.length===a&&r===e-1&&2!==t.status&&(i[r]=1)}return{value:100*i.filter(function(t){return 2===t}).length/e,bufferValue:100*i.filter(function(t){return 1===t}).length/e}}}},{key:"onAllCheckBoxChange",value:function(t){this.selectedList=t.checked?this.results.slice(this.pageIndex*this.pageSize,(this.pageIndex+1)*this.pageSize).map(function(t){return t.id}):[]}},{key:"onResultTabChange",value:function(t,e){2===t.index&&this.loadResultLogs(e)}},{key:"onResultCheckBoxChange",value:function(t,e){if(t.checked&&this.selectedList.indexOf(e)<0)this.selectedList.push(e);else if(!t.checked){var n=this.selectedList.indexOf(e);n>=0&&this.selectedList.splice(n,1)}}},{key:"sortColumn",value:function(t){this._viewControls.sortField===t?this._viewControls.sortDirection="desc"===this._viewControls.sortDirection?"asc":"desc":(this._viewControls.sortField=t,this._viewControls.sortDirection="asc")}},{key:"loadResultLogs",value:function(t){var e=this,n=this.projectService.getResultLogs(t).subscribe(function(i){n.unsubscribe();var r=i.success.split("\n").map(function(t){return t.split("\t")}),a=r[0];e.resultTaskLogs[t]=r.slice(1).map(function(t,e){var n={index:e};return t.forEach(function(t,e){return n[a[e]]=t}),new B(n)}).filter(function(t){return""!==t.process||"undefined"!==t.taskName})})}},{key:"deleteResult",value:function(t,e){var n=this;this._viewControls.isResultDeleting=!0,t.status=4;var i=this.projectService.deleteResult(t).subscribe(function(){i.unsubscribe(),n._viewControls.isResultDeleting=!1})}},{key:"batchDeleteResult",value:function(t){this.selectedList=[];var e=this.projectService.batchRemoveResult(t,this.currentProject.id).subscribe(function(){return e.unsubscribe()})}},{key:"stopResult",value:function(t,e){var n=this.projectService.stopResult(t).subscribe(function(){return n.unsubscribe()})}},{key:"batchStopResults",value:function(t){this.selectedList=[];var e=this.projectService.batchStopResult(t,this.currentProject.id).subscribe(function(){return e.unsubscribe()})}},{key:"stopResultDialog",value:function(t){var e=this,n=this.dialog.open(V.a,{disableClose:!1});void 0!==t?(n.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to stop the processes <strong>'.concat(t.name,"</strong>?</h4>"),desc:'<span class="text-danger">This will stop the processes, name: <b>'.concat(t.name,"</b><br>This cannot be undone. Make sure this is something you really want to do!</span><br>")}),n.afterClosed().subscribe(function(n){n&&e.stopResult(t,n)})):(n.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to stop the selected\''.concat(this.selectedList.length,"' result(s)?</h4>"),desc:'<span class="text-danger">This action will stop these tasks and cannot be undone.Make sure this is something you really want to do!</span><br>'}),n.afterClosed().subscribe(function(t){t&&e.batchStopResults(e.selectedList)}))}},{key:"deleteResultDialog",value:function(t){var e=this,n=this.dialog.open(V.a,{disableClose:!1});void 0!==t?(n.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to delete the result <strong>'.concat(t.name,"</strong>?</h4>"),desc:'<span class="text-danger">This will delete the result, name: <b>'.concat(t.name,"</b>, and all the associated outputs. <br>This cannot be undone. Make sure this is something you really want to do!</span><br>")}),n.afterClosed().subscribe(function(n){n&&e.deleteResult(t,n)})):(n.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to delete the selected\''.concat(this.selectedList.length,"' result(s)?</h4>"),desc:'<span class="text-danger">This action will delete these results and all their associated outputs. <br>This cannot be undone. Make sure this is something you really want to do!</span><br>'}),n.afterClosed().subscribe(function(t){t&&e.batchDeleteResult(e.selectedList)}))}},{key:"toggleRow",value:function(t,e){this.expandedResults.has(t)?this.expandedResults.delete(t):(this.expandedResults.add(t),this.loadingResultInfo(t))}},{key:"sortData",value:function(t){var e="createdAt";switch(t.active){case"resultName":e="name";break;case"resultPrefix":e="prefix";break;case"resultSuffix":e="suffix";break;case"resultStatus":e="status";break;case"resultType":e="type";break;case"resultCreationTime":e="createdAt";break;case"resultOwner":e="owner"}t.direction?(this._viewControls.sortDirection=t.direction,this._viewControls.sortField=e):(this._viewControls.sortDirection="desc",this._viewControls.sortField="createdAt")}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(t){return t.unsubscribe()})}}]),t}(),Kr.\u0275fac=function(t){return new(t||Kr)(w.Ob(q.a),w.Ob(X.a),w.Ob(A.c),w.Ob(A.a),w.Ob(G.b),w.Ob(H.a),w.Ob(W.a))},Kr.\u0275cmp=w.Ib({type:Kr,selectors:[["project-result-list"]],decls:41,vars:13,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[1,"row"],[1,"col-md-2"],[1,"col-md-9"],[2,"text-indent","36px","word-break","break-all","width","100%"],[2,"text-indent","36px"],["class","container-fluid",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[4,"ngIf"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"col-12"],["tableWidth",""],[2,"background-color","rgba(255,255, 255, 0.7)","border","thin solid darkgray",3,"length","pageSize","pageIndex","pageSizeOptions","page"],[1,"table-responsive",2,"width","100%"],["mat-table","","multiTemplateDataRows","","matSort","",1,"table","table-hover","table-striped","table-bordered",3,"dataSource","matSortChange"],["matColumnDef","resultCheckbox"],["mat-header-cell","","class","align-middle text-center","style","padding: 2px;",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-center","style","padding: 2px;",4,"matCellDef"],["matColumnDef","resultPrefix"],["mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultName"],["mat-header-cell","","mat-sort-header","","class","align-middle  text-left",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-left px-2",4,"matCellDef"],["matColumnDef","resultType"],["style","width: 30px;","mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["style","width: 30px;","mat-cell","","class","align-middle text-right",4,"matCellDef"],["matColumnDef","resultSuffix"],["mat-header-cell","","mat-sort-header","","class","align-middle  text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-left",4,"matCellDef"],["matColumnDef","resultStatus"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","resultCreationTime"],["matColumnDef","resultOwner"],["matColumnDef","resultDetail"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1);","class","px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","result-detail-row",4,"matRowDef","matRowDefColumns"],[1,"fa","fa-angle-double-right","ml-4","fa-lg"],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click"],["mat-header-cell","",1,"align-middle","text-center",2,"padding","2px"],[3,"checked","indeterminate","change"],["allCheckBox",""],["mat-cell","",1,"align-middle","text-center",2,"padding","2px"],["color","primary",3,"checked","change","click"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-right"],[1,"text-muted"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-left"],["mat-cell","",1,"align-middle","text-left","px-2"],["mat-icon-button","","color","primary","matTooltip","Result Page",3,"routerLink","queryParams",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Proxy Page",3,"routerLink","queryParams",4,"ngIf"],[1,"ml-3",3,"routerLink"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],["mat-icon-button","","color","primary","matTooltip","Result Page",3,"routerLink","queryParams"],[1,"fas","fa-scroll","fa-fw","fa-lg"],["mat-icon-button","","color","primary","matTooltip","Proxy Page",3,"routerLink","queryParams"],[1,"fas","fa-network-wired","fa-fw","fa-lg"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center",2,"width","30px"],["mat-cell","",1,"align-middle","text-right",2,"width","30px"],[1,"col-md-9",3,"ngSwitch"],["class","fas fa-cogs fa-fw",4,"ngSwitchCase"],["class","fas fa-cog fa-fw",4,"ngSwitchCase"],["class","fas fa-puzzle-piece fa-fw",4,"ngSwitchCase"],["class","fas fa-server fa-fw",4,"ngSwitchCase"],[1,"fas","fa-cogs","fa-fw"],[1,"fas","fa-cog","fa-fw"],[1,"fas","fa-puzzle-piece","fa-fw"],[1,"fas","fa-server","fa-fw"],["mat-cell","",1,"align-middle","text-left"],["mat-cell","",1,"align-middle","text-center"],[3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],[1,"text-info"],["aria-hidden","true",1,"fas","fa-hourglass-half","fa-fw"],[1,"text-primary"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],[1,"text-warning"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],["mat-cell","",1,"px-3",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"result-details","my-3"],[1,"fas","fa-angle-right","mr-2"],[3,"theResult","currentUser"],[2,"width","100%",3,"selectedIndex","selectedTabChange"],["label","Standard output"],["matTabContent",""],["label","Standard error"],["mat-tab-label",""],["mat-button","",3,"click"],[1,"fas","fa-sync","fa-fx",2,"color","green"],[2,"width","100%","overflow","auto"],[3,"taskLogs","resultID"],[3,"text",4,"ngIf"],[3,"text"],[3,"click"],[3,"color","mode","value","bufferValue"],["style","width: 100%;",3,"currentProject","currentResult","taskID2Task",4,"ngIf"],[2,"width","100%",3,"currentProject","currentResult","taskID2Task"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"result-detail-row"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"chi-rbtn",3,"routerLink"],[1,"far","fa-file","fa-fw"],[1,"chi-rbtn-content"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],[1,"fa","fa-play","fa-fw"]],template:function(t,e){1&t&&(w.Ub(0,"ol",0),w.Ub(1,"li",1),w.Ub(2,"a",2),w.Lc(3,"Home"),w.Tb(),w.Tb(),w.Ub(4,"li",1),w.Ub(5,"a",2),w.Lc(6,"Project List"),w.Tb(),w.Tb(),w.Ub(7,"li",1),w.Jc(8,qi,3,4,"a",3),w.Tb(),w.Jc(9,Hi,5,6,"li",4),w.Jc(10,Gi,2,0,"li",4),w.Tb(),w.Ub(11,"div",5),w.Ub(12,"h3",6),w.Lc(13,"Results in the Project: "),w.Tb(),w.Pb(14,"br"),w.Pb(15,"br"),w.Ub(16,"div",7),w.Ub(17,"div",8),w.Ub(18,"strong"),w.Lc(19,"Project name"),w.Tb(),w.Tb(),w.Ub(20,"div",9),w.Ub(21,"span",10),w.Lc(22),w.Tb(),w.Tb(),w.Tb(),w.Pb(23,"br"),w.Ub(24,"div",7),w.Ub(25,"div",8),w.Ub(26,"strong"),w.Lc(27,"Project description"),w.Tb(),w.Tb(),w.Ub(28,"div",9),w.Ub(29,"span",10),w.Lc(30),w.Tb(),w.Tb(),w.Tb(),w.Pb(31,"br"),w.Ub(32,"div",7),w.Ub(33,"div",8),w.Ub(34,"strong"),w.Lc(35,"Number of results"),w.Tb(),w.Tb(),w.Ub(36,"div",9),w.Ub(37,"span",11),w.Lc(38),w.Tb(),w.Tb(),w.Tb(),w.Tb(),w.Jc(39,Er,39,22,"div",12),w.Jc(40,Qr,17,11,"div",13)),2&t&&(w.Cb(2),w.nc("routerLink",w.qc(11,ia)),w.Cb(3),w.nc("routerLink",w.qc(12,ra)),w.Cb(3),w.nc("ngIf",e.currentProject),w.Cb(1),w.nc("ngIf",e.currentProject),w.Cb(1),w.nc("ngIf",!e.currentProject),w.Cb(12),w.Mc(null!=e.currentProject&&e.currentProject.name?null==e.currentProject?null:e.currentProject.name:"Unnamed"),w.Cb(8),w.Mc(null!=e.currentProject&&e.currentProject.desc?null==e.currentProject?null:e.currentProject.desc:"No description"),w.Cb(8),w.Oc("",null==e.currentProject?null:e.currentProject.resultNumber," record(s), (",null==e.currentProject?null:e.currentProject.results.length," including intermediate results)"),w.Cb(1),w.nc("ngIf",e.currentProject),w.Cb(1),w.nc("ngIf",e.currentProject))},directives:[A.f,o.n,k.a,h.n,m.a,h.c,h.i,h.b,h.k,h.m,u.b,p.a,h.h,M.a,h.a,m.b,u.a,v.a,o.p,o.q,ht,g.c,g.a,g.b,g.d,re,ae.a,D,me,h.j,h.l],pipes:[o.v],styles:[".result-details[_ngcontent-%COMP%]{display:none;overflow:hidden}tr.result-detail-row[_ngcontent-%COMP%]{height:0;width:100%}[_nghost-%COMP%]     .mat-sort-header-container{display:flex;justify-content:center}"],data:{animation:[$.a,Object(vt.m)("detailExpand",[Object(vt.j)("collapsed",Object(vt.k)({height:"0px",padding:"0px",minHeight:"0",display:"none"})),Object(vt.j)("expanded",Object(vt.k)({height:"*",padding:"5px",display:"block"})),Object(vt.l)("expanded <=> collapsed",Object(vt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),Kr),canActivate:[Vn.a]},{path:":resultId/info",component:zn,canActivate:[Vn.a]},{path:"activities",component:zi,canActivate:[Vn.a]}]),sa=[],ca=a("Bchi"),oa=((Zr=function t(){s(this,t)}).\u0275fac=function(t){return new(t||Zr)},Zr.\u0275mod=w.Mb({type:Zr}),Zr.\u0275inj=w.Lb({providers:[],imports:[[o.c,A.g,d.b,v.b]]}),Zr),la=a("5m7+"),ua=((ta=function t(){s(this,t)}).\u0275fac=function(t){return new(t||ta)},ta.\u0275mod=w.Mb({type:ta}),ta.\u0275inj=w.Lb({providers:[],imports:[[o.c,l.d,A.g,h.o,m.c,k.b,G.f,u.c,b.c,O]]}),ta),ba=a("BBfw"),da=((na=function t(){s(this,t)}).\u0275fac=function(t){return new(t||na)},na.\u0275mod=w.Mb({type:na}),na.\u0275inj=w.Lb({providers:[],imports:[[o.c,l.d,v.b]]}),na),fa=((ea=function t(){s(this,t)}).\u0275fac=function(t){return new(t||ea)},ea.\u0275mod=w.Mb({type:ea}),ea.\u0275inj=w.Lb({providers:[sa],imports:[[o.c,l.d,f.b,g.g,u.c,b.c,d.b,p.b,h.o,m.c,v.b,M.b,ua,la.a,_.a,k.b,O,da,ca.a,oa,ba.a,aa]]}),ea)},nNey:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n("tyNb"),r=n("ofXK"),a=n("3Pt+"),c=n("bTqV"),o=n("Wp6s"),l=n("A5z7"),u=n("fXoL"),b=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({providers:[],imports:[[r.c,a.d,i.g,c.c,o.h,l.e]]}),t}()}}])}();