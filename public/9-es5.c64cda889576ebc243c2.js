!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e){return new u(e)}function s(e){return function(){return new o(e.apply(this,arguments))}}function o(e){var t,r;function n(t,r){try{var a=e[t](r),s=a.value,o=s instanceof u;Promise.resolve(o?s.wrapped:s).then(function(e){o?n("return"===t?"return":"next",e):i(a.done?"return":"normal",e)},function(e){n("throw",e)})}catch(l){i("throw",l)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,i){return new Promise(function(a,s){var o={key:e,arg:i,resolve:a,reject:s,next:null};r?r=r.next=o:(t=r=o,n(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}function u(e){this.wrapped=e}o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)},(self.webpackChunkbdp_client=self.webpackChunkbdp_client||[]).push([[9],{26009:function(t,n,o){"use strict";o.r(n),o.d(n,{PageModule:function(){return Qt}});var u,l,c=o(61116),d=o(31041),g=o(84369),f=o(6489),p=o(9550),h=o(57173),v=o(22797),y=o(40994),x=o(92935),m=o(36278),b=o(13070),k=o(87672),P=o(39199),T=o(85078),Z=o(66431),w=o(75119),I=o(50144),A=o(16304),C=o(64762),F=o(44723),S=o(1270),q=o(78512),j=o(55959),_=o(66599),D=o(41887),R=o(47727),U=o(40878),M=function(e,t){return t.some(function(t){return e instanceof t})},N=new WeakMap,J=new WeakMap,O=new WeakMap,z=new WeakMap,Q=new WeakMap,B={get:function(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return J.get(e);if("objectStoreNames"===t)return e.objectStoreNames||O.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return V(e[t])},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function L(e){B=e(B)}function V(e){if(e instanceof IDBRequest)return t=e,(r=new Promise(function(e,r){var n=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(V(t.result)),n()},a=function(){r(t.error),n()};t.addEventListener("success",i),t.addEventListener("error",a)})).then(function(e){e instanceof IDBCursor&&N.set(e,t)}).catch(function(){}),Q.set(r,t),r;var t,r;if(z.has(e))return z.get(e);var n=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.apply(Y(this),r),V(N.get(this))}:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return V(t.apply(Y(this),r))}:function(e){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=(r=t).call.apply(r,[Y(this),e].concat(i));return O.set(s,e.sort?e.sort():[e]),V(s)}:(e instanceof IDBTransaction&&function(e){if(!J.has(e)){var t=new Promise(function(t,r){var n=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),n()},a=function(){r(e.error),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});J.set(e,t)}}(e),M(e,u||(u=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,B):e);var t}(e);return n!==e&&(z.set(e,n),Q.set(n,e)),n}var Y=function(e){return Q.get(e)},K=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],H=new Map;function G(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(H.get(t))return H.get(t);var r=t.replace(/FromIndex$/,""),n=t!==r,i=E.includes(r);if(r in(n?IDBIndex:IDBObjectStore).prototype&&(i||K.includes(r))){var a,s=(a=(0,A.Z)(regeneratorRuntime.mark(function e(t){var a,s,o,u,l,c,d,g=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,i?"readwrite":"readonly"),o=s.store,u=g.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=g[c];if(n&&(o=o.index(l.shift())),d=(a=o)[r].apply(a,l),e.t0=i,!e.t0){e.next=9;break}return e.next=9,s.done;case 9:return e.abrupt("return",d);case 10:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)});return H.set(t,s),s}}}L(function(e){return{get:function(t,r,n){return G(t,r)||e.get(t,r,n)},has:function(t,r){return!!G(t,r)||e.has(t,r)}}});var W=["continue","continuePrimaryKey","advance"],X={},ee=new WeakMap,te=new WeakMap,re={get:function(e,t){if(!W.includes(t))return e[t];var r=X[t];return r||(r=X[t]=function(){var e;ee.set(this,(e=te.get(this))[t].apply(e,arguments))}),r}};function ne(){return ie.apply(this,arguments)}function ie(){return(ie=s(regeneratorRuntime.mark(function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this,e.t0=r instanceof IDBCursor,e.t0){e.next=6;break}return e.next=5,a((t=r).openCursor.apply(t,i));case 5:r=e.sent;case 6:if(r){e.next=8;break}return e.abrupt("return");case 8:r=r,n=new Proxy(r,re),te.set(n,r),Q.set(n,Y(r));case 11:if(!r){e.next=20;break}return e.next=14,n;case 14:return e.next=16,a(ee.get(n)||r.continue());case 16:r=e.sent,ee.delete(n);case 18:e.next=11;break;case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ae(e,t){return t===Symbol.asyncIterator&&M(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&M(e,[IDBIndex,IDBObjectStore])}L(function(e){return{get:function(t,r,n){return ae(t,r)?ne:e.get(t,r,n)},has:function(t,r){return ae(t,r)||e.has(t,r)}}});var se=o(78485),oe=o(42693),ue=o(35366),le=o(44519),ce=o(52572),de=o(42066),ge=o(49368),fe=o(41160),pe=o(48355),he=function(){var e=function(){function e(t,n,i,a,s,o,u,l){var c=this;r(this,e),this.dataService=t,this.projectService=n,this.infoService=i,this.taskService=a,this.accountService=s,this.systemService=o,this.http=u,this.router=l,this.client$=new q.X(null),this.currentProject$=new q.X(null),this.currentResult$=new q.X(null),this.currentDataFile$=new q.X(null),this.currentPackages$=new q.X([]),this.currentPackageID="",this.currentUser$=new q.X(null),this.currentIndexedDB$=new q.X(null),this.entryType$=new q.X(null),this.currentPageKey$=new q.X(null),this.requestNavigation$=new j.xQ,this.isFullPage$=new q.X(!1),this.showRightMenu$=new q.X(!0),this.pageMode$=new q.X("page"),this.refresh$=new j.xQ,this.logItems=[],this.currentPageKey$.subscribe(function(e){if(e&&e.split){var t=e.split(":");Array.isArray(t)&&2===t.length&&(c.currentPackageID=t[0])}})}return i(e,[{key:"_logItem",value:function(e){var t={};t[e.type]=e,this.logItems.push(t)}},{key:"_sleep",value:function(e){return(0,A.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){return setTimeout(t,e)}));case 1:case"end":return t.stop()}},t)}))()}},{key:"sendToClient",value:function(e){e.type=e.type||"received",this._logItem(e);var t=this.client$.getValue();if(t)try{t.nativeElement.contentWindow.postMessage(e,"*")}catch(r){try{t.nativeElement.contentWindow.postMessage(JSON.parse(JSON.stringify(e)),"*")}catch(n){console.log(n)}}}},{key:"_requestIDB",value:function(e,t,r,n){return(0,A.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=t||1,console.log("open database: ".concat(e)),i.next=4,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.blocked,i=r.upgrade,a=r.blocking,s=indexedDB.open(e,t),o=V(s);return i&&s.addEventListener("upgradeneeded",function(e){i(V(s.result),e.oldVersion,e.newVersion,V(s.transaction))}),n&&s.addEventListener("blocked",function(){return n()}),a&&o.then(function(e){return e.addEventListener("versionchange",a)}).catch(function(){}),o}(e,t,{upgrade:function(e){if(r)for(var t=0,i=Object.keys(r);t<i.length;t++){var a=i[t],s=e.createObjectStore(a,r[a]);if(n&&n[a]){var o=n[a];s.createIndex(o.indexName,o.keyPath,o.objectParameters)}}}});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}},i)}))()}},{key:"_changeMode",value:function(e){var t=this.pageMode$.getValue();void 0===e&&(e="list"===t?"page":"list"),this.pageMode$.next("list"===e?"list":"page")}},{key:"_toggleFullPage",value:function(e){var t=!this.isFullPage$.getValue();this.isFullPage$.next(void 0===e?t:e)}},{key:"isValidAPI",value:function(e){return!(["constructor","_logItem","sendToClient","_sleep","_changeMode","_toggleFullPage"].indexOf(e)>=0)&&0!==e.indexOf("_")&&void 0!==this[e]&&"function"==typeof this[e]}},{key:"historyBack",value:function(){window.history.go(-1)}},{key:"historyForward",value:function(){window.history.go(1)}},{key:"log",value:function(e,t){this.logItems.push({log:JSON.parse(JSON.stringify(t))})}},{key:"handshake",value:function(e,t){this.sendToClient({id:e,call:"handshake"})}},{key:"createProject",value:function(e,t){var r=this,n=this.projectService.createProject(t.projectName,t.projectDesc,t.packages,t.isPublic).subscribe(function(t){return n.unsubscribe(),t.isError?(r.sendToClient({id:e,call:"createProject",type:"error",value:JSON.stringify(t.errors)}),r.sendToClient({call:"createProject",id:e,value:null})):t.success&&t.success.getModel?r.sendToClient({call:"createProject",id:e,type:"recieved",value:t.success.getModel()}):(r.sendToClient({id:e,call:"createProject",type:"error",value:"Failed to get the newly created project."}),void r.sendToClient({call:"createProject",id:e,value:null}))})}},{key:"importFilesToProject",value:function(e,t){var r=this,n=this.projectService.importFilesToProject(t.projectID,t.fileIDs,!!t.copy,!0).subscribe(function(t){n.unsubscribe(),t.isError?(r.sendToClient({id:e,call:"importFilesToProject",type:"error",value:JSON.stringify(t.errors)}),r.sendToClient({id:e,call:"importFilesToProject",value:[]})):r.sendToClient({id:e,call:"importFilesToProject",value:t.success.map(function(e){return e&&e.getModel?e.getModel():e})})})}},{key:"getAuthToken",value:function(e){var t=this,r=this.accountService.getAuthToken().subscribe(function(n){return r.unsubscribe(),t.sendToClient(n.isError?{call:"getAuthToken",id:e,value:null}:{call:"getAuthToken",id:e,value:n.success})})}},{key:"listProjects",value:function(e,t){var r=this,n=t.type,i=this.projectService["shared"===n?"getSharedProjects":"public"===n?"getPublicProjects":"getProjects"](t.pageIndex,t.pageSize).subscribe(function(n){if(i.unsubscribe(),n.isError)return r.sendToClient({id:e,call:"listProjects",type:"error",value:JSON.stringify(n.errors)}),r.sendToClient({id:e,call:"listProjects",value:{recors:[],totalPage:0,pageIndex:t.pageIndex,totalCount:0,pageSize:t.pageSize}});var a=n.success;r.sendToClient({id:e,call:"listProjects",value:{records:Array.isArray(a.records)?a.records.map(function(e){return e.getModel()}):[],totalPage:a.totalPage,pageIndex:a.pageIndex,totalCount:a.totalCount,pageSize:a.pageSize}})})}},{key:"listFiles",value:function(e){var t=this.currentProject$.getValue();this.sendToClient({call:"listFiles",id:e,value:t&&Array.isArray(t.dataFiles)?t.dataFiles.map(function(e){return e.getModel()}):[]})}},{key:"listResults",value:function(e){var t=this.currentProject$.getValue();this.sendToClient({call:"listResults",id:e,value:t&&Array.isArray(t.results)?t.results.map(function(e){return e.getModel(t.dataFiles)}):[]})}},{key:"listTasks",value:function(e,t){var r=this,n=this.taskService.getTasks(t.packageID||this.currentPackageID,t.only).subscribe(function(t){n.unsubscribe(),r.sendToClient({id:e,call:"listTasks",type:"received",value:Array.isArray(t.success)?t.success.map(function(e){return e.getModel()}):[]})})}},{key:"listPackages",value:function(e){var t=this,r=this.projectService.getRelatedPackages().subscribe(function(n){r.unsubscribe(),t.sendToClient({id:e,call:"listPackages",type:"received",value:Array.isArray(n.success)?n.success.map(function(e){return e.getModel()}):[]})})}},{key:"listAllTasks",value:function(e){var t=this,r=this.currentProject$.getValue();if(!r)return this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."}),void this.sendToClient({id:e,call:"listAllTasks",type:"received",value:[]});var n=r.packages;if(Array.isArray(n))var i=this.taskService.getTasks(n.map(function(e){return e.id}).join(",")).subscribe(function(r){i.unsubscribe(),t.sendToClient({id:e,call:"listAllTasks",type:"received",value:Array.isArray(r.success)?r.success.map(function(e){return e.getModel()}):[]})})}},{key:"getCurrentUserInfo",value:function(e){var t=this.currentUser$.getValue();this.sendToClient({id:e,call:"getCurrentUserInfo",type:"received",value:t&&t.getModel?t.getModel():{}})}},{key:"getCurrentFileInfo",value:function(e){var t=this.currentDataFile$.getValue();this.sendToClient({id:e,call:"getCurrentFileInfo",type:"received",value:t?t.getModel():null})}},{key:"getCurrentResultInfo",value:function(e){var t=this.currentResult$.getValue();if(!t)return this.sendToClient({id:e,call:"getCurrentResultInfo",type:"received",value:null});var r=this.currentProject$.getValue();if(!r)return this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."}),void this.sendToClient({id:e,call:"listAllTasks",type:"received",value:null});var n=t.getModel(r.dataFiles);if("workflow"!==t.type)this.sendToClient({id:e,call:"getCurrentResultInfo",type:"received",value:n});else{for(var i=r.results.map(function(e){return e.id}),a=[],s=t.children,o=0;o<s.length;o++)if(a[o]=[],Array.isArray(s[o]))for(var u=0;u<s[o].length;u++){var l=i.indexOf(s[o][u]);a[o][u]=l>=0&&r.results[l]&&r.results[l].parent===t.id?r.results[l].getModel(r.dataFiles):{}}n.children=a,this.sendToClient({id:e,call:"getCurrentResultInfo",type:"received",value:n})}}},{key:"getCurrentPackageInfo",value:function(e){var t=this.currentPackages$.getValue(),r=this.currentPackageID,n=t.filter(function(e){return e.id===r});this.sendToClient({id:e,call:"getCurrentPackageInfo",type:"received",value:n.length>0?n[0].getModel():{}})}},{key:"getCurrentProjectInfo",value:function(e){var t=this.currentProject$.getValue();this.sendToClient({id:e,call:"getCurrentProjectInfo",type:"received",value:t?t.getModel():{}})}},{key:"getProjectInfo",value:function(e,t){var r=this,n=this.projectService.loadProjectInfo(t.projectID).subscribe(function(t){return n.unsubscribe(),t.isError?(r.sendToClient({id:e,call:"getProjectInfo",type:"error",value:JSON.stringify(t.isError)}),r.sendToClient({id:e,call:"getProjectInfo",value:null})):r.sendToClient({id:e,call:"getProjectInfo",value:t.success.getModel()})})}},{key:"getTaskArguments",value:function(e,t){var r=this,n=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(function(i){if(n.unsubscribe(),i.isError)return r.sendToClient({id:e,call:"getTaskArguments",type:"error",value:JSON.stringify(i.errors)});var a=t.identifier,s=i.success.filter(function(e){return e.id===a||e.key===a})[0];if(!s)return r.sendToClient({id:e,call:"getTaskArguments",type:"error",value:"There is no such task with the id/key: ".concat(a)}),r.sendToClient({id:e,call:"getTaskArguments",type:"received",value:[]});r.sendToClient({id:e,call:"getTaskArguments",type:"received",value:s.arguments.map(function(e){return e.getModel()})})})}},{key:"getTaskInfo",value:function(e,t){var r=this,n=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(function(i){if(n.unsubscribe(),i.isError)return r.sendToClient({id:e,call:"getTaskInfo",type:"error",value:JSON.stringify(i.errors)});var a=t.identifier,s=i.success.filter(function(e){return e.id===a||e.key===a})[0];if(!s)return r.sendToClient({id:e,call:"getTaskInfo",type:"error",value:"There is no such task with the id/key: ".concat(a)}),r.sendToClient({id:e,call:"getTaskInfo",type:"received",value:{}});r.sendToClient({id:e,call:"getTaskInfo",type:"received",value:s.getModel()})})}},{key:"getTaskInputGuide",value:function(e,t){var r=this,n=t.identifier,i=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(function(t){if(i.unsubscribe(),t.isError)return r.sendToClient({id:e,call:"getTaskInputGuide",type:"error",value:JSON.stringify(t.errors)});var a=t.success,s=r.currentProject$.getValue(),o=a.filter(function(e){return e.id===n||e.key===n})[0];if(!o)return r.sendToClient({id:e,call:"getTaskInputGuide",type:"error",value:"There is no such task with the id/key: ".concat(n)}),r.sendToClient({id:e,call:"getTaskInputGuide",type:"received",value:[]});var u=r.taskService.taskValidInputs$.subscribe(function(t){u.unsubscribe();var n=o.arguments.map(function(e){return"outFile"===e.type?null:e.getModel()});t.forEach(function(e){var t=e.index;n[t]&&"inFile"===n[t].type&&(n[t].candidates=e.models.map(function(e){return e.getModel()}))});var i=o.arguments.filter(function(e){return"outFile"===e.type}).map(function(e){return e.getModel()});r.sendToClient({id:e,call:"getTaskInputGuide",type:"received",value:{inputs:n,outputs:i}})});s&&r.taskService.getValidInputFile(o.id,s.id)})}},{key:"executeTask",value:function(e,t){var r=this,n=t.identifier,i=t.resultInfo,a=t.inputs,s=t.outputs,o=[],u=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(function(t){u.unsubscribe();var l=t.success,c=r.currentProject$.getValue();if(c){var d=l.filter(function(e){return e.id===n||e.key===n})[0];if(!d)return r.sendToClient({id:e,call:"executeTask",type:"error",value:"There is no such task with the id/key: ".concat(n)}),r.sendToClient({id:e,call:"executeTask",type:"received",value:{}});if(a.length!==d.arguments.length)return r.sendToClient({id:e,call:"executeTask",type:"error",value:"The length of inputs does not match the length of the task arguments."}),r.sendToClient({id:e,call:"executeTask",type:"received",value:{}});if(d.arguments.forEach(function(e,t){switch(e.type){case"static":a[t]=e.default[0];break;case"value":a[t]=String(null==a[t]?e.default[0]||"":a[t]||"");break;case"list":Array.isArray(a[t])||(a[t]=[a[t]]),a[t]=a[t].filter(function(t){return e.list.indexOf(t)>=0}),e.multiple||(a[t]=[a[t][0]]),0===a[t].filter(function(e){return null!=e}).length&&o.push({index:t,error:"No valid items to select"});break;case"inFile":if(!c)break;var r=c.dataFiles.filter(function(e){return e.id===a[t]})[0];if(r){var n=e.isValidFile(r);n.result||o.push({index:t,error:n.reason})}else e.optional||o.push({index:t,error:"No valid file selected"});break;case"outFile":a[t]=null}}),o.length>0)return r.sendToClient({id:e,call:"executeTask",type:"error",value:o}),r.sendToClient({id:e,call:"executeTask",type:"received",value:null});i.prefix=String(i.prefix||""),i.suffix=String(i.suffix||""),d.arguments.filter(function(e){return"outFile"===e.type}).forEach(function(e,t){s[t]?(s[t].name=void 0!==s[t].name?String(s[t].name||""):e.name,s[t].desc=void 0!==s[t].desc?String(s[t].desc||""):"",s[t].prefix=void 0!==s[t].prefix?String(s[t].prefix):i.prefix,s[t].suffix=void 0!==s[t].suffix?String(s[t].suffix):i.suffix):s[t]={name:e.name,desc:"",prefix:i.prefix,suffix:i.suffix}}),i.name=i&&void 0!==i.name?String(i.name):"Result from ".concat(d.name),i.desc=i&&void 0!==i.desc?String(i.desc):"",i.name=i.name.slice(0,160),i.desc=i.desc.slice(0,500),i.prefix=i.prefix.slice(0,160),i.suffix=i.suffix.slice(0,160);var g=r.projectService.createResult(d.id,{run:!0,projectID:c.id,inputs:a,outputs:s,name:i.name,desc:i.desc,prefix:i.prefix||"",suffix:i.suffix||""}).subscribe(function(t){return g.unsubscribe(),t.isError?(t.errors.forEach(function(t){return r.sendToClient({id:e,call:"executeTask",type:"error",value:t})}),r.sendToClient({id:e,call:"executeTask",type:"received",value:{}})):(c=r.currentProject$.getValue(),r.sendToClient({id:e,call:"executeTask",type:"received",value:t.success.getModel(c?c.dataFiles:[])}))})}})}},{key:"updateResultInfo",value:function(e,t){var r=this,n=this.currentProject$.getValue();if(!n)return this.sendToClient({id:e,call:"updateResultInfo",type:"error",value:"No project to update the Result information."});var i=t.resultID,a=t.newInfo,s=n.results.filter(function(e){return e.id===i})[0];if(!s)return this.sendToClient({id:e,call:"updateResultInfo",type:"error",value:"Cannot find any Result with this Result ID (".concat(i,") to update its information.")});var o=new F.x({id:i,name:a.name||s.name,prefix:a.prefix||s.prefix||"",suffix:a.suffix||s.suffix||"",desc:a.desc||s.desc}),u=this.projectService.updateResultInfo(o).subscribe(function(t){return u.unsubscribe(),t.isError?t.errors.forEach(function(t){return r.sendToClient({id:e,call:"updateResultInfo",type:"error",value:t})}):r.sendToClient({id:e,call:"updateResultInfo",type:"received",value:t.success&&t.success.getModel?t.success.getModel(n.dataFiles):{}})})}},{key:"stopResult",value:function(e,t){var r=this,n=this.projectService.stopResult(new F.x({id:t.resultID})).subscribe(function(t){n.unsubscribe();var i=r.currentProject$.getValue();return t.isError?t.errors.forEach(function(t){return r.sendToClient({id:e,call:"stopResult",type:"error",value:t})}):r.sendToClient({id:e,call:"stopResult",type:"received",value:t.success&&t.success.getModel?t.success.getModel(i?i.dataFiles:[]):{}})})}},{key:"deleteResult",value:function(e,t){var r=this,n=this.projectService.deleteResult(new F.x({id:t.resultID})).subscribe(function(t){n.unsubscribe();var i=r.currentProject$.getValue();return t.isError?t.errors.forEach(function(t){return r.sendToClient({id:e,call:"deleteResult",type:"error",value:t})}):r.sendToClient({id:e,call:"deleteResult",type:"received",value:t.success&&t.success.getModel?t.success.getModel(i?i.dataFiles:[]):{}})})}},{key:"getFileBlob",value:function(e,t){var r=this,n=t.fileID,i=t.subPath||void 0,a=this.currentProject$.getValue();if(a){var s=a.dataFiles.filter(function(e){return e.id===n})[0];i&&"Folder"!==s.format&&(i=void 0);var o=this.dataService.downloadAsFileBlob(n,i).pipe((0,_.b)(function(t){return r.sendToClient({id:e,call:"getFileBlob",type:"event",value:t})}),(0,D.Z)(),(0,R.K)(function(t){return console.log(t),r._logItem({id:e,call:"getFileBlob",type:"log",value:t.toString()}),(0,U.of)({body:void 0})})).subscribe(function(t){o.unsubscribe(),r.sendToClient({id:e,call:"getFileBlob",type:"received",value:t.body})})}else this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."})}},{key:"getDownloadLink",value:function(e,t){var r=t.fileID,n=t.subPath,i=t.authToken,a=this.currentProject$.getValue();if(a){var s=a.dataFiles.filter(function(e){return e.id===r})[0];if(!s)return this._logItem({id:e,call:"getDownloadLink",type:"error",value:"This DataFile ID: ".concat(r," is invalid.")}),this.sendToClient({id:e,call:"getDownloadLink",type:"received",value:null});if(i){if("Folder"===s.format&&n){var o=n.split("/").map(encodeURIComponent).join("/");return this.sendToClient({call:"getDownloadLink",id:e,value:"/data/static/".concat(r,"/").concat(o,"?authToken=").concat(i)})}return this.sendToClient({call:"getDownloadLink",id:e,value:"/data/api/dataFile/".concat(r,"/download?authToken=").concat(i)})}return this._logItem({id:e,call:"getDownloadLink",type:"error",value:"The authToken is unset. You have to call getAuthToken() to get the authToken."}),this.sendToClient({call:"getDownloadLink",id:e,value:null})}this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."})}},{key:"globFilesInFolder",value:function(e,t){var r=this,n=t.fileID,i=this.currentProject$.getValue(),a=t.globbyExprs,s=!1;if(i){if(i.dataFiles.filter(function(e){return e.id===n&&"Folder"===e.format}).length>0||(this._logItem({id:e,call:"globFilesInFolder",type:"error",value:"This DataFile ID: ".concat(n," is not a folder")}),s=!0),Array.isArray(a)||(this._logItem({id:e,call:"globFilesInFolder",type:"error",value:"The globbyExprs is not an array."}),s=!0),s)return this.sendToClient({id:e,call:"globFilesInFolder",type:"received",value:null});var o=this.dataService.globbyFilesInFolder(n,a).subscribe(function(t){o.unsubscribe(),r.sendToClient({id:e,call:"globFilesInFolder",type:"received",value:t.success})})}else this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."})}},{key:"importFileFromPath",value:function(e,t){var r=this,n=this.currentProject$.getValue(),i=t.options,a=Array.isArray(i.tags)?i.tags:[];if(n)var s=this.projectService.importFromPath(t.path,n.id,t.makeSymbolicLink,i.name,i.desc,i.prefix,i.suffix,a,i.folder,i.keepFileName).subscribe(function(t){return s.unsubscribe(),t.isError?t.errors.forEach(function(t){return r.sendToClient({id:e,call:"importFileFromPath",type:"error",value:t})}):r.sendToClient({id:e,call:"importFileFromPath",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}})});else this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."})}},{key:"uploadFiles",value:function(e,t,r){var n=this,i=this.currentPackages$.getValue(),a=this.currentProject$.getValue(),s=t.options,o=[];if(a){Array.from(t.files).forEach(function(t,a){var u,l=String(1+a);switch(l){case"1":l+="st";break;case"2":l+="nd";break;case"3":l+="rd";break;default:l+="th"}if(!(t instanceof File||t instanceof Blob))return n.sendToClient({id:e,call:r||"uploadFiles",type:"error",value:"The "+l+" file has wrong type. Should be File or Blob type."});if(t instanceof File&&(u=i.map(function(e){return e.checkAllowedFormat(t.name)})),!u&&t instanceof Blob&&(u=i.map(function(e){return e.checkAllowedFormat(s.name+"."+s.format)})),0===(u=u.filter(function(e){return!!e})).length){var c=[].concat.apply([],i.map(function(e){return e.allowedFormats}));return n.sendToClient({id:e,call:r||"uploadFiles",type:"error",value:"The "+l+" file has wrong file extension. The allowed formats are: "+c.join(", ")})}o.push(t)});var u=Array.isArray(s.tags)?s.tags.map(function(e){return e.toLowerCase&&e.toLowerCase().replace(/[^a-zA-Z0-9\.\-\_]/g,"").trim()}):[],l=s.folderID,c=s.keepFileName;if(1!==a.dataFiles.filter(function(e){return e.id===l&&"Folder"===e.format}).length&&(c=void 0,l=void 0),0===o.length)return this.sendToClient({id:e,call:r||"uploadFiles",type:"error",value:"No File item to upload"});var d=this.dataService.uploadFiles(a.id,o,{name:s.name||"",prefix:s.prefix||"",suffix:s.suffix||"",folder:l||"",keepFileName:c||!0,desc:s.desc||"",format:s.format,tags:u}).pipe((0,_.b)(function(t){n.sendToClient({id:e,call:r||"uploadFiles",type:"event",value:t})}),(0,D.Z)(),(0,R.K)(function(t){return n._logItem({id:e,call:r||"uploadFiles",type:"log",value:t.toString()}),(0,U.of)({body:void 0})})).subscribe(function(t){if(d.unsubscribe(),t.body){var i=new se.j(t.body);i.isError&&(n.infoService.addMessages(i.errors),i.errors.forEach(function(t){return n.sendToClient({id:e,call:r||"uploadFiles",type:"error",value:t})})),n.sendToClient({id:e,call:r||"uploadFiles",type:"received",value:i.success.map(function(e){return new S.A(e).getModel()})})}})}else this.sendToClient({id:e,call:"listAllTasks",type:"error",value:"You have not selected a project as the current project."})}},{key:"uploadFileBlob",value:function(e,t){this.uploadFiles(e,{files:[t.fileBlob],options:{name:t.name,prefix:t.prefix,suffix:t.suffix,desc:t.desc,tags:t.tags,folderID:t.folderID,format:t.format||"",keepFileName:!!t.keepFileName}},"uploadFileBlob")}},{key:"createFolder",value:function(e,t){var r=this,n=this.currentProject$.getValue();if(!n)return this.sendToClient({id:e,call:"createFolder",type:"error",value:"No project to create the folder."});var i=t.name||"a folder",a=t.desc||"",s=t.prefix||"",o=t.suffix||"",u=Array.isArray(t.tags)?t.tags:[],l=this.projectService.createFolder(n.id,i,a,s,o,u,t.folderId,t.keepFileName).subscribe(function(t){return l.unsubscribe(),!t.isError&&r.sendToClient({id:e,call:"createFolder",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}})})}},{key:"updateFileInfo",value:function(e,t){var r=this,n=this.currentProject$.getValue();if(!n)return this.sendToClient({id:e,call:"updataFileInfo",type:"error",value:"No project to update the DataFile record."});var i=t.fileID,a=t.newInfo,s=n.dataFiles.filter(function(e){return e.id===i})[0];if(!s)return this.sendToClient({id:e,call:"updataFileInfo",type:"error",value:"Cannot find any DataFile with this file ID (".concat(i,") to update the information.")});if(Array.isArray(a.tags)){a.tags=a.tags.map(function(e){return"Folder"===e?e:e.toLowerCase().replace(/[^a-zA-Z0-9\.\-\_]/g,"")}).filter(function(e){return!!e});var o=a.tags.indexOf("Folder"),u=s.tags.indexOf("Folder");u>=0&&-1===o?a.tags.unshift("Folder"):-1===u&&o>=0&&a.tags.splice(o,1)}else a.tags=s.tags.slice();var l=new S.A({id:i,name:a.name||s.name,prefix:a.prefix||s.prefix,suffix:a.suffix||s.suffix,desc:a.desc||s.desc,tags:a.tags}),c=this.projectService.updateDataFileInfo(l).subscribe(function(t){return c.unsubscribe(),t.isError?t.errors.forEach(function(t){return r.sendToClient({id:e,call:"updataFileInfo",type:"error",value:t})}):r.sendToClient({id:e,call:"updataFileInfo",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}})})}},{key:"deleteFile",value:function(e,t){var r=this,n=this.projectService.deleteDataFile(new S.A({id:t.fileID})).subscribe(function(t){return n.unsubscribe(),t.isError?t.errors.forEach(function(t){return r.sendToClient({id:e,call:"deleteFile",type:"error",value:t})}):r.sendToClient({id:e,call:"deleteFile",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}})})}},{key:"_navigatePage",value:function(e,t,r,n){if(e){var i=this.currentProject$.getValue();i&&(r=r||"",!(n=n||this.currentPackageID)&&Array.isArray(i.packages)&&i.packages[0]&&i.packages[0].id&&(n=n||i.packages[0].id),r&&n&&(r=n+":"+r),r?this.requestNavigation$.next({itemID:e,type:t,pageKey:r}):"proxyPages"!==t&&"staticPages"!==t||this.requestNavigation$.next({itemID:e,type:t,pageKey:r}))}}},{key:"navigateToProjectList",value:function(e,t){t||(t={listType:"myProjects",pageSize:30,pageIndex:0}),this.router.navigate(["/project/list"],{queryParams:{listType:t.listType||"myProjects",pageSize:t.pageSize||30,pageIndex:t.pageIndex||0}})}},{key:"navigateToProjectPage",value:function(e,t){var r;this._navigatePage(null===(r=this.currentProject$.getValue())||void 0===r?void 0:r.id,"indexPages",t.pageKey,t.packageID)}},{key:"navigateToFilePage",value:function(e,t){this._navigatePage(t.fileID,"filePages",t.pageKey,t.packageID)}},{key:"navigateToResultPage",value:function(e,t){this._navigatePage(t.resultID,"resultPages",t.pageKey,t.packageID)}},{key:"navigateToProxyPage",value:function(e,t){this._navigatePage(t.resultID,"proxyPages",t.jobID)}},{key:"navigateToStaticPage",value:function(e,t){this._navigatePage(t.fileID,"staticPages",void 0)}},{key:"navigateToBdpDataFile",value:function(e,t){this.router.navigate(["/dataFile",t.fileID,"info"])}},{key:"navigateToBdpResult",value:function(e,t){this.router.navigate(["/result",t.resultID,"info"])}},{key:"navigateToBdpProject",value:function(e,t){this.router.navigate(["/project",t.projectID,"info"])}},{key:"listProxyJobs",value:function(e,t){var r=this,n=this.projectService.getProxyJobsByResultId(t.resultID).subscribe(function(t){n.unsubscribe(),r.sendToClient(t.isError?{id:e,call:"listProxyJobs",type:"received",value:[]}:{id:e,call:"listProxyJobs",type:"received",value:t.success})})}},{key:"openFileLink",value:function(e,t){return window.open("/dataFile/"+t.fileID+"/info","","width=1024,height=768"),this.sendToClient({id:e,call:"openFileLink",type:"received",value:t.fileID})}},{key:"openResultLink",value:function(e,t){return window.open("/result/"+t.resultID+"/info","","width=1024,height=768"),this.sendToClient({id:e,call:"openResultLink",type:"received",value:t.resultID})}},{key:"openProjectLink",value:function(e,t){return window.open("/project/"+t.projectID+"/info","","width=1024,height=768"),this.sendToClient({id:e,call:"openProjectLink",type:"received",value:t.projectID})}},{key:"openStaticLink",value:function(e,t){var r=this.currentProject$.getValue();if(r)if(r.dataFiles.filter(function(e){return e.status<=2&&"Folder"===e.format&&e.id===t.fileID})[0]){var n=t.subPath||"/";0!==n.indexOf("/")&&(n="/"+n),window.open("/data/static/".concat(t.fileID).concat(n),"","width=1024,height=768"),this.sendToClient({id:e,call:"openResultLink",type:"received",value:t.fileID})}else this.sendToClient({id:e,call:"openStaticLink",type:"error",value:"The DataFile id is invalid: ".concat(t.fileID,". The file must be a folder.")})}},{key:"requestHttp",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a,s,o,u,l,c,d,g,f,p,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.path.match(/^\//)){n.next=2;break}return n.abrupt("return",r.sendToClient({id:e,call:"requestHttp",type:"error",value:"Invalid path to request server. You are supposed to request paths which begins with '/'."}));case 2:if(i=t.method.toUpperCase(),a=t.httpOptions.queryParams||null,s=t.httpOptions.headers||null,o=new oe.LE,u=new oe.WM,a)for(l=Object.keys(a),c=0;c<l.length;c++)d=l[c],o=o.set(d,a[d]);if(s)for(g=Object.keys(s),f=0;f<g.length;f++)p=g[f],u=u.set(p,s[p]);h=r.http.request(i,t.path,{body:t.httpOptions.requestBody||null,headers:u,observe:t.httpOptions.observe,params:o,withCredentials:!0,reportProgress:!!t.httpOptions.reportProgress,responseType:t.httpOptions.responseType}).pipe((0,_.b)(function(t){return r.sendToClient({id:e,call:"requestHttp",type:"event",value:t})}),(0,D.Z)(),(0,R.K)(function(t){return r.sendToClient({id:e,call:"requestHttp",type:"error",value:"".concat(JSON.stringify(t))}),(0,U.of)(null)})).subscribe(function(t){h.unsubscribe(),r.sendToClient({id:e,call:"requestHttp",type:"received",value:t})});case 7:case"end":return n.stop()}},n)}))()}},{key:"requestDatabase",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a,s,o,u,l,c,d,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.entryType$.getValue(),u=r.currentPageKey$.getValue(),l=r.currentUser$.getValue()){n.next=3;break}return n.abrupt("return");case 3:return c="filePages"===o?null===(i=r.currentDataFile$.getValue())||void 0===i?void 0:i.id:"resultPages"===o?null===(a=r.currentResult$.getValue())||void 0===a?void 0:a.id:null===(s=r.currentProject$.getValue())||void 0===s?void 0:s.id,d="".concat(l.id,"-").concat(o,"-").concat(c,"-").concat(u),n.prev=4,n.next=7,r._requestIDB(d,t.version,t.objectStoreSettings,t.creatingIndexes);case 7:g=n.sent,r.currentIndexedDB$.next(g),r.sendToClient({id:e,call:"requestDatabase",type:"received",value:"ok"}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),r.sendToClient({id:e,call:"requestDatabase",type:"error",value:"Failed to create DB: ".concat(d,"; \nerrors: ").concat(JSON.parse(JSON.stringify(n.t0)))});case 14:case"end":return n.stop()}},n,null,[[4,11]])}))()}},{key:"requestDatabaseRemove",value:function(e){var t=this;return(0,A.Z)(regeneratorRuntime.mark(function r(){var n,i,a,s,o,u,l,c,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t.currentIndexedDB$.getValue(),o=t.currentUser$.getValue(),u=t.entryType$.getValue(),l=t.currentPageKey$.getValue(),s){r.next=3;break}return r.abrupt("return");case 3:if(o){r.next=5;break}return r.abrupt("return");case 5:if(c="filePages"===u?null===(n=t.currentDataFile$.getValue())||void 0===n?void 0:n.id:"resultPages"===u?null===(i=t.currentResult$.getValue())||void 0===i?void 0:i.id:null===(a=t.currentProject$.getValue())||void 0===a?void 0:a.id,d="".concat(o.id,"-").concat(u,"-").concat(c,"-").concat(l),r.t0=s&&s.close,!r.t0){r.next=11;break}return s.close(),r.next=11,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.blocked,n=indexedDB.deleteDatabase(e);return r&&n.addEventListener("blocked",function(){return r()}),V(n).then(function(){})}(d);case 11:t.sendToClient({id:e,call:"requestDatabaseRemove",type:"received",value:"ok"});case 12:case"end":return r.stop()}},r)}))()}},{key:"setDataStore",value:function(){return(0,A.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"dataStoreCount",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.currentIndexedDB$.getValue()){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,i.count(t.storeName,t.queryKeyRange);case 5:return a=n.sent,n.abrupt("return",r.sendToClient({id:e,call:"dataStoreCount",type:"received",value:a}));case 7:case"end":return n.stop()}},n)}))()}},{key:"dataStoreAdd",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a,s,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.currentIndexedDB$.getValue()){n.next=3;break}return n.abrupt("return");case 3:if(a=t.dataItems,s=t.dataKeys||void 0,!Array.isArray(a)){n.next=16;break}return n.prev=5,o=i.transaction(t.storeName,"readwrite"),a.forEach(function(e,t){return s&&s[t]?o.store.add(e,s[t]):o.store.add(e)}),n.next=10,o.done;case 10:r.sendToClient({id:e,call:"dataStoreAdd",type:"received",value:"ok"}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(5),r.sendToClient({id:e,call:"dataStoreAdd",type:"error",value:"There are errors when adding data to the objectStore."});case 16:case"end":return n.stop()}},n,null,[[5,13]])}))()}},{key:"dataStorePut",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a,s,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.currentIndexedDB$.getValue()){n.next=3;break}return n.abrupt("return");case 3:if(a=t.dataItems,s=t.dataKeys||void 0,!Array.isArray(a)){n.next=10;break}return o=i.transaction(t.storeName,"readwrite"),a.forEach(function(e,t){return s&&s[t]?o.store.put(e,s[t]):o.store.put(e)}),n.next=9,o.done;case 9:return n.abrupt("return",r.sendToClient({id:e,call:"dataStorePut",type:"received",value:"ok"}));case 10:case"end":return n.stop()}},n)}))()}},{key:"dataStoreQuery",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a,s,o,u,l,c,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=r.currentIndexedDB$.getValue()){n.next=3;break}return n.abrupt("return");case 3:if(o=s.transaction(t.storeName),null==t.indexName){n.next=32;break}u=o.store.index(t.indexName),n.prev=6,c=(0,C.KL)(u.iterate(t.query));case 8:return n.next=10,c.next();case 10:if((l=n.sent).done){n.next=14;break}r.sendToClient({id:e,call:"dataStoreQuery",type:"event",value:l.value.value});case 12:n.next=8;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(6),i={error:n.t0};case 19:if(n.prev=19,n.prev=20,n.t1=l&&!l.done&&(a=c.return),!n.t1){n.next=25;break}return n.next=25,a.call(c);case 25:if(n.prev=25,!i){n.next=28;break}throw i.error;case 28:return n.finish(25);case 29:return n.finish(19);case 30:n.next=42;break;case 32:return n.next=34,o.store.openCursor(t.query);case 34:d=n.sent;case 35:if(!d){n.next=42;break}return r.sendToClient({id:e,call:"dataStoreQuery",type:"event",value:d.value}),n.next=39,d.continue();case 39:d=n.sent;case 40:n.next=35;break;case 42:r.sendToClient({id:e,call:"dataStoreQuery",type:"received",value:"ok"});case 43:case"end":return n.stop()}},n,null,[[6,16,19,30],[20,,25,29]])}))()}},{key:"dataStoreGet",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i,a,s,o,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.currentIndexedDB$.getValue()){n.next=3;break}return n.abrupt("return");case 3:if(a=t.indexName,s=t.storeName,o=t.key,null!=a){n.next=17;break}if(null!=o){n.next=11;break}return n.next=8,i.getAll(s);case 8:n.t1=n.sent,n.next=14;break;case 11:return n.next=13,i.get(s,o);case 13:n.t1=n.sent;case 14:n.t0=n.t1,n.next=27;break;case 17:if(null!=o){n.next=23;break}return n.next=20,i.getAllFromIndex(s,a);case 20:n.t2=n.sent,n.next=26;break;case 23:return n.next=25,i.getFromIndex(s,a,o);case 25:n.t2=n.sent;case 26:n.t0=n.t2;case 27:u=n.t0,r.sendToClient({id:e,call:"dataStoreGet",type:"received",value:u});case 29:case"end":return n.stop()}},n)}))()}},{key:"dataStoreGetAllKey",value:function(){return(0,A.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"dataStoreClear",value:function(e,t){var r=this;return(0,A.Z)(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.currentIndexedDB$.getValue())try{i.clear(t.storeName),r.sendToClient({id:e,call:"dataStoreClear",type:"received",value:"ok"})}catch(a){r.sendToClient({id:e,call:"dataStoreClear",type:"error",value:"".concat(JSON.parse(JSON.stringify(a)))})}case 2:case"end":return n.stop()}},n)}))()}},{key:"refreshPage",value:function(e){this.refresh$.next(!0),this.sendToClient({id:e,call:"refreshPage",type:"received",value:"ok"})}},{key:"toggleFullPage",value:function(e,t){var r=this;this._toggleFullPage(t.isFullPage),setTimeout(function(){return r.sendToClient({id:e,call:"toggleFullPage",type:"received",value:t.isFullPage})},200)}},{key:"isFullPage",value:function(e){this.sendToClient({id:e,call:"isFullPage",type:"received",value:this.isFullPage$.getValue()})}},{key:"toggleRightSideMenu",value:function(e,t){var r=this;this.showRightMenu$.next(!!t.isShown),setTimeout(function(){return r.sendToClient({id:e,call:"toggleRightSideMenu",type:"received",value:t.isShown})},200)}},{key:"isShownRightSideMemu",value:function(e){this.sendToClient({id:e,call:"isShownRightSideMemu",type:"received",value:this.showRightMenu$.getValue()})}},{key:"togglePageList",value:function(e,t){var r=this;["list","page"].indexOf(t.mode||"")>=0?this._changeMode(t.mode):this._changeMode(),setTimeout(function(){return r.sendToClient({id:e,call:"togglePageList",type:"received",value:r.pageMode$.getValue()})},10)}},{key:"isShownPageList",value:function(e){this.sendToClient({id:e,call:"isShownPageList",type:"received",value:"list"===this.pageMode$.getValue()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ue.LFG(le.D),ue.LFG(ce.Y),ue.LFG(de.C),ue.LFG(ge.M),ue.LFG(fe.B),ue.LFG(pe.o),ue.LFG(oe.eN),ue.LFG(I.F0))},e.\u0275prov=ue.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ve=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=ue.oAB({type:e}),e.\u0275inj=ue.cJS({providers:[he],imports:[[d.u5,I.Bz,c.ez,g.ot,m.t,f.To,y.p9,b.lN,v.QW,x.Is,P.p0,T.ie,k.Cq,Z.v,w.s]]}),e}(),ye=o(90817),xe=o(90101),me=o(99759),be=o(87064);function ke(e,t){1&e&&(ue.TgZ(0,"span"),ue._uU(1,"Project Page"),ue.qZA())}function Pe(e,t){1&e&&(ue.TgZ(0,"span"),ue._uU(1,"Result Page"),ue.qZA())}function Te(e,t){1&e&&(ue.TgZ(0,"span"),ue._uU(1,"Project Page"),ue.qZA())}function Ze(e,t){1&e&&(ue.TgZ(0,"span"),ue._uU(1,"DataFile Page"),ue.qZA())}function we(e,t){1&e&&(ue.TgZ(0,"span"),ue._uU(1,"Static Page"),ue.qZA())}function Ie(e,t){if(1&e&&(ue.TgZ(0,"h2"),ue._uU(1,"Page type: "),ue.YNc(2,ke,2,0,"span",2),ue.YNc(3,Pe,2,0,"span",2),ue.YNc(4,Te,2,0,"span",2),ue.YNc(5,Ze,2,0,"span",2),ue.YNc(6,we,2,0,"span",2),ue.qZA()),2&e){var r=ue.oxw();ue.xp6(2),ue.Q6J("ngIf","indexPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf","resultPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf","proxyPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf","filePages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf","staticPages"===r.entryType)}}var Ae=function(){var e=function(){function e(t,n){r(this,e),this.dialogRef=t,this.data=n,this.authorizedList={"allow-forms":!1,"allow-modals":!1,"allow-popups":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-same-origin":!1,"allow-scripts":!1,"allow-downloads":!1},this.entryType=n.entryType;for(var i=n.authorizedList,a=Object.keys(this.authorizedList),s=0;s<a.length;s++){var o=a[s],u=i.indexOf(o)>=0;switch(o){case"allow-forms":this.authorizedList["allow-forms"]=u;break;case"allow-modals":this.authorizedList["allow-modals"]=u;break;case"allow-popups":this.authorizedList["allow-popups"]=u;break;case"allow-orientation-lock":this.authorizedList["allow-orientation-lock"]=u;break;case"allowed-pointer-lock":this.authorizedList["allow-pointer-lock"]=u;break;case"allow-downloads":this.authorizedList["allow-downloads"]=u;break;case"allow-scripts":this.authorizedList["allow-scripts"]=u;break;case"allow-same-origin":this.authorizedList["allow-same-origin"]=u}}}return i(e,[{key:"ngOnInit",value:function(){}},{key:"save",value:function(){var e=this,t=Object.keys(this.authorizedList).filter(function(t){return!0===e.authorizedList[t]});this.dialogRef.close(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ue.Y36(x.so),ue.Y36(x.WI))},e.\u0275cmp=ue.Xpm({type:e,selectors:[["authorize-sandbox"]],decls:65,vars:13,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-subheader",""],["mat-line","",3,"ngModel","disabled","ngModelChange"],["mat-line","",1,"ms-4"],["mat-line","",1,"ms-4","text-muted"],["mat-line","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-button","",3,"click"]],template:function(e,t){1&e&&(ue.TgZ(0,"h1",0),ue._uU(1,"Authorizing Page sandbox options"),ue.qZA(),ue.TgZ(2,"div",1),ue.YNc(3,Ie,7,5,"h2",2),ue.TgZ(4,"mat-list"),ue.TgZ(5,"h3",3),ue._uU(6,"The default authorized options"),ue.qZA(),ue.TgZ(7,"mat-list-item"),ue.TgZ(8,"mat-checkbox",4),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-scripts"]=e}),ue._uU(9,"Allow Scripts"),ue.qZA(),ue.TgZ(10,"span",5),ue._uU(11,"Page can execute javascripts."),ue.qZA(),ue.qZA(),ue.TgZ(12,"mat-list-item"),ue.TgZ(13,"mat-checkbox",4),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-modals"]=e}),ue._uU(14,"Allow Modal"),ue.qZA(),ue.TgZ(15,"span",5),ue._uU(16,"Page can create modal windows."),ue.qZA(),ue.qZA(),ue.TgZ(17,"mat-list-item"),ue.TgZ(18,"mat-checkbox",4),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-popups"]=e}),ue._uU(19,"Allow Pop-ups"),ue.qZA(),ue.TgZ(20,"span",5),ue._uU(21,"Page can create pop-up windows or create new tab in the browser."),ue.qZA(),ue.TgZ(22,"span",6),ue._uU(23,"*Note that created pages also follow the same sandbox options."),ue.qZA(),ue.qZA(),ue._UZ(24,"mat-divider"),ue.TgZ(25,"mat-list-item"),ue.TgZ(26,"mat-checkbox",7),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-downloads"]=e}),ue._uU(27,"Allow Downlading Files From Sandboxed Pages"),ue.qZA(),ue.TgZ(28,"span",5),ue._uU(29,"Page allows automatically downloading files. If this option checked, browser will still ask you the file downloading locations."),ue.qZA(),ue.qZA(),ue.TgZ(30,"h3",3),ue._uU(31,"The additional options"),ue.qZA(),ue.TgZ(32,"mat-list-item"),ue.TgZ(33,"mat-checkbox",7),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-orientation-lock"]=e}),ue._uU(34,"Allow Orientation Lock"),ue.qZA(),ue.TgZ(35,"span",5),ue._uU(36,"Page can lock the screen orientation."),ue.qZA(),ue.qZA(),ue.TgZ(37,"mat-list-item"),ue.TgZ(38,"mat-checkbox",7),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-pointer-lock"]=e}),ue._uU(39,"Allow Pointer Lock"),ue.qZA(),ue.TgZ(40,"span",5),ue._uU(41,"Page can use the Pointer Lock API."),ue.qZA(),ue.qZA(),ue._UZ(42,"mat-divider"),ue.TgZ(43,"h3",3),ue._uU(44,"The risk options"),ue.qZA(),ue.TgZ(45,"mat-list-item"),ue.TgZ(46,"mat-checkbox",7),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-forms"]=e}),ue._uU(47,"Allow Form Submission"),ue.qZA(),ue.TgZ(48,"span",5),ue._uU(49,"Page can submit form data."),ue.qZA(),ue.qZA(),ue.TgZ(50,"mat-list-item"),ue.TgZ(51,"mat-checkbox",4),ue.NdJ("ngModelChange",function(e){return t.authorizedList["allow-same-origin"]=e}),ue._uU(52,"Allow Same Origin"),ue.qZA(),ue.TgZ(53,"span",5),ue._uU(54,"Page can use cookie, indexedDB form data. Do NOT allow this unless you trust the content."),ue.qZA(),ue.TgZ(55,"span",6),ue._uU(56,"The "),ue.TgZ(57,"b"),ue._uU(58,"same-origin policy"),ue.qZA(),ue._uU(59,"is a critical security mechanism that restricts how a document or script loaded from one origin can interact with a resource from another origin. It helps isolate potentially malicious documents, reducing possible attack vectors. "),ue.qZA(),ue.qZA(),ue.qZA(),ue.qZA(),ue.TgZ(60,"div",8),ue.TgZ(61,"button",9),ue._uU(62,"Cancel"),ue.qZA(),ue.TgZ(63,"button",10),ue.NdJ("click",function(){return t.save()}),ue._uU(64,"Ok"),ue.qZA(),ue.qZA()),2&e&&(ue.xp6(3),ue.Q6J("ngIf",!1),ue.xp6(5),ue.Q6J("ngModel",t.authorizedList["allow-scripts"])("disabled","proxyPages"===t.entryType),ue.xp6(5),ue.Q6J("ngModel",t.authorizedList["allow-modals"])("disabled","proxyPages"===t.entryType),ue.xp6(5),ue.Q6J("ngModel",t.authorizedList["allow-popups"])("disabled","proxyPages"===t.entryType),ue.xp6(8),ue.Q6J("ngModel",t.authorizedList["allow-downloads"]),ue.xp6(7),ue.Q6J("ngModel",t.authorizedList["allow-orientation-lock"]),ue.xp6(5),ue.Q6J("ngModel",t.authorizedList["allow-pointer-lock"]),ue.xp6(8),ue.Q6J("ngModel",t.authorizedList["allow-forms"]),ue.xp6(5),ue.Q6J("ngModel",t.authorizedList["allow-same-origin"])("disabled","proxyPages"===t.entryType))},directives:[x.uh,x.xY,c.O5,T.i$,T.gs,T.Tg,y.oG,be.X2,d.JJ,d.On,m.d,x.H8,g.lW,x.ZT],encapsulation:2}),e}(),Ce=o(16650);function Fe(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"button",6),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw().index;return ue.oxw(2).uploadSettings[e].push([null])}),ue._uU(1,"Add"),ue.qZA()}}function Se(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"button",6),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw().index,t=ue.oxw().index;return ue.oxw(2).removeFileInput(t,e)}),ue._uU(1,"Remove"),ue.qZA()}}function qe(e,t){if(1&e&&(ue.ynx(0),ue.TgZ(1,"div"),ue._UZ(2,"input",7),ue.YNc(3,Se,2,0,"button",5),ue.qZA(),ue.BQk()),2&e){var r=t.index,n=ue.oxw().index,i=ue.oxw(2);ue.xp6(1),ue.uIk("id",i.eventID+"-"+n+"-"+r),ue.xp6(2),ue.Q6J("ngIf",0!==r)}}function je(e,t){if(1&e&&(ue.ynx(0),ue.TgZ(1,"tr"),ue.TgZ(2,"td"),ue._uU(3),ue._UZ(4,"br"),ue.YNc(5,Fe,2,0,"button",5),ue.qZA(),ue.TgZ(6,"td"),ue.YNc(7,qe,4,2,"ng-container",4),ue.qZA(),ue._UZ(8,"td"),ue.qZA(),ue.BQk()),2&e){var r=t.$implicit,n=t.index,i=ue.oxw(2);ue.xp6(3),ue.hij(" ",r.displayInfo,""),ue.xp6(2),ue.Q6J("ngIf",r.multiple),ue.xp6(2),ue.Q6J("ngForOf",i.uploadSettings[n])}}function _e(e,t){if(1&e&&(ue.ynx(0),ue.TgZ(1,"table",3),ue.TgZ(2,"thead"),ue.TgZ(3,"tr"),ue.TgZ(4,"th"),ue._uU(5,"Description"),ue.qZA(),ue.TgZ(6,"th"),ue._uU(7,"Upload"),ue.qZA(),ue.TgZ(8,"th"),ue._uU(9,"Progress"),ue.qZA(),ue.qZA(),ue.qZA(),ue.TgZ(10,"tbody"),ue.YNc(11,je,9,3,"ng-container",4),ue.qZA(),ue.qZA(),ue.BQk()),2&e){var r=ue.oxw();ue.xp6(11),ue.Q6J("ngForOf",r.uploadSpec)}}var De=function(){var e=function(){function e(t,n,i,a,s){r(this,e),this.el=t,this.dialogRef=n,this.uploader=i,this.infoService=a,this.data=s,this.multiple=!1,this.uploadSettings=[],this.uploadingObjects=[],this.pageInfo=s.page,this.currentProject=s.project,this.eventID=s.eventID,this.uploadSpec=s.uploadSettings}return i(e,[{key:"ngOnInit",value:function(){this.uploadSpec=[{folder:"",keepFileName:!1,name:"just-a-test",desc:"Testing!!",tags:["file","just","for","testing"],displayInfo:"This is a single file field",multiple:!1},{folder:"",keepFileName:!1,name:"Testing-2",desc:"Testing!!",tags:["file","just","for","testing"],displayInfo:"This is a multiple-file field",multiple:!0}],this.eventID="testabcd",this.uploadSettings=this.uploadSpec.map(function(e){return[null]})}},{key:"removeFileInput",value:function(e,t){$("#"+this.eventID+"-"+e+"-"+t).remove(),this.uploadSettings[e].splice(t,1)}},{key:"ngOnDestroy",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ue.Y36(ue.SBq),ue.Y36(x.so),ue.Y36(Ce.F),ue.Y36(de.C),ue.Y36(x.WI))},e.\u0275cmp=ue.Xpm({type:e,selectors:[["uploader-ui"]],viewQuery:function(e,t){var r;(1&e&&(ue.Gf(P.BZ,5),ue.Gf(ue.SBq,5)),2&e)&&(ue.iGM(r=ue.CRH())&&(t.uploaderProgress=r.first),ue.iGM(r=ue.CRH())&&(t.uploadElements=r))},decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-stroked-button","","mat-dialog-close",""],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["name","fileInput","type","file"]],template:function(e,t){1&e&&(ue.TgZ(0,"h3",0),ue._uU(1,"File Uploader Helper"),ue.qZA(),ue.TgZ(2,"mat-dialog-actions"),ue.TgZ(3,"button",1),ue._uU(4,"Close"),ue.qZA(),ue.qZA(),ue._UZ(5,"br"),ue._UZ(6,"br"),ue._UZ(7,"br"),ue._uU(8),ue.YNc(9,_e,12,1,"ng-container",2)),2&e&&(ue.xp6(8),ue.hij("\nYou are uploading files for the page: ",t.pageInfo.name,".\n"),ue.xp6(1),ue.Q6J("ngIf",t.currentProject))},directives:[x.uh,x.H8,g.lW,x.ZT,c.O5,c.sg],styles:[".my-drop-zone[_ngcontent-%COMP%]{font-size:1.25rem;background-color:#c8dadf;position:relative;padding:60px 20px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.nv-file-over[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}"]}),e}(),Re=o(99624),Ue=["client"],Me=["sandboxContainer"];function Ne(e,t){if(1&e){var r=ue.EpF();ue.ynx(0),ue.TgZ(1,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw().historyBack()}),ue._UZ(2,"i",17),ue.qZA(),ue.TgZ(3,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw().historyForward()}),ue._UZ(4,"i",18),ue.qZA(),ue.TgZ(5,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw().reloadClient()}),ue._UZ(6,"i",19),ue.qZA(),ue.TgZ(7,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw().detectSizeChange()}),ue._UZ(8,"i",20),ue.qZA(),ue.TgZ(9,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw().changeMode()}),ue._UZ(10,"i",21),ue.qZA(),ue.TgZ(11,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw().authorizeSandbox()}),ue._UZ(12,"i",22),ue.qZA(),ue.TgZ(13,"button",16),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw()._toggleFullPage()}),ue._UZ(14,"i",23),ue.qZA(),ue.BQk()}if(2&e){var n=ue.oxw();ue.xp6(14),ue.ekj("fa-expand-arrows-alt",!n.isFullPage)("fa-compress-arrows-alt",n.isFullPage)}}function Je(e,t){if(1&e&&(ue.ynx(0),ue._uU(1),ue.BQk()),2&e){var r=ue.oxw();ue.xp6(1),ue.hij(" ",r.srcString," ")}}function $e(e,t){if(1&e&&(ue.ynx(0),ue._uU(1),ue.BQk()),2&e){var r=ue.oxw();ue.xp6(1),ue.hij(" ",r.srcString," ")}}function Oe(e,t){if(1&e&&(ue.ynx(0),ue._UZ(1,"ngx-json-viewer",26),ue._UZ(2,"mat-divider"),ue.BQk()),2&e){var r=ue.oxw(2).$implicit;ue.xp6(1),ue.Q6J("json",r)("expanded",!1)}}function ze(e,t){if(1&e&&(ue.ynx(0),ue.YNc(1,Oe,3,2,"ng-container",0),ue.BQk()),2&e){var r=t.$implicit,n=ue.oxw(3);ue.xp6(1),ue.Q6J("ngIf","log"===r.key&&n.logFilter[2]||"sent"===r.key&&n.logFilter[0]||"received"===r.key&&n.logFilter[1]||"event"===r.key&&n.logFilter[3]||"error"===r.key&&n.logFilter[4]||"change"===r.key&&n.logFilter[5])}}function Qe(e,t){if(1&e&&(ue.ynx(0),ue.YNc(1,ze,2,1,"ng-container",25),ue.ALo(2,"keyvalue"),ue.BQk()),2&e){var r=t.$implicit;ue.xp6(1),ue.Q6J("ngForOf",ue.lcZ(2,1,r))}}function Be(e,t){if(1&e&&(ue.TgZ(0,"div",24),ue.YNc(1,Qe,3,3,"ng-container",25),ue.qZA()),2&e){var r=ue.oxw();ue.xp6(1),ue.Q6J("ngForOf",r.sandboxAPI.logItems)}}function Le(e,t){1&e&&(ue.TgZ(0,"div",30),ue.TgZ(1,"h1",31),ue._uU(2,"Processing ... "),ue._UZ(3,"i",32),ue.qZA(),ue.qZA())}function Ve(e,t){if(1&e&&ue._UZ(0,"img",52),2&e){var r=ue.oxw(2).$implicit,n=ue.oxw().$implicit,i=ue.oxw(4);ue.Q6J("src",i.validPages.get(n.id+":"+r).thumbnail,ue.LSH)}}function Ye(e,t){1&e&&ue._UZ(0,"i",53)}function Ke(e,t){1&e&&(ue.ynx(0),ue._uU(1,"Current Page"),ue.BQk())}function Ee(e,t){if(1&e&&ue._UZ(0,"img",54),2&e){var r=ue.oxw(2).$implicit,n=ue.oxw().$implicit,i=ue.oxw(4);ue.ekj("mt-4",i.activePageKey!==n.id+":"+r),ue.Q6J("src",i.validPages.get(n.id+":"+r).img,ue.LSH)}}function He(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"button",16),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw(2).$implicit,t=ue.oxw().$implicit;return ue.oxw(4).changePageKey(t.id+":"+e,t)}),ue._uU(1,"Select"),ue.qZA()}}function Ge(e,t){if(1&e&&(ue.TgZ(0,"div",47),ue.TgZ(1,"mat-card"),ue.TgZ(2,"mat-card-header"),ue.YNc(3,Ve,1,1,"img",48),ue.YNc(4,Ye,1,0,"i",49),ue.TgZ(5,"mat-card-title"),ue._uU(6),ue.qZA(),ue.TgZ(7,"mat-card-subtitle"),ue.YNc(8,Ke,2,0,"ng-container",0),ue.qZA(),ue.qZA(),ue.YNc(9,Ee,1,3,"img",50),ue.TgZ(10,"mat-card-content"),ue.TgZ(11,"p"),ue._uU(12),ue.ALo(13,"slice"),ue.qZA(),ue.qZA(),ue.TgZ(14,"mat-card-actions"),ue.YNc(15,He,2,0,"button",51),ue.qZA(),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw().$implicit,n=ue.oxw().$implicit,i=ue.oxw(4);ue.xp6(1),ue.Udp("background-color",i.activePageKey===n.id+":"+r?"rgba(255, 255, 0, 0.3)":"transparent"),ue.xp6(2),ue.Q6J("ngIf",i.validPages.get(n.id+":"+r).thumbnail),ue.xp6(1),ue.Q6J("ngIf",!i.validPages.get(n.id+":"+r).thumbnail),ue.xp6(2),ue.Oqu(i.validPages.get(n.id+":"+r).name),ue.xp6(2),ue.Q6J("ngIf",i.activePageKey===n.id+":"+r),ue.xp6(1),ue.Q6J("ngIf",i.validPages.get(n.id+":"+r).img),ue.xp6(3),ue.Oqu(ue.Dn7(13,9,i.validPages.get(n.id+":"+r).desc,0,60)),ue.xp6(3),ue.Q6J("ngIf",i.activePageKey!==n.id+":"+r)}}function We(e,t){if(1&e&&(ue.ynx(0),ue.YNc(1,Ge,16,13,"div",46),ue.BQk()),2&e){var r=t.$implicit;ue.xp6(1),ue.Q6J("ngIf",r)}}function Xe(e,t){if(1&e&&(ue.TgZ(0,"div",41),ue.TgZ(1,"h3",42),ue._UZ(2,"i",43),ue._uU(3),ue._UZ(4,"i",44),ue._uU(5),ue.qZA(),ue.YNc(6,We,2,1,"ng-container",25),ue._UZ(7,"mat-divider",45),ue.qZA()),2&e){var r=t.$implicit,n=ue.oxw(4);ue.xp6(3),ue.hij(" ",r.fullname," from "),ue.xp6(2),ue.hij(" ",r.sheetName,""),ue.xp6(1),ue.Q6J("ngForOf",n.keyOrders[r.id])}}function et(e,t){if(1&e&&(ue.TgZ(0,"div",39),ue.YNc(1,Xe,8,3,"div",40),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(1),ue.Q6J("ngForOf",r.currentPackages)}}function tt(e,t){1&e&&(ue.ynx(0),ue._uU(1,"Current Page"),ue.BQk())}function rt(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"button",16),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw(2).$implicit;return ue.oxw(4).changeProxyJob(e)}),ue._uU(1,"Select"),ue.qZA()}}function nt(e,t){if(1&e&&(ue.TgZ(0,"div",58),ue.TgZ(1,"mat-card"),ue.TgZ(2,"mat-card-header"),ue._UZ(3,"i",53),ue.TgZ(4,"mat-card-title"),ue._uU(5),ue.qZA(),ue.TgZ(6,"mat-card-subtitle"),ue.YNc(7,tt,2,0,"ng-container",0),ue.qZA(),ue.qZA(),ue.TgZ(8,"mat-card-content"),ue.TgZ(9,"h4"),ue._uU(10,"Proxy details"),ue.qZA(),ue.TgZ(11,"div",59),ue._uU(12),ue._UZ(13,"br"),ue._uU(14),ue._UZ(15,"br"),ue._uU(16),ue._UZ(17,"br"),ue._uU(18),ue._UZ(19,"br"),ue._uU(20),ue._UZ(21,"br"),ue.qZA(),ue.qZA(),ue.TgZ(22,"mat-card-actions"),ue.YNc(23,rt,2,0,"button",51),ue.qZA(),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw(),n=r.$implicit,i=r.index,a=ue.oxw(4);ue.xp6(1),ue.Udp("background-color",a.activePageKey===a.currentResult.id+"/"+n||a.activePageKey===a.currentResult.id&&0===i?"rgba(255, 255, 0, 0.3)":"transparent"),ue.xp6(4),ue.Oqu(n),ue.xp6(2),ue.Q6J("ngIf",a.activePageKey===a.currentResult.id+"/"+n||a.activePageKey===a.currentResult.id&&0===i),ue.xp6(5),ue.hij(" protocol: ",a.validPages.get(a.currentResult.id+":"+n).protocol,""),ue.xp6(2),ue.hij(" ip: ",a.validPages.get(a.currentResult.id+":"+n).ip,""),ue.xp6(2),ue.hij(" port: ",a.validPages.get(a.currentResult.id+":"+n).port,""),ue.xp6(2),ue.hij(" pathRewrite: ",a.validPages.get(a.currentResult.id+":"+n).pathRewrite,""),ue.xp6(2),ue.hij(" entry path: ",a.validPages.get(a.currentResult.id+":"+n).entryPath,""),ue.xp6(3),ue.Q6J("ngIf",!(a.activePageKey===a.currentResult.id+"/"+n||a.activePageKey===a.currentResult.id&&0===i))}}function it(e,t){if(1&e&&(ue.ynx(0),ue.YNc(1,nt,24,10,"div",57),ue.BQk()),2&e){var r=t.$implicit;ue.xp6(1),ue.Q6J("ngIf",r)}}var at=function(e){return["/result",e,"info"]};function st(e,t){if(1&e&&(ue.TgZ(0,"div",55),ue.TgZ(1,"div",41),ue.TgZ(2,"h2",42),ue._uU(3," Proxy pages in the result '"),ue.TgZ(4,"b"),ue.TgZ(5,"a",56),ue.TgZ(6,"u"),ue._uU(7),ue.qZA(),ue._uU(8),ue.TgZ(9,"u"),ue._uU(10),ue.qZA(),ue.qZA(),ue.qZA(),ue._uU(11,"' "),ue.qZA(),ue.YNc(12,it,2,1,"ng-container",25),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(5),ue.Q6J("routerLink",ue.VKq(5,at,r.currentResult.id)),ue.xp6(2),ue.Oqu(r.currentResult.prefix),ue.xp6(1),ue.Oqu(r.currentResult.name),ue.xp6(2),ue.Oqu(r.currentResult.suffix),ue.xp6(2),ue.Q6J("ngForOf",r.keyOrders[r.currentResult.id])}}function ot(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"div",33),ue.TgZ(1,"div",34),ue.TgZ(2,"button",35),ue.NdJ("click",function(){return ue.CHM(r),ue.oxw(2).changeMode()}),ue._UZ(3,"i",36),ue.qZA(),ue.TgZ(4,"h1"),ue._uU(5,"Page entries"),ue.qZA(),ue.qZA(),ue._UZ(6,"mat-divider"),ue.YNc(7,et,2,1,"div",37),ue.YNc(8,st,13,7,"div",38),ue.qZA()}if(2&e){var n=ue.oxw(2);ue.xp6(7),ue.Q6J("ngIf","staticPages"!==n.entryType&&"proxyPages"!==n.entryType),ue.xp6(1),ue.Q6J("ngIf","proxyPages"===n.entryType&&n.currentResult)}}function ut(e,t){if(1&e&&(ue.TgZ(0,"div",27),ue.YNc(1,Le,4,0,"div",28),ue.YNc(2,ot,9,2,"div",29),ue.qZA()),2&e){var r=ue.oxw();ue.xp6(1),ue.Q6J("ngIf",r.frameProcessing&&"list"!==r.mode),ue.xp6(1),ue.Q6J("ngIf","list"===r.mode)}}var lt=function(){var t=function(){function t(e,n,i,a){r(this,t),this.sanitizer=e,this.dialog=n,this.systemService=i,this.sandboxAPI=a,this.client=null,this.sandboxContainer=null,this.currentProject=null,this.currentResult=null,this.currentDataFile=null,this.currentUser=null,this.currentPackages=[],this.entryType=null,this.keyOrders={},this.pageKey=null,this.validPages=new Map,this.mode="page",this.pageChange=new ue.vpe,this.requestNavigation=new ue.vpe,this.requestFullPage=new ue.vpe,this.rightSideMenuStateChange=new ue.vpe,this.modeChage=new ue.vpe,this.isFullPage=!1,this.sandboxAuthorizedSet=new Set(["allow-scripts","allow-modals","allow-popups","allow-downloads"]),this.src=this.sanitizer.bypassSecurityTrustResourceUrl(""),this.srcString=null,this.frameWidth=1024,this.frameHeight=768,this.logItems=[],this.frameProcessing=!1,this.logFilter=[!0,!0,!0,!1,!0,!1],this.activePageKey=null,this._subs=[]}return i(t,[{key:"sandboxAuthorized",get:function(){return e(this.sandboxAuthorizedSet)}},{key:"ngOnInit",value:function(){var e=this;this.detectSizeChange(),this.client&&this.sandboxAPI.client$.next(this.client),this.systemService.toggleContentScrollbar(!1),this._subs.push(this.sandboxAPI.isFullPage$.subscribe(function(t){return e.requestFullPage.emit(t)})),this._subs.push(this.sandboxAPI.showRightMenu$.subscribe(function(t){return e.rightSideMenuStateChange.emit(t)})),this._subs.push(this.sandboxAPI.pageMode$.subscribe(function(t){return e.modeChage.emit(t)})),this._subs.push(this.sandboxAPI.requestNavigation$.subscribe(function(t){return e.requestNavigation.emit(t)})),this._subs.push(this.sandboxAPI.refresh$.subscribe(function(){return e.reloadClient()}))}},{key:"ngOnChanges",value:function(e){var t=this,r=!1;for(var n in e)if("currentProject"===n){if(this.currentProject=e[n].currentValue,!this.currentProject)continue;this.sandboxAPI.currentProject$.next(this.currentProject),this.currentPackages=this.currentProject.packages,this.sandboxAPI.currentPackages$.next(this.currentPackages),e[n].currentValue&&e[n].previousValue&&e[n].currentValue.id!==e[n].previousValue.id&&(r=!0)}else if("currentResult"===n){if(this.currentResult=e[n].currentValue,!this.currentResult)continue;this.sandboxAPI.currentResult$.next(this.currentResult),e[n].currentValue&&e[n].previousValue&&e[n].currentValue.id!==e[n].previousValue.id&&(r=!0)}else if("currentDataFile"===n){if(this.currentDataFile=e[n].currentValue,!this.currentDataFile)continue;this.sandboxAPI.currentDataFile$.next(this.currentDataFile),e[n].currentValue&&e[n].previousValue&&e[n].currentValue.id!==e[n].previousValue.id&&(r=!0)}else"pageKey"===n?(this.activePageKey=e[n].currentValue,this.sandboxAPI.currentPageKey$.next(this.activePageKey),e[n].currentValue!==e[n].previousValue&&(r=!0)):"validPages"===n?this.validPages=e[n].currentValue:"entryType"===n?(this.entryType=e[n].currentValue,this.sandboxAPI.entryType$.next(this.entryType),e[n].currentValue!==e[n].previousValue&&(r=!0)):"currentPackages"===n?(this.currentPackages=e[n].currentValue,this.sandboxAPI.currentPackages$.next(this.currentPackages)):"isFullPage"===n?this.sandboxAPI.isFullPage$.next(e[n].currentValue):"mode"===n?(this.mode="list"===e[n].currentValue?"list":"page",this.sandboxAPI.pageMode$.next(this.mode)):"currentUser"===n&&(this.currentUser=e[n].currentValue,this.sandboxAPI.currentUser$.next(this.currentUser));var i=this.srcString||"";if("indexPages"===this.entryType&&(this.sandboxAPI.currentDataFile$.next(null),this.sandboxAPI.currentResult$.next(null)),"staticPages"===this.entryType||"proxyPages"===this.entryType||this.validPages.has(this.activePageKey||"")){var a=null;if("staticPages"===this.entryType&&this.currentDataFile)a="/data/api/dataFile/".concat(this.currentDataFile.id,"/static");else if("proxyPages"===this.entryType&&this.currentResult)a="/result/".concat(this.currentResult.id)+(this.pageKey?"/".concat(this.pageKey):"")+"/requestProxy",this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms");else if(this.activePageKey){var s=this.activePageKey.split(":")[0];a="/page/api/".concat(s,"/").concat(this.validPages.get(this.activePageKey).path)}if(a&&a!==i){if(i.match(/^\/result\/.*?\/proxy\//)&&a.match(/^\/result\/.*\/requestProxy/))return;setTimeout(function(){a&&(t.src=t.sanitizer.bypassSecurityTrustResourceUrl(a),t.srcString=a)}),this.logItems=[]}else r&&(this.src=this.securePagePath(""),this.srcString="","proxyPages"===this.entryType&&(this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms")),setTimeout(function(){a&&(t.src=t.sanitizer.bypassSecurityTrustResourceUrl(a),t.srcString=a,t.currentIndexedDB=void 0)}));setTimeout(function(){return t.detectSizeChange()},500)}else r&&("proxyPages"===this.entryType?(this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms")):(this.sandboxAuthorizedSet.delete("allow-same-origin"),this.sandboxAuthorizedSet.delete("allow-forms")),setTimeout(function(){t.src=t.securePagePath(""),t.srcString="",t.currentIndexedDB=void 0}))}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){return e.detectSizeChange()},1e3)}},{key:"onResize",value:function(){var e=this;clearTimeout(this.onResizeTimer),this.onResizeTimer=setTimeout(function(){return e.detectSizeChange()},500)}},{key:"reloadClient",value:function(e){var t=this,r=e||this.src,n=this.srcString;"proxyPages"===this.entryType&&(this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms")),this.src=this.securePagePath(""),this.srcString="",setTimeout(function(){t.src=r,t.srcString=n,t.currentIndexedDB=void 0,t.onResize()},10)}},{key:"changeMode",value:function(e){var t=this.sandboxAPI.pageMode$.getValue();this.sandboxAPI.pageMode$.next("list"==(e=e||"list"!==t?"list":"page")?"list":"page")}},{key:"historyBack",value:function(){this.sandboxAPI.historyBack()}},{key:"historyForward",value:function(){this.sandboxAPI.historyForward()}},{key:"detectSizeChange",value:function(){if(this.sandboxContainer&&this.client){this.frameWidth=$(this.sandboxContainer.nativeElement).innerWidth();var e=window.innerHeight,t=this.sandboxAPI.isFullPage$.getValue()?e-30:e-274;this.frameHeight=t}}},{key:"onSrcChanged",value:function(e){if(this.client)try{var t=this.client.nativeElement.contentWindow.location.pathname;if("blank"===t)return;this.srcString=t;var r=t.match(/^\/result\/(.*?)\/proxy\//);r&&(this.activePageKey=r[1])}catch(n){}}},{key:"securePagePath",value:function(e,t){return e=e?e.replace(/^http[s]:/g,"").replace(/\.\./g,""):"",t&&(e=0===e.indexOf("/")?"/page/api/".concat(t).concat(e):"/page/api/".concat(t,"/").concat(e)),this.sanitizer.bypassSecurityTrustResourceUrl(e)}},{key:"changePageKey",value:function(e,t){e!==this.activePageKey&&this.pageChange.emit({page:this.validPages.get(e),package:t}),this.mode="page"}},{key:"changeProxyJob",value:function(e){this.currentResult&&this.requestNavigation.next({itemID:this.currentResult.id,type:"proxyPages",pageKey:e})}},{key:"_toggleFullPage",value:function(){this.sandboxAPI._toggleFullPage()}},{key:"openUploaderUI",value:function(){this.dialog.open(De,{minWidth:"90vw",minHeight:"90vh",disableClose:!0,data:{project:this.currentProject,page:this.activePageKey?this.validPages.get(this.activePageKey):void 0}})}},{key:"notifyDataChange",value:function(e){this.sandboxAPI.sendToClient({id:"",call:"notifyDataChange",type:"change",value:e})}},{key:"onMessagereceived",value:function(e){if(e.data.call&&e.data.id){this.sandboxAPI.logItems.push({sent:e.data});var t=e.data.id,r=e.data.call,n=e.data.value;this.sandboxAPI.isValidAPI(r)?this.sandboxAPI[r](t,n):this.sandboxAPI.sendToClient({id:t,call:r,type:"error",value:"The call ".concat(r," is not part of the API.")})}}},{key:"authorizeSandbox",value:function(){var e=this,t=this.dialog.open(Ae,{data:{authorizedList:this.sandboxAuthorized,entryType:this.entryType}}).afterClosed().subscribe(function(r){t.unsubscribe(),Array.isArray(r)&&(0===r.length?e.sandboxAuthorizedSet.add("allow-modal"):e.sandboxAuthorizedSet=new Set(r),e.reloadClient())})}},{key:"ngOnDestroy",value:function(){this.systemService.toggleContentScrollbar(!0),clearTimeout(this.timeout),clearTimeout(this.onResizeTimer),this._subs.forEach(function(e){return e.unsubscribe()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ue.Y36(Re.H7),ue.Y36(x.uw),ue.Y36(pe.o),ue.Y36(he))},t.\u0275cmp=ue.Xpm({type:t,selectors:[["bdp-sandbox"]],viewQuery:function(e,t){var r;(1&e&&(ue.Gf(Ue,7),ue.Gf(Me,7)),2&e)&&(ue.iGM(r=ue.CRH())&&(t.client=r.first),ue.iGM(r=ue.CRH())&&(t.sandboxContainer=r.first))},inputs:{currentProject:"currentProject",currentResult:"currentResult",currentDataFile:"currentDataFile",currentUser:"currentUser",currentPackages:"currentPackages",entryType:"entryType",keyOrders:"keyOrders",origin:"origin",pageKey:"pageKey",validPages:"validPages",mode:"mode",isFullPage:"isFullPage"},outputs:{pageChange:"pageChange",requestNavigation:"requestNavigation",requestFullPage:"requestFullPage",rightSideMenuStateChange:"rightSideMenuStateChange",modeChage:"modeChage"},features:[ue.TTD],decls:34,vars:21,consts:[[4,"ngIf"],[1,"px-3",2,"background-color","lightgray","width","100%",3,"hidden"],[1,"fas","fa-greater-than","mx-2"],[3,"hidden"],["expander",""],[2,"background-color","#F0F0F0",3,"collapsedHeight","expandedHeight"],[2,"color","#2d2d2d"],[1,"d-flex","justify-content-between","align-items-center"],[3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"],["style","max-height: 250px; overflow: auto;",4,"ngIf"],[2,"position","relative","overflow","auto","padding","0px",3,"resize"],["sandboxContainer",""],["frameborder","0",2,"position","relative",3,"width","height","src","message","load"],["client",""],["style","position: absolute; background-color: rgba(255, 255, 255, 0.9); top: 0px; left: 0px; right: 0px; bottom: 0px;",4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],[1,"fas","fa-sync-alt"],[1,"fas","fa-expand"],[1,"fas","fa-th-large"],[1,"fas","fa-unlock"],[1,"fas"],[2,"max-height","250px","overflow","auto"],[4,"ngFor","ngForOf"],[2,"font-size","12px","padding","0px",3,"json","expanded"],[2,"position","absolute","background-color","rgba(255, 255, 255, 0.9)","top","0px","left","0px","right","0px","bottom","0px"],["style","position: absolute; top: 30px; left: 50%; transform: translateX(-50%) translateY(-30%);",4,"ngIf"],["class","p-3",4,"ngIf"],[2,"position","absolute","top","30px","left","50%","transform","translateX(-50%) translateY(-30%)"],[1,"display-4","text-center"],[1,"fas","fa-circle-notch","fa-spin"],[1,"p-3"],[1,"d-flex","flex-row"],["mat-stroked-button","",1,"me-2",3,"click"],[1,"fas","fa-times","fa-fw"],["class","container-fluid",4,"ngIf"],["class","contianer-fluid",4,"ngIf"],[1,"container-fluid"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","text-muted"],[1,"fas","fa-cube","fa-lg","me-2"],[1,"fas","fa-cubes","fa-lg","me-2"],[1,"col-12","my-2"],["class","col-md-6 col-lg-4 col-xl-3 p-2",4,"ngIf"],[1,"col-md-6","col-lg-4","col-xl-3","p-2"],["mat-card-avatar","",3,"src",4,"ngIf"],["class","fas fa-scroll fa-fw fa-2x","mat-card-avatar","",4,"ngIf"],["mat-card-image","",3,"mt-4","src",4,"ngIf"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-card-avatar","",3,"src"],["mat-card-avatar","",1,"fas","fa-scroll","fa-fw","fa-2x"],["mat-card-image","",3,"src"],[1,"contianer-fluid"],[3,"routerLink"],["class","col-md-6 col-lg-4 p-2",4,"ngIf"],[1,"col-md-6","col-lg-4","p-2"],[1,"px-4"]],template:function(e,t){if(1&e&&(ue.YNc(0,Ne,15,4,"ng-container",0),ue.TgZ(1,"div",1),ue.TgZ(2,"small"),ue._UZ(3,"i",2),ue.YNc(4,Je,2,1,"ng-container",0),ue.YNc(5,$e,2,1,"ng-container",0),ue.qZA(),ue.qZA(),ue.TgZ(6,"mat-expansion-panel",3,4),ue.TgZ(8,"mat-expansion-panel-header",5),ue.TgZ(9,"mat-panel-title"),ue.TgZ(10,"span",6),ue._uU(11,"Console Logs"),ue.qZA(),ue.qZA(),ue.qZA(),ue.TgZ(12,"div",7),ue.TgZ(13,"div"),ue.TgZ(14,"mat-checkbox",8),ue.NdJ("ngModelChange",function(e){return t.logFilter[0]=e}),ue._uU(15,"Sent"),ue.qZA(),ue.TgZ(16,"mat-checkbox",8),ue.NdJ("ngModelChange",function(e){return t.logFilter[1]=e}),ue._uU(17,"Received"),ue.qZA(),ue.TgZ(18,"mat-checkbox",8),ue.NdJ("ngModelChange",function(e){return t.logFilter[2]=e}),ue._uU(19,"Logged"),ue.qZA(),ue.TgZ(20,"mat-checkbox",8),ue.NdJ("ngModelChange",function(e){return t.logFilter[3]=e}),ue._uU(21,"Events"),ue.qZA(),ue.TgZ(22,"mat-checkbox",8),ue.NdJ("ngModelChange",function(e){return t.logFilter[4]=e}),ue._uU(23,"Errors"),ue.qZA(),ue.TgZ(24,"mat-checkbox",8),ue.NdJ("ngModelChange",function(e){return t.logFilter[5]=e}),ue._uU(25,"Changes"),ue.qZA(),ue.qZA(),ue.TgZ(26,"button",9),ue.NdJ("click",function(){return t.sandboxAPI.logItems=[]}),ue._uU(27,"Clear logs"),ue.qZA(),ue.qZA(),ue.YNc(28,Be,2,1,"div",10),ue.qZA(),ue.TgZ(29,"div",11,12),ue.NdJ("resize",function(){return t.onResize()},!1,ue.Jf7),ue.TgZ(31,"iframe",13,14),ue.NdJ("message",function(e){return t.onMessagereceived(e)},!1,ue.Jf7)("load",function(e){return t.onSrcChanged(e)}),ue.qZA(),ue.YNc(33,ut,3,2,"div",15),ue.qZA()),2&e){var r=ue.MAs(7);ue.Q6J("ngIf",!t.isFullPage),ue.xp6(1),ue.Q6J("hidden",t.isFullPage),ue.xp6(3),ue.Q6J("ngIf","staticPages"===t.entryType||"proxyPages"===t.entryType),ue.xp6(1),ue.Q6J("ngIf","staticPages"!==t.entryType&&"proxyPages"!==t.entryType),ue.xp6(1),ue.Q6J("hidden",t.isFullPage),ue.xp6(2),ue.Q6J("collapsedHeight","28px")("expandedHeight","28px"),ue.xp6(6),ue.Q6J("ngModel",t.logFilter[0]),ue.xp6(2),ue.Q6J("ngModel",t.logFilter[1]),ue.xp6(2),ue.Q6J("ngModel",t.logFilter[2]),ue.xp6(2),ue.Q6J("ngModel",t.logFilter[3]),ue.xp6(2),ue.Q6J("ngModel",t.logFilter[4]),ue.xp6(2),ue.Q6J("ngModel",t.logFilter[5]),ue.xp6(4),ue.Q6J("ngIf",r.expanded),ue.xp6(1),ue.Udp("border",t.isFullPage?"":"thin solid black"),ue.xp6(2),ue.Q6J("width",t.frameWidth)("height",t.frameHeight)("src",t.src,ue.uOi),ue.uIk("sandbox",t.sandboxAuthorized.join(" ")),ue.xp6(2),ue.Q6J("ngIf",t.frameProcessing||"list"===t.mode)}},directives:[c.O5,f.ib,f.yz,f.yK,y.oG,d.JJ,d.On,g.lW,c.sg,w.Y,m.d,v.a8,v.dk,v.n5,v.$j,v.dn,v.hq,v.kc,v.G2,I.yS],pipes:[c.Nd,c.OU],styles:[".mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0 0 0 16px}.mat-checkbox[_ngcontent-%COMP%]{padding-right:14px}"]}),t}(),ct=["sandbox"],dt=function(e){return["/project",e,"info"]};function gt(e,t){if(1&e&&(ue.TgZ(0,"a",6),ue._uU(1),ue.qZA()),2&e){var r=ue.oxw(2);ue.Q6J("routerLink",ue.VKq(2,dt,r.currentProject.id)),ue.xp6(1),ue.hij("Project: ",r.currentProject.name,"")}}function ft(e,t){if(1&e&&(ue.TgZ(0,"span"),ue._uU(1),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(1),ue.Oqu(r.currentPage.name)}}function pt(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue._uU(1,"Project Page: "),ue.YNc(2,ft,2,1,"span",10),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(2),ue.Q6J("ngIf",r.currentPage)}}var ht=function(e){return["/result",e,"info"]};function vt(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue._uU(1,"Result: "),ue.TgZ(2,"a",6),ue.TgZ(3,"u",11),ue._uU(4),ue.qZA(),ue._uU(5),ue.TgZ(6,"u",11),ue._uU(7),ue.qZA(),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(2),ue.Q6J("routerLink",ue.VKq(4,ht,r.currentResult.id)),ue.xp6(2),ue.Oqu(r.currentResult.prefix),ue.xp6(1),ue.Oqu(r.currentResult.name||"(no-name)"),ue.xp6(2),ue.Oqu(r.currentResult.suffix)}}function yt(e,t){if(1&e&&(ue.TgZ(0,"span"),ue._uU(1),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(1),ue.Oqu(r.currentPage.name)}}function xt(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue._uU(1,"Result Page: "),ue.YNc(2,yt,2,1,"span",10),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(2),ue.Q6J("ngIf",r.currentPage)}}var mt=function(e){return["/result",e,"requestProxy"]};function bt(e,t){if(1&e&&(ue.TgZ(0,"span"),ue.TgZ(1,"a",12),ue._uU(2," Proxy "),ue._UZ(3,"i",13),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(1),ue.Q6J("routerLink",ue.VKq(1,mt,r.currentResult.id))}}function kt(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue.YNc(1,bt,4,3,"span",10),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(1),ue.Q6J("ngIf",r.currentResult)}}var Pt=function(e){return["/dataFile",e,"info"]};function Tt(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue._uU(1,"Data File: "),ue.TgZ(2,"a",6),ue.TgZ(3,"u",11),ue._uU(4),ue.qZA(),ue._uU(5),ue.TgZ(6,"u",11),ue._uU(7),ue.qZA(),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(2),ue.Q6J("routerLink",ue.VKq(4,Pt,r.currentDataFile.id)),ue.xp6(2),ue.Oqu(r.currentDataFile.prefix),ue.xp6(1),ue.Oqu(r.currentDataFile.name||"(no-name)"),ue.xp6(2),ue.Oqu(r.currentDataFile.suffix)}}var Zt=function(e){return["/data","api","dataFile",e,"static"]};function wt(e,t){if(1&e&&(ue.TgZ(0,"span"),ue.TgZ(1,"a",12),ue._uU(2," Folder content "),ue._UZ(3,"i",13),ue.qZA(),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(1),ue.Q6J("routerLink",ue.VKq(1,Zt,r.currentDataFile.id))}}function It(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue.YNc(1,wt,4,3,"span",10),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(1),ue.Q6J("ngIf",r.currentDataFile)}}function At(e,t){if(1&e&&(ue.TgZ(0,"span"),ue._uU(1),ue.qZA()),2&e){var r=ue.oxw(3);ue.xp6(1),ue.Oqu(r.currentPage.name)}}function Ct(e,t){if(1&e&&(ue.TgZ(0,"li",9),ue._uU(1,"File Page: "),ue.YNc(2,At,2,1,"span",10),ue.qZA()),2&e){var r=ue.oxw(2);ue.xp6(2),ue.Q6J("ngIf",r.currentPage)}}var Ft=function(){return["/home"]},St=function(){return["/project/list"]};function qt(e,t){if(1&e&&(ue.TgZ(0,"ol",4),ue.TgZ(1,"li",5),ue.TgZ(2,"a",6),ue._uU(3,"Home"),ue.qZA(),ue.qZA(),ue.TgZ(4,"li",5),ue.TgZ(5,"a",6),ue._uU(6,"Project List"),ue.qZA(),ue.qZA(),ue.TgZ(7,"li",5),ue.YNc(8,gt,2,4,"a",7),ue.qZA(),ue.YNc(9,pt,3,1,"li",8),ue.YNc(10,vt,8,6,"li",8),ue.YNc(11,xt,3,1,"li",8),ue.YNc(12,kt,2,1,"li",8),ue.YNc(13,Tt,8,6,"li",8),ue.YNc(14,It,2,1,"li",8),ue.YNc(15,Ct,3,1,"li",8),ue.qZA()),2&e){var r=ue.oxw();ue.xp6(2),ue.Q6J("routerLink",ue.DdM(10,Ft)),ue.xp6(3),ue.Q6J("routerLink",ue.DdM(11,St)),ue.xp6(3),ue.Q6J("ngIf",r.currentProject),ue.xp6(1),ue.Q6J("ngIf","indexPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf",r.currentResult),ue.xp6(1),ue.Q6J("ngIf","resultPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf","proxyPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf",r.currentDataFile),ue.xp6(1),ue.Q6J("ngIf","staticPages"===r.entryType),ue.xp6(1),ue.Q6J("ngIf","filePages"===r.entryType)}}function jt(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"bdp-sandbox",14,15),ue.NdJ("pageChange",function(e){return ue.CHM(r),ue.oxw().onPageChange(e)})("requestNavigation",function(e){return ue.CHM(r),ue.oxw().navigatePage(e)})("requestFullPage",function(e){return ue.CHM(r),ue.oxw().toggleFullPage(e)})("rightSideMenuStateChange",function(e){return ue.CHM(r),ue.oxw().toggleRightSideMenu(e)})("modeChage",function(e){return ue.CHM(r),ue.oxw().onModeChange(e)}),ue.qZA()}if(2&e){var n=ue.oxw();ue.Q6J("currentProject",n.currentProject)("currentResult",n.currentResult)("currentDataFile",n.currentDataFile)("currentPackages",n.currentPackages)("currentUser",n.currentUser)("isFullPage",n.isFullPage)("keyOrders",n.pageKeyOrders)("validPages",n.validPages)("pageKey",n.currentPageKey)("entryType",n.entryType)("mode",n.mode)}}function _t(e,t){1&e&&ue._UZ(0,"i",29)}function Dt(e,t){1&e&&ue._UZ(0,"i",30)}function Rt(e,t){1&e&&(ue.ynx(0),ue._uU(1,"Full page"),ue.BQk())}function Ut(e,t){1&e&&(ue.ynx(0),ue._uU(1,"Compress"),ue.BQk())}function Mt(e,t){if(1&e){var r=ue.EpF();ue.TgZ(0,"div",16),ue.TgZ(1,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.showRightButtonContent=!e.showRightButtonContent}),ue.YNc(2,_t,1,0,"i",18),ue.YNc(3,Dt,1,0,"i",19),ue.TgZ(4,"span",20),ue._uU(5,"MENU"),ue.qZA(),ue.TgZ(6,"span",21),ue._uU(7,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(8,"br"),ue.TgZ(9,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.sandbox&&e.sandbox.historyBack()}),ue._UZ(10,"i",22),ue.TgZ(11,"span",23),ue._uU(12,"Back"),ue.qZA(),ue.TgZ(13,"span",21),ue._uU(14,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(15,"br"),ue.TgZ(16,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.sandbox&&e.sandbox.historyForward()}),ue._UZ(17,"i",24),ue.TgZ(18,"span",23),ue._uU(19,"Forward"),ue.qZA(),ue.TgZ(20,"span",21),ue._uU(21,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(22,"br"),ue.TgZ(23,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.sandbox&&e.sandbox.detectSizeChange()}),ue._UZ(24,"i",25),ue.TgZ(25,"span",23),ue._uU(26,"Adjust size"),ue.qZA(),ue.TgZ(27,"span",21),ue._uU(28,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(29,"br"),ue.TgZ(30,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.sandbox&&e.sandbox.reloadClient()}),ue._UZ(31,"i",26),ue.TgZ(32,"span",23),ue._uU(33,"Refresh"),ue.qZA(),ue.TgZ(34,"span",21),ue._uU(35,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(36,"br"),ue.TgZ(37,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.mode="list"===e.mode?"page":"list"}),ue._UZ(38,"i",27),ue.TgZ(39,"span",23),ue._uU(40,"Page list"),ue.qZA(),ue.TgZ(41,"span",21),ue._uU(42,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(43,"br"),ue.TgZ(44,"a",17),ue.NdJ("click",function(){ue.CHM(r);var e=ue.oxw();return e.toggleFullPage(!e.isFullPage)}),ue._UZ(45,"i",28),ue.TgZ(46,"span",23),ue.YNc(47,Rt,2,0,"ng-container",10),ue.YNc(48,Ut,2,0,"ng-container",10),ue.qZA(),ue.TgZ(49,"span",21),ue._uU(50,"\u276f"),ue.qZA(),ue.qZA(),ue._UZ(51,"br"),ue.qZA()}if(2&e){var n=ue.oxw();ue.Q6J("@rightButtonState",n.showRightButtonContent?"active":"inactive"),ue.xp6(2),ue.Q6J("ngIf",n.showRightButtonContent),ue.xp6(1),ue.Q6J("ngIf",!n.showRightButtonContent),ue.xp6(1),ue.ekj("active",n.showRightButtonContent),ue.xp6(7),ue.ekj("active",n.showRightButtonContent),ue.xp6(7),ue.ekj("active",n.showRightButtonContent),ue.xp6(7),ue.ekj("active",n.showRightButtonContent),ue.xp6(7),ue.ekj("active",n.showRightButtonContent),ue.xp6(5),ue.ekj("active","list"===n.mode),ue.xp6(2),ue.ekj("active",n.showRightButtonContent),ue.xp6(6),ue.ekj("fa-expand-alt",!n.isFullPage)("fa-compress-alt",n.isFullPage),ue.xp6(1),ue.ekj("active",n.showRightButtonContent),ue.xp6(1),ue.Q6J("ngIf",!n.isFullPage),ue.xp6(1),ue.Q6J("ngIf",n.isFullPage)}}var Nt,Jt=function(){var e=function(){function e(t,n,i,a,s,o,u){r(this,e),this.route=t,this.router=n,this.systemService=i,this.infoService=a,this.projectService=s,this.taskService=o,this.accountService=u,this.showRightButtonContent=!1,this.currentResult=null,this.currentDataFile=null,this.currentPage=null,this.currentPageKey=null,this.pageKeyOrders={},this.validPages=new Map,this.isFullPage=!1,this.canInitialize=!1,this.displayRightSideMenu=!0,this.entryType=null,this.mode="page",this._subs=[]}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.systemService.maintainRightSidebarStatus(!0),this._subs.push(this.accountService.currentUser$.subscribe(function(t){return e.currentUser=t})),this._subs.push(this.systemService.sidebarStatus$.subscribe(function(t){e.sandbox&&e.sandbox.detectSizeChange&&(clearTimeout(e.onChildrenResizeTimer),e.onChildrenResizeTimer=setTimeout(function(){return e.sandbox&&e.sandbox.detectSizeChange()},500))})),this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){var r=t.type,n=t.target,i=t.data;if("DataFile"===n||"Result"===n){if(!e.currentProject)return;if(i.project!==e.currentProject.id)return;var a;"DataFile"===n?a=new S.A(i):"Result"===n&&(a=new F.x(i)),e.sandbox&&a&&e.sandbox.notifyDataChange({type:r,target:n,data:a.getModel()})}})),this._subs.push(this.infoService.incomingResultOutput$.subscribe(function(t){if(e.currentProject&&e.sandbox){var r=t.target.split(":");r[0]===e.currentProject.id&&e.sandbox.notifyDataChange({type:t.type,target:"ResultMsg",data:{resultId:r[1],content:t.data}})}})),this._subs.push(this.projectService.currentProject$.subscribe(function(t){e.currentProject=t,t&&(e.pages=t&&Array.isArray(t.packages)&&t.packages[0]?t.packages[0].pages:new me.iY({}),"indexPages"===e.entryType&&e.getValidPages())})),this._subs.push(this.projectService.currentResult$.subscribe(function(t){e.thisResultID&&t&&t.id===e.thisResultID?(e.currentProject&&"resultPages"===e.entryType||"proxyPages"===e.entryType)&&(e.currentResult=t,e.getValidPages()):void 0===t&&(e.currentResult=t)})),this._subs.push(this.projectService.currentDataFile$.subscribe(function(t){e.thisDataFileID&&t&&t.id===e.thisDataFileID?!e.currentProject||"filePages"!==e.entryType&&"staticPages"!==e.entryType||(e.currentDataFile=t,e.getValidPages()):void 0===t&&(e.currentDataFile=t)})),this.route.queryParamMap.subscribe(function(t){var r=t.get("project"),n=t.get("result"),i=t.get("datafile"),a=t.get("static"),s=t.get("proxy");if(e.currentPageKey=t.get("pageKey")||null,e.isFullPage="true"===t.get("fullpage"),r)e.entryType="indexPages",e.projectService.clearCurrentDataFile(),e.projectService.clearCurrentResult(),e.projectService.clearCurrentProject(),e.projectService.setCurrentProject(r,!1);else if(n){"true"===s?e.entryType="proxyPages":(e.entryType="resultPages",e.projectService.clearCurrentDataFile()),e.thisResultID=n;var o=e.projectService.loadResultInfo(n).subscribe(function(){return o.unsubscribe()})}else if(i){e.thisDataFileID=i,"true"===a?e.entryType="staticPages":(e.entryType="filePages",e.projectService.clearCurrentResult());var u=e.projectService.loadDataFileInfo(i).subscribe(function(e){u.unsubscribe()})}e.systemService.maintainRightSidebarStatus(!0)})}},{key:"onResize",value:function(e){var t=this;clearTimeout(this.onResizeTimer),this.onResizeTimer=setTimeout(function(){return t.detectSizeChange()},400)}},{key:"detectSizeChange",value:function(){var e=window.innerWidth<1024;this.isFullPage?this.systemService.toggleSidebar(!1,!0):this.systemService.toggleSidebar(!e)}},{key:"getProxyPags",value:function(){var e=this,t=new Map;if(this.currentProject&&"proxyPages"===this.entryType&&this.currentResult)var r=this.currentResult.id,n=this.projectService.getProxyJobsByResultId(r).subscribe(function(i){if(n.unsubscribe(),i.isError)return e.validPages=t,e.requestFullPage(e.isFullPage),void setTimeout(function(){return e.canInitialize=!0},10);var a,s,o,u=i.success;e.pageKeyOrders=(o=[],(s=r)in(a={})?Object.defineProperty(a,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[s]=o,a);for(var l=0;l<u.length;l++){var c=u[l],d="".concat(r,":").concat(c.jobId);e.pageKeyOrders[r].push(c.jobId),t.set("".concat(d),c.proxy)}e.validPages=t,e.requestFullPage(e.isFullPage),setTimeout(function(){return e.canInitialize=!0},10)})}},{key:"getValidPages",value:function(){var e=this,t=new Map;if(this.currentProject&&Array.isArray(this.currentProject.packages)&&this.currentProject.packages[0]&&this.currentProject.packages[0].pages)var r={},n=this.projectService.getRelatedPackages().subscribe(function(i){if(n.unsubscribe(),i.isError)return e.validPages=new Map,void(e.canInitialize=!0);if(e.entryType){var a=i.success.map(function(e){return new xe.G(e)});if(e.currentPackages=a,e.pageKeyOrders={},Array.isArray(a))for(var s=0;s<a.length;s++){var o=a[s];r[o.id]=[],e.pageKeyOrders[o.id]=[];var u=o.pages.getPagesByType(e.entryType);Array.isArray(u)&&r[o.id].push.apply(r[o.id],u.filter(function(t){var r=!0;switch(e.entryType){case"resultPages":if(0===t.tasks.length)return!0;if(!e.currentResult)return!1;if(t.tasks.indexOf((e.currentResult.task&&e.currentResult.task.key?e.currentResult.task:e.currentResult.taskSnapshot).key)>=0)return!0;r=!1;break;case"filePages":var n=t,i=e.currentDataFile;if(!i)return!1;if(0===n.tags.length){if(!n.format)return!0;if(n.format===i.format)return!0}else{var a=n.rule;if("or"===a)return n.tags.filter(function(e){return i.tags.indexOf(e)>=0}).length>0;if("and"===a)return n.tags.filter(function(e){return i.tags.indexOf(e)>=0}).length===n.tags.length;if("all"===a)return n.tags.filter(function(e){return i.tags.indexOf(e)>=0}).length===i.tags.length}r=!1}return r}));for(var l=0;l<r[o.id].length;l++){var c=r[o.id][l];if(c.key){var d=o.id+":"+c.key;null==e.currentPageKey?(e.currentPageKey=d||null,e.currentPage=c):e.currentPageKey===d&&(e.currentPage=c),t.set(d,c),e.pageKeyOrders[o.id].push(c.key)}}}"proxyPages"!==e.entryType?(e.validPages=t,e.requestFullPage(e.isFullPage),setTimeout(function(){return e.canInitialize=!0})):e.getProxyPags()}});else this.router.navigate(this.currentProject?["/project",this.currentProject.id,"info"]:["/project/list"])}},{key:"onModeChange",value:function(e){this.mode="list"===e?"list":"page"}},{key:"onPageChange",value:function(e){this.canInitialize=!1;var t={project:void 0,result:void 0,datafile:void 0,pageKey:e.package.id+":"+e.page.key,fullpage:!!this.isFullPage,static:void 0,proxy:void 0};if("indexPages"===this.entryType){if(!this.currentProject)return;t.project=this.currentProject.id}else if("resultPages"===this.entryType){if(!this.currentResult)return;t.result=this.currentResult.id,t.proxy=!1}else if("filePages"===this.entryType){if(!this.currentDataFile)return;t.datafile=this.currentDataFile.id}else if("staticPages"===this.entryType){if(!this.currentDataFile)return;t.datafile=this.currentDataFile.id,t.static=!0}else if("proxyPages"===this.entryType){if(!this.currentResult)return;t.result=this.currentResult.id,e.pageKey&&(t.pageKey=e.pageKey),t.proxy=!0}this.currentPageKey=e.package.id+":"+e.page.key,this.mode="page",this.router.navigate(["/page"],{queryParams:t})}},{key:"navigatePage",value:function(e){var t=this;if(e&&!(["indexPages","resultPages","filePages","proxyPages","staticPages"].indexOf(e.type)<0)){var r={project:"indexPages"===e.type?e.itemID:void 0,result:"resultPages"===e.type||"proxyPages"===e.type?e.itemID:void 0,datafile:"filePages"===e.type||"staticPages"===e.type?e.itemID:void 0,pageKey:e.pageKey||void 0,fullpage:!!this.isFullPage,static:"staticPages"===e.type||void 0,proxy:"proxyPages"===e.type||void 0};this.canInitialize=!1,this.router.navigate(["/page"],{queryParams:r}),(e.pageKey===this.currentPageKey&&(r.datafile===this.thisDataFileID&&"filePages"===e.type||r.result===this.thisResultID&&"resultPages"===e.type||r.project&&"indexPages"===e.type)||r.datafile===this.thisDataFileID&&"staticPages"===e.type||r.result===this.thisResultID&&"proxyPages"===e.type)&&setTimeout(function(){return t.canInitialize=!0},10),this.mode="page"}}},{key:"toggleFullPage",value:function(e){var t,r,n,i={project:"indexPages"===this.entryType?null===(t=this.currentProject)||void 0===t?void 0:t.id:void 0,result:"resultPages"===this.entryType||"proxyPages"===this.entryType?null===(r=this.currentResult)||void 0===r?void 0:r.id:void 0,datafile:"filePages"===this.entryType||"staticPages"===this.entryType?null===(n=this.currentDataFile)||void 0===n?void 0:n.id:void 0,pageKey:this.currentPageKey||void 0,fullpage:!!e,static:"staticPages"===this.entryType||void 0,proxy:"proxyPages"===this.entryType||void 0};this.router.navigate(["/page"],{queryParams:i})}},{key:"requestFullPage",value:function(e){var t=window.innerWidth<1024;this.systemService.toggleNavbar(!e),e?this.systemService.toggleSidebar(!1):t||this.systemService.toggleSidebar(!0)}},{key:"toggleRightSideMenu",value:function(e){var t=this;setTimeout(function(){t.displayRightSideMenu=void 0===e?!t.displayRightSideMenu:!!e})}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ue.Y36(I.gz),ue.Y36(I.F0),ue.Y36(pe.o),ue.Y36(de.C),ue.Y36(ce.Y),ue.Y36(ge.M),ue.Y36(fe.B))},e.\u0275cmp=ue.Xpm({type:e,selectors:[["bdp-page"]],viewQuery:function(e,t){var r;(1&e&&ue.Gf(ct,5),2&e)&&(ue.iGM(r=ue.CRH())&&(t.sandbox=r.first))},decls:4,vars:5,consts:[["class","breadcrumb",4,"ngIf"],[1,"bdp-main-container",3,"resize"],["style","display: block;",3,"currentProject","currentResult","currentDataFile","currentPackages","currentUser","isFullPage","keyOrders","validPages","pageKey","entryType","mode","pageChange","requestNavigation","requestFullPage","rightSideMenuStateChange","modeChage",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"breadcrumb-item","active"],[4,"ngIf"],[1,"text-muted"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","ms-2"],[2,"display","block",3,"currentProject","currentResult","currentDataFile","currentPackages","currentUser","isFullPage","keyOrders","validPages","pageKey","entryType","mode","pageChange","requestNavigation","requestFullPage","rightSideMenuStateChange","modeChage"],["sandbox",""],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ms-2"],[1,"chi-rbtn-arrow"],["aria-hidden","true",1,"fas","fa-arrow-left","fa-fw"],[1,"chi-rbtn-content"],["aria-hidden","true",1,"fas","fa-arrow-right","fa-fw"],["aria-hidden","true",1,"fas","fa-expand","fa-fw"],["aria-hidden","true",1,"fas","fa-sync-alt","fa-fw"],[1,"fas","fa-th-large","fa-fw"],[1,"fas","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"]],template:function(e,t){1&e&&(ue.YNc(0,qt,16,12,"ol",0),ue.TgZ(1,"div",1),ue.NdJ("resize",function(e){return t.onResize(e)},!1,ue.Jf7),ue.YNc(2,jt,2,11,"bdp-sandbox",2),ue.qZA(),ue.YNc(3,Mt,52,25,"div",3)),2&e&&(ue.Q6J("ngIf",!t.isFullPage),ue.xp6(1),ue.Udp("padding",t.isFullPage?"0px":"7px"),ue.xp6(1),ue.Q6J("ngIf",t.canInitialize&&t.currentProject&&t.currentPackages&&t.currentUser),ue.xp6(1),ue.Q6J("ngIf",t.displayRightSideMenu))},directives:[c.O5,I.yS,lt],styles:[""],data:{animation:[ye.M]}}),e}(),$t=o(20868),Ot=I.Bz.forChild([{path:"",component:Jt}]),zt=[$t.P],Qt=((Nt=function e(){r(this,e)}).\u0275fac=function(e){return new(e||Nt)},Nt.\u0275mod=ue.oAB({type:Nt}),Nt.\u0275inj=ue.cJS({providers:[zt],imports:[[c.ez,d.u5,p.c,h.Nh,g.ot,f.To,ve,Ot]]}),Nt)}}])}();