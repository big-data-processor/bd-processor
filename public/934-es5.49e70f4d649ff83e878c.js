!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}(self.webpackChunkbdp_client=self.webpackChunkbdp_client||[]).push([[934],{79364:function(e,t,a){"use strict";a.d(t,{s:function(){return Wi}});var o=a(35366),s=a(92935),r=a(52572),l=a(50144),c=a(61116),u=a(36278),f=a(92762),d=a(31041),g=a(13070),p=a(9550),h=a(13841),m=a(87064),Z=a(40994),x=a(84369),v=a(77307),k=a(41818),T=a(99235),w=a(1270),F=a(39199),A=a(99713),b=[(0,A.X$)("highlightRows",[(0,A.SB)("active",(0,A.oB)({"background-color":"yellow"})),(0,A.SB)("inactive",(0,A.oB)({"background-color":"transparent"})),(0,A.eR)("active => inactive",[(0,A.jt)("1s")]),(0,A.eR)("void => inactive",[(0,A.oB)({"background-color":"yellow"}),(0,A.jt)("1s",(0,A.oB)({"background-color":"transparent"}))])])],D=a(16650),y=a(55055),q=a(16363),C=a(7666),N=a(87672);function _(e,t){1&e&&o._UZ(0,"th",29)}function J(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",34),o.NdJ("click",function(){return o.CHM(i),o.oxw().$implicit.stop()}),o._UZ(1,"i",35),o.qZA()}}function U(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",36),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().index;return o.oxw(2).removeQueueElement(e)}),o._UZ(1,"i",37),o.qZA()}}function Q(e,t){if(1&e&&(o.TgZ(0,"td",30),o.TgZ(1,"div",31),o.YNc(2,J,2,0,"button",32),o.YNc(3,U,2,0,"button",33),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngIf",i.uploading),o.xp6(1),o.Q6J("ngIf",!i.uploading)}}function I(e,t){1&e&&(o.TgZ(0,"th",38),o._uU(1,"Prefix"),o.qZA())}function Y(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"mat-form-field",40),o.TgZ(2,"input",41),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.response.success[0].prefix=e}),o.qZA(),o.qZA(),o.BQk()}if(2&e){var a=o.oxw().$implicit;o.xp6(2),o.Q6J("ngModel",a.response.success[0].prefix)}}function M(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,Y,3,1,"ng-container",39),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status)}}function O(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1,"DataFile name"),o.qZA())}function S(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"mat-form-field",40),o.TgZ(2,"input",42),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.response.success[0].name=e}),o.qZA(),o.qZA(),o.BQk()}if(2&e){var a=o.oxw().$implicit;o.xp6(2),o.Q6J("ngModel",a.response.success[0].name)}}function E(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,S,3,1,"ng-container",39),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status)}}function j(e,t){1&e&&(o.TgZ(0,"th",38),o._uU(1,"Suffix"),o.qZA())}function $(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"mat-form-field",40),o.TgZ(2,"input",43),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.response.success[0].suffix=e}),o.qZA(),o.qZA(),o.BQk()}if(2&e){var a=o.oxw().$implicit;o.xp6(2),o.Q6J("ngModel",a.response.success[0].suffix)}}function P(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,$,3,1,"ng-container",39),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status)}}function H(e,t){1&e&&o._UZ(0,"th",29)}function R(e,t){1&e&&o._UZ(0,"td",44)}function B(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1,"Original filename"),o.qZA())}function L(e,t){if(1&e&&(o.TgZ(0,"span",46),o._uU(1),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Oqu(i)}}function z(e,t){if(1&e&&(o.TgZ(0,"strong"),o._uU(1,"*Required format: "),o.YNc(2,L,2,1,"span",45),o.qZA()),2&e){var i=o.oxw(4);o.xp6(2),o.Q6J("ngForOf",i.uploaderOptions.allowedExtensions)}}function V(e,t){if(1&e&&(o.TgZ(0,"p"),o.YNc(1,z,3,1,"strong",39),o.qZA()),2&e){var i=o.oxw(3);o.xp6(1),o.Q6J("ngIf",i.uploaderOptions.allowedExtensions.length)}}function K(e,t){if(1&e&&(o.TgZ(0,"td",30),o._uU(1),o.YNc(2,V,2,1,"p",39),o.qZA()),2&e){var i=t.$implicit,a=o.oxw(2);o.xp6(1),o.hij(" ",null==i?null:i.originalName," "),o.xp6(1),o.Q6J("ngIf",a.uploaderOptions.allowedExtensions.indexOf("*")<0&&-1==a.uploaderOptions.allowedExtensions.indexOf(i.originalName.split(".").pop().toLowerCase()))}}function G(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Size "),o.qZA())}function X(e,t){if(1&e&&(o.TgZ(0,"p"),o.TgZ(1,"strong"),o._uU(2),o.ALo(3,"number"),o.qZA(),o.qZA()),2&e){var i=o.oxw(3);o.xp6(2),o.hij("*file size of less than ",o.xi3(3,1,((null==i.uploaderOptions?null:i.uploaderOptions.allowedFileSize)||0)/1024/1024,".2")," MB is required.")}}function W(e,t){if(1&e&&(o.TgZ(0,"td",30),o._uU(1),o.ALo(2,"number"),o.YNc(3,X,4,4,"p",39),o.qZA()),2&e){var i=t.$implicit,a=o.oxw(2);o.xp6(1),o.hij(" ",o.xi3(2,2,(null==i?null:i.size)/1024/1024,".2")," MB "),o.xp6(2),o.Q6J("ngIf",i.size>a.uploaderOptions.allowedFileSize)}}function ee(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Progress "),o.qZA())}function te(e,t){if(1&e&&(o.TgZ(0,"td",30),o.TgZ(1,"div",31),o._UZ(2,"mat-progress-spinner",47),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("diameter",30)("value",i.progress.percent)}}function ie(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Status "),o.qZA())}function ae(e,t){1&e&&(o.TgZ(0,"span",52),o._UZ(1,"i",53),o._uU(2,"Aborted"),o.qZA())}function ne(e,t){1&e&&(o.TgZ(0,"span",54),o._UZ(1,"i",55),o._uU(2,"Uploading"),o.qZA())}function oe(e,t){1&e&&(o.TgZ(0,"span",56),o._UZ(1,"i",57),o._uU(2,"Success"),o.qZA())}function se(e,t){1&e&&(o.TgZ(0,"span",58),o._UZ(1,"i",53),o._uU(2,"Error"),o.qZA())}function re(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,ae,3,0,"span",48),o.YNc(2,ne,3,0,"span",49),o.YNc(3,oe,3,0,"span",50),o.YNc(4,se,3,0,"span",51),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.abort),o.xp6(1),o.Q6J("ngIf",i.uploading),o.xp6(1),o.Q6J("ngIf",i.done&&!i.error),o.xp6(1),o.Q6J("ngIf",i.error)}}function le(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Speed "),o.qZA())}function ce(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.Oqu(i.progress.speedHumanized)}}function ue(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.hij("Average: ",i.speedAverageHumanized,"")}}function fe(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,ce,2,1,"span",39),o.YNc(2,ue,2,1,"span",39),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.uploading),o.xp6(1),o.Q6J("ngIf",i.done)}}function de(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Tags "),o.qZA())}var ge=function(){return[]};function pe(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"bdp-tag-input",59),o.NdJ("tagChange",function(e){o.CHM(i);var t=o.oxw().$implicit;return o.oxw(2).onTagChanged(e,t.response.success[0])}),o.qZA(),o.BQk()}if(2&e){var a=o.oxw().$implicit,n=o.oxw(2);o.xp6(1),o.Q6J("packages",(null==n.project?null:n.project.packages)||o.DdM(4,ge))("tasks",n.tasks)("tags",a.response.success[0].tags)("disabled",n.isDataFileUpdating[a.response.success[0].id])}}function he(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,pe,2,5,"ng-container",39),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status)}}function me(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Link "),o.qZA())}var Ze=function(e){return["/dataFile",e,"info"]};function xe(e,t){if(1&e&&(o.TgZ(0,"a",61),o._UZ(1,"span",62),o.qZA()),2&e){var i=o.oxw().$implicit;o.Q6J("routerLink",o.VKq(1,Ze,i.response.success[0].id))}}function ve(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,xe,2,3,"a",60),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status)}}function ke(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Controls "),o.qZA())}function Te(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",64),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).onDeleteDataFile(e.response.success[0].id)}),o._UZ(1,"i",65),o.qZA()}}function we(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",64),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).onUpdateDataFile(e.response.success[0])}),o._UZ(1,"i",66),o.qZA()}}function Fe(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,Te,2,0,"button",63),o.YNc(2,we,2,0,"button",63),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status),o.xp6(1),o.Q6J("ngIf",i.response&&!i.response.isError&&i.response.success&&3!==i.response.success[0].status)}}function Ae(e,t){1&e&&o._UZ(0,"tr",67)}function be(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"tr",68),o.NdJ("@highlightRows.done",function(e){var t=o.CHM(i).$implicit;return o.oxw(2).resetState(e,t)}),o.qZA()}if(2&e){var a=t.$implicit,n=o.oxw(2);o.Q6J("@highlightRows",a&&a.response&&a.response.success&&a.response.success[0]&&n.highlightController[a.response.success[0].id]?"active":"inactive")}}function De(e,t){if(1&e&&o._UZ(0,"tr",69),2&e){var i=t.$implicit,a=o.oxw(2);o.Q6J("@highlightRows",i&&i.response&&i.response.success&&i.response.success[0]&&a.highlightController[i.response.success[0].id]?"active":"inactive")}}var ye=function(){return["deleteIcon","status","name","size","speed","link"]},qe=function(){return["progress","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Ce(e,t){if(1&e&&(o.TgZ(0,"table",8),o.ynx(1,9),o.YNc(2,_,1,0,"th",10),o.YNc(3,Q,4,2,"td",11),o.BQk(),o.ynx(4,12),o.YNc(5,I,2,0,"th",13),o.YNc(6,M,2,1,"td",11),o.BQk(),o.ynx(7,14),o.YNc(8,O,2,0,"th",10),o.YNc(9,E,2,1,"td",11),o.BQk(),o.ynx(10,15),o.YNc(11,j,2,0,"th",13),o.YNc(12,P,2,1,"td",11),o.BQk(),o.ynx(13,16),o.YNc(14,H,1,0,"th",10),o.YNc(15,R,1,0,"td",17),o.BQk(),o.ynx(16,18),o.YNc(17,B,2,0,"th",10),o.YNc(18,K,3,2,"td",11),o.BQk(),o.ynx(19,19),o.YNc(20,G,2,0,"th",10),o.YNc(21,W,4,5,"td",11),o.BQk(),o.ynx(22,20),o.YNc(23,ee,2,0,"th",10),o.YNc(24,te,3,2,"td",11),o.BQk(),o.ynx(25,21),o.YNc(26,ie,2,0,"th",10),o.YNc(27,re,5,4,"td",11),o.BQk(),o.ynx(28,22),o.YNc(29,le,2,0,"th",10),o.YNc(30,fe,3,2,"td",11),o.BQk(),o.ynx(31,23),o.YNc(32,de,2,0,"th",10),o.YNc(33,he,2,1,"td",11),o.BQk(),o.ynx(34,24),o.YNc(35,me,2,0,"th",10),o.YNc(36,ve,2,1,"td",11),o.BQk(),o.ynx(37,25),o.YNc(38,ke,2,0,"th",10),o.YNc(39,Fe,3,2,"td",11),o.BQk(),o.YNc(40,Ae,1,0,"tr",26),o.YNc(41,be,1,1,"tr",27),o.YNc(42,De,1,1,"tr",28),o.qZA()),2&e){var i=o.oxw();o.Q6J("dataSource",i.uploader.queue),o.xp6(40),o.Q6J("matHeaderRowDef",o.DdM(4,ye)),o.xp6(1),o.Q6J("matRowDefColumns",o.DdM(5,ye)),o.xp6(1),o.Q6J("matRowDefColumns",o.DdM(6,qe))}}var Ne=function(e){return{"nv-file-over":e}},_e=function(){var e=function(){function e(t,a,n){i(this,e),this.uploader=t,this.projectService=a,this.infoService=n,this.fileLimits=1/0,this.tags=[],this.validTags=[],this.name="",this.desc="",this.tasks=[],this.prefix="",this.suffix="",this.navigateDataFile=new o.vpe,this.deleteDataFile=new o.vpe,this.updateDataFile=new o.vpe,this.separatorKeysCodes=[T.K5,T.OC],this.hasBaseDropZoneOver=!1,this.filteredTags=[],this.isDataFileUpdating={},this._subs=[],this.highlightController={},this.uploaderOptions={url:"",withCredentials:!0,filterExtensions:!0,allowedExtensions:[],allowedFileSize:1073741824,autoUpload:!0,calculateSpeed:!0,previewUrl:!1,data:{folder:"",keepFileName:!1,tags:[],name:"",desc:"",prefix:"",suffix:""},maxUploads:3},this.uploadEvents=new o.vpe,this.zone=new o.R0b({enableLongStackTrace:!0}),this.responses=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.project&&(this.uploaderOptions.allowedExtensions=this.allowedExtensions||[],this.uploaderOptions.url=this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload",this.uploaderOptions.data={folder:this.folder,keepFileName:this.keepFileName,tags:this.tags,name:this.name,desc:this.desc,prefix:this.prefix,suffix:this.suffix}),this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("update"===t.type&&"DataFile"===t.target){if(Array.isArray(e.uploader.queue)){var i=t.data;if(!i)return;for(var a=0;a<e.uploader.queue.length;a++){var n=e.uploader.queue[a],o=void 0;if(n&&(n.response&&Array.isArray(n.response.success)&&(o=n.response.success[0]),o&&i.id===o.id)){o.prefix=i.prefix,o.name=i.name,o.suffix=i.suffix,o.desc=i.desc,o.tags=i.tags,e.highlightController[i.id]=!0;break}}}}else if("remove"===t.type&&"DataFile"===t.target&&Array.isArray(e.uploader.queue))for(var s=0;s<e.uploader.queue.length;s++){var r=e.uploader.queue[s];if(r.response&&r.response.success&&r.response.success[0]&&r.response.success[0].id===t.data.id){e.removeQueueElement(s);break}}}))}},{key:"ngOnChanges",value:function(e){for(var t in e)if("folder"===t)this.folder=e[t].currentValue,this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{folder:this.folder})});else if("keepFileName"===t){var i=Object.assign({},this.uploaderOptions.data,{keepFileName:e[t].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:i})}else if("tags"===t)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{tags:e[t].currentValue})});else if("name"===t){var a=Object.assign({},this.uploaderOptions.data,{name:e[t].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:a})}else if("desc"===t)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{desc:e[t].currentValue})});else if("prefix"===t)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{prefix:e[t].currentValue})});else if("suffix"===t)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{suffix:e[t].currentValue})});else if("project"===t){if(this.project=e[t].currentValue,!this.project)return;this.uploaderOptions=Object.assign({},this.uploaderOptions,{url:this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload"})}else"fileLimits"===t&&(this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{allowedFileSize:parseFloat(e[t].currentValue)})}));this.uploader.setOptions(this.uploaderOptions)}},{key:"fileOverBase",value:function(e){-1!==(e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer).types.indexOf("Files")&&(this.hasBaseDropZoneOver=!0)}},{key:"fileLeave",value:function(e){var t=this;setTimeout(function(){return t.hasBaseDropZoneOver=!1},0)}},{key:"onDeleteDataFile",value:function(e){for(var t=0;t<this.uploader.queue.length;t++){var i=this.uploader.queue[t];if(i.response&&i.response.success&&i.response.success[0]&&i.response.success[0].id===e){this.removeQueueElement(t);break}}this.deleteDataFile.emit(e)}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(new w.A(e))}},{key:"removeQueueElement",value:function(e){return this.uploader.removeFileFromQueue(e),this.uploaderProgress&&this.uploaderProgress.renderRows()}},{key:"handleMultipleUpload",value:function(e){var t=this,i=this.responses.findIndex(function(t){return t.id===e.id});-1===i?this.responses.push(e):this.zone.run(function(){t.responses[i]=e});var a=e.response;return a&&a.isError&&e.setError(a.errors[0].details),this.uploaderProgress&&this.uploaderProgress.renderRows()}},{key:"fileDropEvent",value:function(e){var t=this;console.log(this.uploader.queue),setTimeout(function(){return t.hasBaseDropZoneOver=!1,t.uploaderProgress&&t.uploaderProgress.renderRows()},0)}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"startUpload",value:function(){this.uploadEvents.emit("startUpload")}},{key:"resetState",value:function(e,t){t&&t.response&&t.response.success&&t.response.success[0]&&delete this.highlightController[t.response.success[0].id]}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(D.F),o.Y36(r.Y),o.Y36(y.C))},e.\u0275cmp=o.Xpm({type:e,selectors:[["chi-file-uploader"]],viewQuery:function(e,t){var i;(1&e&&o.Gf(F.BZ,5),2&e)&&(o.iGM(i=o.CRH())&&(t.uploaderProgress=i.first))},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",fileLimits:"fileLimits",tags:"tags",validTags:"validTags",name:"name",desc:"desc",tasks:"tasks",prefix:"prefix",suffix:"suffix"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},features:[o.TTD],decls:14,vars:6,consts:[[1,"mt-3"],["chiFileDropper","","multiple","true",1,"my-drop-zone",3,"options","ngClass","dragover","dragleave","drop","onUpload"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-5x","fa-upload"],["type","file","id","upload_file_selector","chiFileSelector","","multiple","",1,"hide-input",3,"options"],["for","upload_file_selector",1,"input-label"],[1,"box__dragndrop"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","empty"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","size"],["matColumnDef","progress"],["matColumnDef","status"],["matColumnDef","speed"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","style","border-bottom: 1px solid black;",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent","mat-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","mat-button","",3,"click"],[1,"fas","fa-ban","fa-fw","fa-lg"],["mat-icon-button","","color","primary",3,"click"],[1,"far","fa-times-circle","fa-fw","fa-lg","mr-2"],["mat-header-cell","",2,"width","80px"],[4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],["mat-cell",""],["class","label label-primary",4,"ngFor","ngForOf"],[1,"label","label-primary"],[3,"diameter","value"],["class","text-muted",4,"ngIf"],["class","text-primary",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-muted"],["aria-hidden","true",1,"fas","fa-times","fa-fw","mr-2"],[1,"text-primary"],[1,"fas","fa-spin","fa-circle-notch","fa-fw","mr-2"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw","mr-2"],[1,"text-danger"],[3,"packages","tasks","tags","disabled","tagChange"],["target","_blank",3,"routerLink",4,"ngIf"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""],["mat-row","",2,"border-bottom","1px solid black"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.NdJ("dragover",function(e){return t.fileOverBase(e)})("dragleave",function(e){return t.fileLeave(e)})("drop",function(e){return t.fileDropEvent(e)})("onUpload",function(e){return t.handleMultipleUpload(e)}),o.TgZ(2,"div",2),o._UZ(3,"i",3),o._UZ(4,"br"),o._UZ(5,"input",4),o.TgZ(6,"label",5),o.TgZ(7,"strong"),o._uU(8,"Choose a file"),o.qZA(),o.TgZ(9,"span",6),o._uU(10," or drag it here"),o.qZA(),o._uU(11,". "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(12,Ce,43,7,"table",7),o._UZ(13,"br")),2&e&&(o.xp6(1),o.Q6J("options",t.uploaderOptions)("ngClass",o.VKq(4,Ne,t.hasBaseDropZoneOver)),o.xp6(4),o.Q6J("options",t.uploaderOptions),o.xp6(7),o.Q6J("ngIf",t.uploader.queue.length>0))},directives:[q.e,c.mk,C.x,c.O5,F.BZ,F.w1,F.fO,F.Dz,F.as,F.nj,F.ge,F.ev,x.lW,g.KE,p.Nt,d.Fj,d.nD,d.JJ,d.On,c.sg,N.Ou,k.y,l.yS,F.XQ,F.Gk],pipes:[c.JJ],styles:[".my-drop-zone[_ngcontent-%COMP%]{font-size:1.25rem;background-color:#c8dadf;position:relative;padding:60px 20px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.nv-file-over[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}.hide-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;z-index:-1;position:absolute}.input-label[_ngcontent-%COMP%]{max-width:80%;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden}.input-label[_ngcontent-%COMP%]:hover   strong[_ngcontent-%COMP%]{color:#39bfd3}@-webkit-keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}"],data:{animation:[b]}}),e}(),Je=a(48355);function Ue(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).linkAccount()}),o._uU(1,"Link to your google accounts"),o.qZA()}}function Qe(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",7),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).linkAccount()}),o._uU(1,"Switch account"),o.qZA()}}function Ie(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",8),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).showPicker()}),o._uU(1,"Import from google drive"),o.qZA()}}function Ye(e,t){1&e&&o._UZ(0,"th",29)}function Me(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",30),o.TgZ(1,"div",31),o.TgZ(2,"button",32),o.NdJ("click",function(){var e=o.CHM(i).$implicit;return o.oxw(3).removeFromList(e.id)}),o._UZ(3,"i",33),o.qZA(),o.qZA(),o.qZA()}}function Oe(e,t){1&e&&(o.TgZ(0,"th",34),o._uU(1,"Prefix"),o.qZA())}function Se(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"mat-form-field",36),o.TgZ(1,"input",37),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.dataFile.prefix=e}),o.qZA(),o.qZA()}if(2&e){var a=o.oxw().$implicit;o.xp6(1),o.Q6J("ngModel",a.dataFile.prefix)}}function Ee(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,Se,2,1,"mat-form-field",35),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",null==i.dataFile?null:i.dataFile.id)}}function je(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1,"DataFile name"),o.qZA())}function $e(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"mat-form-field",36),o.TgZ(1,"input",38),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.dataFile.name=e}),o.qZA(),o.qZA()}if(2&e){var a=o.oxw().$implicit;o.xp6(1),o.Q6J("ngModel",a.dataFile.name)}}function Pe(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,$e,2,1,"mat-form-field",35),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.dataFile)}}function He(e,t){1&e&&(o.TgZ(0,"th",34),o._uU(1,"Suffix"),o.qZA())}function Re(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"mat-form-field",36),o.TgZ(1,"input",39),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.dataFile.suffix=e}),o.qZA(),o.qZA()}if(2&e){var a=o.oxw().$implicit;o.xp6(1),o.Q6J("ngModel",a.dataFile.suffix)}}function Be(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,Re,2,1,"mat-form-field",35),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.dataFile)}}function Le(e,t){1&e&&(o.TgZ(0,"th",34),o._uU(1,"Mime Type"),o.qZA())}function ze(e,t){if(1&e&&(o.TgZ(0,"td",30),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Oqu(i.mimeType)}}function Ve(e,t){1&e&&o._UZ(0,"th",29)}function Ke(e,t){if(1&e&&(o.TgZ(0,"td",30),o._UZ(1,"img",40),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("src",i.iconUrl,o.LSH)}}function Ge(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1,"Original Filename"),o.qZA())}function Xe(e,t){if(1&e&&(o.TgZ(0,"td",30),o.TgZ(1,"a",41),o._uU(2),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("href",i.embedUrl,o.LSH),o.xp6(1),o.Oqu(i.name)}}function We(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Status "),o.qZA())}function et(e,t){1&e&&(o.TgZ(0,"span",47),o._UZ(1,"i",48),o._uU(2," Pending"),o.qZA())}function tt(e,t){1&e&&(o.TgZ(0,"span",49),o._UZ(1,"i",50),o._uU(2," Processing"),o.qZA())}function it(e,t){1&e&&(o.TgZ(0,"span",51),o._UZ(1,"i",52),o._uU(2," Imported"),o.qZA())}function at(e,t){1&e&&(o.TgZ(0,"span",53),o._UZ(1,"i",54),o._uU(2," Error"),o.qZA())}function nt(e,t){1&e&&(o.TgZ(0,"td",42),o.YNc(1,et,3,0,"span",43),o.YNc(2,tt,3,0,"span",44),o.YNc(3,it,3,0,"span",45),o.YNc(4,at,3,0,"span",46),o.qZA()),2&e&&(o.Q6J("ngSwitch",t.$implicit.status),o.xp6(1),o.Q6J("ngSwitchCase","pending"),o.xp6(1),o.Q6J("ngSwitchCase","importing"),o.xp6(1),o.Q6J("ngSwitchCase","success"),o.xp6(1),o.Q6J("ngSwitchCase","error"))}function ot(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Tags "),o.qZA())}var st=function(){return[]};function rt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"bdp-tag-input",56),o.NdJ("tagChange",function(e){o.CHM(i);var t=o.oxw().$implicit;return o.oxw(3).onTagChanged(e,t.dataFile)}),o.qZA()}if(2&e){var a=o.oxw().$implicit,n=o.oxw(3);o.Q6J("packages",(null==n.project?null:n.project.packages)||o.DdM(3,st))("tasks",n.tasks)("tags",a.dataFile.tags)}}function lt(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,rt,1,4,"bdp-tag-input",55),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.dataFile)}}function ct(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Link "),o.qZA())}var ut=function(e){return["/dataFile",e,"info"]};function ft(e,t){if(1&e&&(o.TgZ(0,"a",58),o._UZ(1,"span",59),o.qZA()),2&e){var i=o.oxw().$implicit;o.Q6J("routerLink",o.VKq(1,ut,i.dataFile.id))}}function dt(e,t){if(1&e&&(o.TgZ(0,"td",30),o.TgZ(1,"div",31),o.YNc(2,ft,2,3,"a",57),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngIf",i.dataFile)}}function gt(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Controls "),o.qZA())}function pt(e,t){1&e&&(o.TgZ(0,"span"),o._uU(1,"Import"),o.qZA())}function ht(e,t){1&e&&(o.TgZ(0,"span"),o._uU(1,"Importing"),o.qZA())}function mt(e,t){1&e&&(o.TgZ(0,"span"),o._uU(1,"Imported"),o.qZA())}function Zt(e,t){1&e&&(o.TgZ(0,"span"),o._uU(1,"Error"),o.qZA())}function xt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",30),o.TgZ(1,"button",60),o.NdJ("click",function(){var e=o.CHM(i).$implicit;return o.oxw(3).importFile(e)}),o._UZ(2,"span",61),o.YNc(3,pt,2,0,"span",62),o.YNc(4,ht,2,0,"span",62),o.YNc(5,mt,2,0,"span",62),o.YNc(6,Zt,2,0,"span",62),o.qZA(),o.qZA()}if(2&e){var a=t.$implicit;o.xp6(1),o.Q6J("disabled","pending"!==a.status),o.xp6(2),o.Q6J("ngIf","pending"==a.status),o.xp6(1),o.Q6J("ngIf","importing"==a.status),o.xp6(1),o.Q6J("ngIf","success"==a.status),o.xp6(1),o.Q6J("ngIf","error"==a.status)}}function vt(e,t){1&e&&(o.TgZ(0,"th",29),o._uU(1," Controls "),o.qZA())}function kt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",63),o.NdJ("click",function(){o.CHM(i);var e=o.oxw(2).$implicit;return o.oxw(3).onUpdateDataFile(e.dataFile)}),o._UZ(1,"i",66),o.qZA()}}function Tt(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"button",63),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(3).onDeleteDataFile(e.dataFile.id,e.id)}),o._UZ(2,"i",64),o.qZA(),o.YNc(3,kt,2,0,"button",65),o.BQk()}if(2&e){var a=o.oxw().$implicit;o.xp6(3),o.Q6J("ngIf",3!==a.status)}}function wt(e,t){if(1&e&&(o.TgZ(0,"td",30),o.YNc(1,Tt,4,1,"ng-container",62),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.dataFile&&"success"==i.status)}}function Ft(e,t){1&e&&o._UZ(0,"tr",67)}function At(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"tr",68),o.NdJ("@highlightRows.done",function(e){var t=o.CHM(i).$implicit;return o.oxw(3).resetState(e,t.dataFile)}),o.qZA()}if(2&e){var a=t.$implicit,n=o.oxw(3);o.Q6J("@highlightRows",a&&a.dataFile&&n.highlightController[a.dataFile.id]?"active":"inactive")}}function bt(e,t){if(1&e&&o._UZ(0,"tr",68),2&e){var i=t.$implicit,a=o.oxw(3);o.Q6J("@highlightRows",i&&i.dataFile&&a.highlightController[i.dataFile.id]?"active":"inactive")}}var Dt=function(){return["deleteIcon","iconUrl","name","mimeType","status","importBtn"]},yt=function(){return["link","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function qt(e,t){if(1&e&&(o.TgZ(0,"div",9),o.TgZ(1,"table",10),o.ynx(2,11),o.YNc(3,Ye,1,0,"th",12),o.YNc(4,Me,4,0,"td",13),o.BQk(),o.ynx(5,14),o.YNc(6,Oe,2,0,"th",15),o.YNc(7,Ee,2,1,"td",13),o.BQk(),o.ynx(8,16),o.YNc(9,je,2,0,"th",12),o.YNc(10,Pe,2,1,"td",13),o.BQk(),o.ynx(11,17),o.YNc(12,He,2,0,"th",15),o.YNc(13,Be,2,1,"td",13),o.BQk(),o.ynx(14,18),o.YNc(15,Le,2,0,"th",15),o.YNc(16,ze,3,1,"td",13),o.BQk(),o.ynx(17,19),o.YNc(18,Ve,1,0,"th",12),o.YNc(19,Ke,2,1,"td",13),o.BQk(),o.ynx(20,20),o.YNc(21,Ge,2,0,"th",12),o.YNc(22,Xe,3,2,"td",13),o.BQk(),o.ynx(23,21),o.YNc(24,We,2,0,"th",12),o.YNc(25,nt,5,5,"td",22),o.BQk(),o.ynx(26,23),o.YNc(27,ot,2,0,"th",12),o.YNc(28,lt,2,1,"td",13),o.BQk(),o.ynx(29,24),o.YNc(30,ct,2,0,"th",12),o.YNc(31,dt,3,1,"td",13),o.BQk(),o.ynx(32,25),o.YNc(33,gt,2,0,"th",12),o.YNc(34,xt,7,5,"td",13),o.BQk(),o.ynx(35,26),o.YNc(36,vt,2,0,"th",12),o.YNc(37,wt,2,1,"td",13),o.BQk(),o.YNc(38,Ft,1,0,"tr",27),o.YNc(39,At,1,1,"tr",28),o.YNc(40,bt,1,1,"tr",28),o.qZA(),o.qZA()),2&e){var i=o.oxw(2);o.xp6(1),o.Q6J("dataSource",i._selectedDocs),o.xp6(37),o.Q6J("matHeaderRowDef",o.DdM(4,Dt)),o.xp6(1),o.Q6J("matRowDefColumns",o.DdM(5,Dt)),o.xp6(1),o.Q6J("matRowDefColumns",o.DdM(6,yt))}}function Ct(e,t){if(1&e&&(o.TgZ(0,"div",1),o.YNc(1,Ue,2,0,"button",2),o.YNc(2,Qe,2,0,"button",3),o.YNc(3,Ie,2,0,"button",4),o.YNc(4,qt,41,7,"div",5),o.qZA()),2&e){var i=o.oxw();o.xp6(1),o.Q6J("ngIf",!i.oauthToken),o.xp6(1),o.Q6J("ngIf",i.authApiLoaded&&i.oauthToken),o.xp6(1),o.Q6J("ngIf",i.pickerApiLoaded&&i.oauthToken),o.xp6(1),o.Q6J("ngIf",i._selectedDocs.length>0)}}var Nt=function(){var e=function(){function e(t,a,n,s){i(this,e),this.projectService=t,this.router=a,this.systemService=n,this.infoService=s,this.tags=[],this.keepFileName=!0,this.name="",this.desc="",this.prefix="",this.suffix="",this.tasks=[],this.navigateDataFile=new o.vpe,this.deleteDataFile=new o.vpe,this.updateDataFile=new o.vpe,this.pickerApiLoaded=!1,this.authApiLoaded=!1,this.highlightController={},this.clientId="",this._selectedDocs=[],this.appId="",this.scope=["https://www.googleapis.com/auth/drive.readonly"],this.authToAuthResult={},this._subs=[],this.authToPicker={},this._gapi=gapi,this.zone=new o.R0b({enableLongStackTrace:!0})}return n(e,[{key:"ngOnInit",value:function(){var e=this;if(this._selectedDocs=this.projectService._googleDriveImportQueue,this._gapi.load("picker",{callback:function(){return e.zone.run(function(){return e.pickerApiLoaded=!0})}}),this._gapi.load("auth",{callback:function(){return e.zone.run(function(){return e.authApiLoaded=!0})}}),this.projectService.sysInfo.googleClientID){this.clientId=this.projectService.sysInfo.googleClientID;var t=this.clientId.split("-");this.appId=t[0]}else this._subs.push(this.systemService.sysInfo$.subscribe(function(t){t&&(e.clientId=t.googleClientID,e.appId=e.clientId.split("-")[0])}));this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("DataFile"===t.target)if("update"===t.type)for(var i=t.data,a=0;a<e._selectedDocs.length;a++){var n=e._selectedDocs[a].dataFile;if(n&&i.id===n.id){n.prefix=i.prefix,n.name=i.name,n.suffix=i.suffix,n.desc=i.desc,n.tags=i.tags,e.highlightController[i.id]=!0;break}}else if("remove"===t.type)for(var o=0;o<e._selectedDocs.length;o++)if(e._selectedDocs[o].dataFile&&e._selectedDocs[o].dataFile.id===t.data.id){e._selectedDocs.splice(o,1),e.selectedDocTable&&e.selectedDocTable.renderRows();break}}))}},{key:"selectedDocs",get:function(){return this._selectedDocs}},{key:"linkAccount",value:function(){var e=this;this._gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1,authuser:-1},function(t){e.zone.run(function(){return e.oauthToken=t.access_token}),e.oauthToken&&(e.authToAuthResult[e.oauthToken]=t,e.showPicker())})}},{key:"showPicker",value:function(){var e=this;this.oauthToken&&(this.authToPicker[this.oauthToken]?this.authToPicker[this.oauthToken].setVisible(!0):this.pickerApiLoaded&&this.oauthToken&&(this.authToPicker[this.oauthToken]=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.DOCS_IMAGES).addView(google.picker.ViewId.PRESENTATIONS).addView(google.picker.ViewId.SPREADSHEETS).setOAuthToken(this.oauthToken).setAppId(this.appId).setDeveloperKey(this.apiKey).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setMaxItems(5).setCallback(function(t){return e.pickerCallback(t)}).build(),this.authToPicker[this.oauthToken].setVisible(!0)))}},{key:"pickerCallback",value:function(e){if(this.oauthToken){var t=[];e[google.picker.Response.ACTION]===google.picker.Action.PICKED&&(t=e[google.picker.Response.DOCUMENTS],this.appendFiles(t,this.oauthToken))}}},{key:"appendFiles",value:function(e,t){var i=this;t&&(e.forEach(function(e){e.oauthToken=i.oauthToken,e.status="pending",e.dataFile=void 0}),this._selectedDocs.push.apply(this._selectedDocs,e),this.selectedDocTable&&this.selectedDocTable.renderRows())}},{key:"removeFromList",value:function(e){for(var t=0;t<this._selectedDocs.length;t++)if(this._selectedDocs[t].id===e){this._selectedDocs.splice(t,1);break}this.selectedDocTable&&this.selectedDocTable.renderRows()}},{key:"importFile",value:function(e){if(this.project){this.zone.run(function(){return e.status="importing"});var t=this.projectService.importData(e.id,e.name,this.desc||e.description,e.mimeType,e.oauthToken,this.project.id,this.prefix,this.suffix,this.name,this.tags||[],this.folder||"",!!this.keepFileName).subscribe(function(i){t.unsubscribe(),i.isError?e.status="error":(e.status="success",e.dataFile=i.success)})}}},{key:"gotoDataFile",value:function(e){this.router.navigate(["/dataFile",e,"info"])}},{key:"resetState",value:function(e,t){t&&t.id&&this.highlightController[t.id]&&delete this.highlightController[t.id]}},{key:"onDeleteDataFile",value:function(e,t){this.removeFromList(t),this.deleteDataFile.emit(e)}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(e)}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()});for(var e=Object.keys(this.authToPicker),t=0;t<e.length;t++)this.authToPicker[e[t]].dispose(),delete this.authToPicker[e[t]];e=Object.keys(this.authToAuthResult);for(var i=0;i<e.length;i++)this.oauthToken&&this.authToAuthResult[this.oauthToken]["g-oauth-window"].close();this.authToPicker=void 0,delete this._gapi}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.Y),o.Y36(l.F0),o.Y36(Je.o),o.Y36(y.C))},e.\u0275cmp=o.Xpm({type:e,selectors:[["chi-google-picker"]],viewQuery:function(e,t){var i;(1&e&&o.Gf(F.BZ,5),2&e)&&(o.iGM(i=o.CRH())&&(t.selectedDocTable=i.first))},inputs:{project:"project",allowedExtensions:"allowedExtensions",tags:"tags",keepFileName:"keepFileName",folder:"folder",apiKey:"apiKey",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:1,vars:1,consts:[["class","container-fluid p-3",4,"ngIf"],[1,"container-fluid","p-3"],["mat-raised-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],["class","mt-3","mat-button","",3,"click",4,"ngIf"],["class","mt-3","mat-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],["mat-button","",1,"mt-3",3,"click"],["mat-button","","color","primary",1,"mt-3",3,"click"],[1,"row"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","mimeType"],["matColumnDef","iconUrl"],["matColumnDef","name"],["matColumnDef","status"],["mat-cell","","class","px-2",3,"ngSwitch",4,"matCellDef"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","importBtn"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],["style","width: 100%;",4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[3,"src"],["target","_blank",3,"href"],["mat-cell","",1,"px-2",3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],[1,"text-info"],[1,"fa","fa-hourglass-half"],[1,"text-warning"],[1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],[1,"fas","fa-check","fa-fw"],[1,"text-danger"],[1,"fas","fa-times","fa-fw"],[3,"packages","tasks","tags","tagChange",4,"ngIf"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-raised-button","",3,"disabled","click"],[1,"fas","fa-cloud-upload-alt","fa-fw","fa-lg","mr-4"],[4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&o.YNc(0,Ct,5,4,"div",0),2&e&&o.Q6J("ngIf",t.clientId)},directives:[c.O5,x.lW,F.BZ,F.w1,F.fO,F.Dz,F.as,F.nj,F.ge,F.ev,g.KE,p.Nt,d.Fj,d.nD,d.JJ,d.On,c.RF,c.n9,k.y,x.zs,l.yS,F.XQ,F.Gk],encapsulation:2,data:{animation:[b]}}),e}();function _t(e,t){1&e&&o._UZ(0,"th",23)}function Jt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",24),o.TgZ(1,"div",25),o.TgZ(2,"button",26),o.NdJ("click",function(){var e=o.CHM(i).$implicit;return o.oxw(2).removeFromList(e.dataFile.id)}),o._UZ(3,"i",27),o.qZA(),o.qZA(),o.qZA()}}function Ut(e,t){1&e&&(o.TgZ(0,"th",28),o._uU(1,"Prefix"),o.qZA())}function Qt(e,t){if(1&e&&(o.TgZ(0,"td",24),o.TgZ(1,"mat-form-field",1),o.TgZ(2,"input",29),o.NdJ("ngModelChange",function(e){return t.$implicit.dataFile.prefix=e}),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngModel",i.dataFile.prefix)}}function It(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1,"DataFile name"),o.qZA())}function Yt(e,t){if(1&e&&(o.TgZ(0,"td",24),o.TgZ(1,"mat-form-field",1),o.TgZ(2,"input",30),o.NdJ("ngModelChange",function(e){return t.$implicit.dataFile.name=e}),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngModel",i.dataFile.name)}}function Mt(e,t){1&e&&(o.TgZ(0,"th",28),o._uU(1,"Suffix"),o.qZA())}function Ot(e,t){if(1&e&&(o.TgZ(0,"td",24),o.TgZ(1,"mat-form-field",1),o.TgZ(2,"input",31),o.NdJ("ngModelChange",function(e){return t.$implicit.dataFile.suffix=e}),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngModel",i.dataFile.suffix)}}function St(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1," Status "),o.qZA())}function Et(e,t){1&e&&(o.TgZ(0,"span"),o._UZ(1,"span",33),o._uU(2,"Importing"),o.qZA())}function jt(e,t){1&e&&(o.TgZ(0,"span"),o.TgZ(1,"span",34),o._uU(2,"Success"),o.qZA(),o.qZA())}function $t(e,t){1&e&&(o.TgZ(0,"span"),o.TgZ(1,"span",35),o._uU(2,"Deleting"),o.qZA(),o.qZA())}function Pt(e,t){1&e&&(o.TgZ(0,"span"),o.TgZ(1,"span",36),o._uU(2,"Error"),o.qZA(),o.qZA())}function Ht(e,t){if(1&e&&(o.TgZ(0,"td",24),o.YNc(1,Et,3,0,"span",32),o.YNc(2,jt,3,0,"span",32),o.YNc(3,$t,3,0,"span",32),o.YNc(4,Pt,3,0,"span",32),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",0===i.dataFile.status),o.xp6(1),o.Q6J("ngIf",1===i.dataFile.status),o.xp6(1),o.Q6J("ngIf",3===i.dataFile.status),o.xp6(1),o.Q6J("ngIf",4===i.dataFile.status)}}function Rt(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1," Tags "),o.qZA())}var Bt=function(){return[]};function Lt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",24),o.TgZ(1,"bdp-tag-input",37),o.NdJ("tagChange",function(e){var t=o.CHM(i).$implicit;return o.oxw(2).onTagChanged(e,t.dataFile)}),o.qZA(),o.qZA()}if(2&e){var a=t.$implicit,n=o.oxw(2);o.xp6(1),o.Q6J("packages",(null==n.project?null:n.project.packages)||o.DdM(3,Bt))("tasks",n.tasks)("tags",a.dataFile.tags)}}function zt(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1,"Original Path"),o.qZA())}function Vt(e,t){if(1&e&&(o.TgZ(0,"td",24),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Oqu(i.originalPath)}}function Kt(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1," Link "),o.qZA())}function Gt(e,t){1&e&&o._UZ(0,"td",24)}function Xt(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1," Controls "),o.qZA())}var Wt=function(e){return["/dataFile",e,"info"]};function ei(e,t){if(1&e&&(o.TgZ(0,"a",42),o._UZ(1,"i",43),o.qZA()),2&e){var i=o.oxw().$implicit;o.Q6J("routerLink",o.VKq(1,Wt,i.dataFile.id))}}function ti(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",39),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).onUpdateDataFile(e.dataFile)}),o._UZ(1,"i",44),o.qZA()}}function ii(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",24),o.YNc(1,ei,2,3,"a",38),o.TgZ(2,"button",39),o.NdJ("click",function(){var e=o.CHM(i).$implicit;return o.oxw(2).onDeleteDataFile(e.dataFile.id)}),o._UZ(3,"i",40),o.qZA(),o.YNc(4,ti,2,0,"button",41),o.qZA()}if(2&e){var a=t.$implicit;o.xp6(1),o.Q6J("ngIf",a),o.xp6(3),o.Q6J("ngIf",3!==a.status)}}function ai(e,t){1&e&&o._UZ(0,"tr",45)}function ni(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"tr",46),o.NdJ("@highlightRows.done",function(e){var t=o.CHM(i).$implicit;return o.oxw(2).resetState(e,t.dataFile)}),o.qZA()}if(2&e){var a=t.$implicit,n=o.oxw(2);o.Q6J("@highlightRows",a&&a.dataFile&&n.highlightController[a.dataFile.id]?"active":"inactive")}}var oi=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","OriginalPath","tags","controls"]};function si(e,t){if(1&e&&(o.TgZ(0,"table",8),o.ynx(1,9),o.YNc(2,_t,1,0,"th",10),o.YNc(3,Jt,4,0,"td",11),o.BQk(),o.ynx(4,12),o.YNc(5,Ut,2,0,"th",13),o.YNc(6,Qt,3,1,"td",11),o.BQk(),o.ynx(7,14),o.YNc(8,It,2,0,"th",10),o.YNc(9,Yt,3,1,"td",11),o.BQk(),o.ynx(10,15),o.YNc(11,Mt,2,0,"th",13),o.YNc(12,Ot,3,1,"td",11),o.BQk(),o.ynx(13,16),o.YNc(14,St,2,0,"th",10),o.YNc(15,Ht,5,4,"td",11),o.BQk(),o.ynx(16,17),o.YNc(17,Rt,2,0,"th",10),o.YNc(18,Lt,2,4,"td",11),o.BQk(),o.ynx(19,18),o.YNc(20,zt,2,0,"th",10),o.YNc(21,Vt,3,1,"td",11),o.BQk(),o.ynx(22,19),o.YNc(23,Kt,2,0,"th",10),o.YNc(24,Gt,1,0,"td",11),o.BQk(),o.ynx(25,20),o.YNc(26,Xt,2,0,"th",10),o.YNc(27,ii,5,2,"td",11),o.BQk(),o.YNc(28,ai,1,0,"tr",21),o.YNc(29,ni,1,1,"tr",22),o.qZA()),2&e){var i=o.oxw();o.Q6J("dataSource",i.importedRecords),o.xp6(28),o.Q6J("matHeaderRowDef",o.DdM(3,oi)),o.xp6(1),o.Q6J("matRowDefColumns",o.DdM(4,oi))}}var ri=function(){var e=function(){function e(t,a,n){i(this,e),this.infoService=t,this.projectService=a,this.router=n,this.allowedExtensions=[],this.keepFileName=!0,this.tags=[],this.name="",this.desc="",this.prefix="",this.suffix="",this.tasks=[],this.navigateDataFile=new o.vpe,this.deleteDataFile=new o.vpe,this.updateDataFile=new o.vpe,this.highlightController={},this.importedRecords=[],this.directLink=!1,this.newPath="",this._subs=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("update"===t.type&&"DataFile"===t.target)for(var i=t.data,a=0;a<e.importedRecords.length;a++){var n=e.importedRecords[a].dataFile;if(n&&i.id===n.id){n.prefix=i.prefix,n.name=i.name,n.suffix=i.suffix,n.desc=i.desc,n.tags=i.tags,e.highlightController[i.id]||(e.highlightController[i.id]=!0);break}}else"remove"===t.type&&"DataFile"===t.target&&e.removeFromList(t.data.id)}))}},{key:"importFromFolder",value:function(){var e=this;if(this.newPath&&this.project){var t=this.newPath;this.newPath="";var i=this.projectService.importFromPath(t,this.project.id,this.directLink,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder||"",this.keepFileName).subscribe(function(a){if(i.unsubscribe(),a.success)return e.importedRecords.push({originalPath:t,dataFile:a.success}),e.importedTable&&e.importedTable.renderRows()})}}},{key:"removeFromList",value:function(e){for(var t=0;t<this.importedRecords.length;t++)if(this.importedRecords[t].dataFile&&this.importedRecords[t].dataFile.id&&this.importedRecords[t].dataFile.id===e){this.importedRecords.splice(t,1);break}this.importedTable&&this.importedTable.renderRows()}},{key:"resetState",value:function(e,t){t&&t.id&&this.highlightController[t.id]&&delete this.highlightController[t.id]}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(e)}},{key:"onDeleteDataFile",value:function(e){this.removeFromList(e),this.deleteDataFile.emit(e)}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(y.C),o.Y36(r.Y),o.Y36(l.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["chi-path-importer"]],viewQuery:function(e,t){var i;(1&e&&o.Gf(F.BZ,5),2&e)&&(o.iGM(i=o.CRH())&&(t.importedTable=i.first))},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:14,vars:4,consts:[[1,"mt-3"],[2,"width","100%"],["matInput","","type","text","placeholder","The path on the server to import",3,"ngModel","ngModelChange"],["align","end"],[3,"ngModel","ngModelChange"],[1,"text-muted"],["mat-raised-button","","color","primary",1,"my-5",3,"disabled","click"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","OriginalPath"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times"],["mat-header-cell","",2,"width","80px"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"fas","fa-spin","fa-circle-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","text-success"],["aria-hidden","true",1,"far","fa-trash-alt","text-success"],["aria-hidden","true",1,"fas","fa-times","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(o.TgZ(0,"h4",0),o._uU(1,"Importing from the server path"),o.qZA(),o.TgZ(2,"mat-form-field",1),o.TgZ(3,"input",2),o.NdJ("ngModelChange",function(e){return t.newPath=e}),o.qZA(),o.TgZ(4,"mat-hint",3),o._uU(5,"Please specify the folder path that already on the server."),o.qZA(),o.qZA(),o.TgZ(6,"mat-checkbox",4),o.NdJ("ngModelChange",function(e){return t.directLink=e}),o._uU(7," Creating soft links directly\n"),o.qZA(),o.TgZ(8,"div"),o.TgZ(9,"small",5),o._uU(10,"*Creating soft links directly is fast but you may encounter `file not found` errors in some situations."),o.qZA(),o.qZA(),o.TgZ(11,"button",6),o.NdJ("click",function(){return t.importFromFolder()}),o._uU(12,"Import"),o.qZA(),o.YNc(13,si,30,5,"table",7)),2&e&&(o.xp6(3),o.Q6J("ngModel",t.newPath),o.xp6(3),o.Q6J("ngModel",t.directLink),o.xp6(5),o.Q6J("disabled",!t.newPath),o.xp6(2),o.Q6J("ngIf",t.importedRecords.length>0))},directives:[g.KE,p.Nt,d.Fj,d.JJ,d.On,g.bx,Z.oG,x.lW,c.O5,F.BZ,F.w1,F.fO,F.Dz,F.as,F.nj,F.ge,F.ev,d.nD,k.y,x.zs,l.yS,F.XQ,F.Gk],encapsulation:2,data:{animation:[b]}}),e}();function li(e,t){1&e&&o._UZ(0,"th",18)}function ci(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",19),o.TgZ(1,"div",20),o.TgZ(2,"button",21),o.NdJ("click",function(){var e=o.CHM(i).index;return o.oxw(2).removeRecords(e)}),o._UZ(3,"i",22),o.qZA(),o.qZA(),o.qZA()}}function ui(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1,"Prefix"),o.qZA())}function fi(e,t){if(1&e&&(o.TgZ(0,"td",19),o.TgZ(1,"mat-form-field",24),o.TgZ(2,"input",25),o.NdJ("ngModelChange",function(e){return t.$implicit.prefix=e}),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngModel",i.prefix)}}function di(e,t){1&e&&(o.TgZ(0,"th",18),o._uU(1,"DataFile name"),o.qZA())}function gi(e,t){if(1&e&&(o.TgZ(0,"td",19),o.TgZ(1,"mat-form-field",24),o.TgZ(2,"input",26),o.NdJ("ngModelChange",function(e){return t.$implicit.name=e}),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngModel",i.name)}}function pi(e,t){1&e&&(o.TgZ(0,"th",23),o._uU(1,"Suffix"),o.qZA())}function hi(e,t){if(1&e&&(o.TgZ(0,"td",19),o.TgZ(1,"mat-form-field",24),o.TgZ(2,"input",27),o.NdJ("ngModelChange",function(e){return t.$implicit.suffix=e}),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.xp6(2),o.Q6J("ngModel",i.suffix)}}function mi(e,t){1&e&&(o.TgZ(0,"th",18),o._uU(1," Status "),o.qZA())}function Zi(e,t){1&e&&(o.TgZ(0,"span"),o.TgZ(1,"span",29),o._uU(2,"Aborted"),o.qZA(),o.qZA())}function xi(e,t){1&e&&(o.TgZ(0,"span"),o._UZ(1,"span",30),o._uU(2,"Uploading"),o.qZA())}function vi(e,t){1&e&&(o.TgZ(0,"span"),o.TgZ(1,"span",31),o._uU(2,"Success"),o.qZA(),o.qZA())}function ki(e,t){1&e&&(o.TgZ(0,"span"),o.TgZ(1,"span",32),o._uU(2,"Error"),o.qZA(),o.qZA())}function Ti(e,t){if(1&e&&(o.TgZ(0,"td",19),o.YNc(1,Zi,3,0,"span",28),o.YNc(2,xi,3,0,"span",28),o.YNc(3,vi,3,0,"span",28),o.YNc(4,ki,3,0,"span",28),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i.abort),o.xp6(1),o.Q6J("ngIf",i.uploading),o.xp6(1),o.Q6J("ngIf",i.done&&!i.error),o.xp6(1),o.Q6J("ngIf",i.error)}}function wi(e,t){1&e&&(o.TgZ(0,"th",18),o._uU(1," Tags "),o.qZA())}var Fi=function(){return[]};function Ai(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",19),o.TgZ(1,"bdp-tag-input",33),o.NdJ("tagChange",function(e){var t=o.CHM(i).$implicit;return o.oxw(2).onTagChanged(e,t)}),o.qZA(),o.qZA()}if(2&e){var a=t.$implicit,n=o.oxw(2);o.xp6(1),o.Q6J("packages",(null==n.project?null:n.project.packages)||o.DdM(3,Fi))("tasks",n.tasks)("tags",a.tags)}}function bi(e,t){1&e&&(o.TgZ(0,"th",18),o._uU(1," Link "),o.qZA())}var Di=function(e){return["/dataFile",e,"info"]};function yi(e,t){if(1&e&&(o.TgZ(0,"a",35),o._UZ(1,"span",36),o.qZA()),2&e){var i=o.oxw().$implicit;o.Q6J("routerLink",o.VKq(1,Di,i.id))}}function qi(e,t){if(1&e&&(o.TgZ(0,"td",19),o.YNc(1,yi,2,3,"a",34),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Q6J("ngIf",i)}}function Ci(e,t){1&e&&(o.TgZ(0,"th",18),o._uU(1," Controls "),o.qZA())}function Ni(e,t){if(1&e&&(o.TgZ(0,"a",35),o._UZ(1,"span",36),o.qZA()),2&e){var i=o.oxw().$implicit;o.Q6J("routerLink",o.VKq(1,Di,i.id))}}function _i(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",40),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).onUpdateDataFile(e)}),o._UZ(1,"i",41),o.qZA()}if(2&e){var a=o.oxw().$implicit,n=o.oxw(2);o.Q6J("disabled",n.updatingIndicator[a.id])}}function Ji(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td",19),o.YNc(1,Ni,2,3,"a",34),o.TgZ(2,"button",37),o.NdJ("click",function(){var e=o.CHM(i).$implicit;return o.oxw(2).onDeleteDataFile(e.id)}),o._UZ(3,"i",38),o.qZA(),o.YNc(4,_i,2,1,"button",39),o.qZA()}if(2&e){var a=t.$implicit;o.xp6(1),o.Q6J("ngIf",a),o.xp6(3),o.Q6J("ngIf",3!==a.status)}}function Ui(e,t){1&e&&o._UZ(0,"tr",42)}function Qi(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"tr",43),o.NdJ("@highlightRows.done",function(e){var t=o.CHM(i).$implicit;return o.oxw(2).resetState(e,t)}),o.qZA()}if(2&e){var a=t.$implicit,n=o.oxw(2);o.Q6J("@highlightRows",a&&n.highlightController[a.id]?"active":"inactive")}}var Ii=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Yi(e,t){if(1&e&&(o.TgZ(0,"table",4),o.ynx(1,5),o.YNc(2,li,1,0,"th",6),o.YNc(3,ci,4,0,"td",7),o.BQk(),o.ynx(4,8),o.YNc(5,ui,2,0,"th",9),o.YNc(6,fi,3,1,"td",7),o.BQk(),o.ynx(7,10),o.YNc(8,di,2,0,"th",6),o.YNc(9,gi,3,1,"td",7),o.BQk(),o.ynx(10,11),o.YNc(11,pi,2,0,"th",9),o.YNc(12,hi,3,1,"td",7),o.BQk(),o.ynx(13,12),o.YNc(14,mi,2,0,"th",6),o.YNc(15,Ti,5,4,"td",7),o.BQk(),o.ynx(16,13),o.YNc(17,wi,2,0,"th",6),o.YNc(18,Ai,2,4,"td",7),o.BQk(),o.ynx(19,14),o.YNc(20,bi,2,0,"th",6),o.YNc(21,qi,2,1,"td",7),o.BQk(),o.ynx(22,15),o.YNc(23,Ci,2,0,"th",6),o.YNc(24,Ji,5,2,"td",7),o.BQk(),o.YNc(25,Ui,1,0,"tr",16),o.YNc(26,Qi,1,1,"tr",17),o.qZA()),2&e){var i=o.oxw();o.Q6J("dataSource",i.addedFolders),o.xp6(25),o.Q6J("matHeaderRowDef",o.DdM(3,Ii)),o.xp6(1),o.Q6J("matRowDefColumns",o.DdM(4,Ii))}}var Mi=function(){var e=function(){function e(t,a){i(this,e),this.projectService=t,this.infoService=a,this.tasks=[],this.navigateDataFile=new o.vpe,this.deleteDataFile=new o.vpe,this.updateDataFile=new o.vpe,this.addedFolders=[],this._subs=[],this.highlightController={},this.updatingIndicator={}}return n(e,[{key:"ngOnInit",value:function(){var e=this;this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("update"===t.type&&"DataFile"===t.target)for(var i=t.data,a=0;a<e.addedFolders.length;a++){var n=e.addedFolders[a];if(n&&i.id===n.id){n.prefix=i.prefix,n.name=i.name,n.suffix=i.suffix,n.desc=i.desc,n.tags=i.tags,e.highlightController[i.id]=!0;break}}else if("remove"===t.type&&"DataFile"===t.target)for(var o=0;o<e.addedFolders.length;o++){var s=e.addedFolders[o];if(s&&s.id===t.data.id){e.removeRecords(o);break}}}))}},{key:"createFolder",value:function(){var e=this;this.project&&this.name&&this.desc&&this.projectService.createFolder(this.project.id,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder,this.keepFileName).subscribe(function(t){if(!t.isError)return e.addedFolders.push(t.success),e.addedFolderTable&&e.addedFolderTable.renderRows()})}},{key:"removeRecords",value:function(e){return this.addedFolders.splice(e,1),this.addedFolderTable&&this.addedFolderTable.renderRows()}},{key:"resetState",value:function(e,t){var i=this;t.id&&(delete this.highlightController[t.id],setTimeout(function(){delete i.updatingIndicator[t.id]},1e3))}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"onUpdateDataFile",value:function(e){this.updatingIndicator[e.id]=!0,this.updateDataFile.emit(e)}},{key:"onDeleteDataFile",value:function(e){for(var t=0;t<this.addedFolders.length;t++)if(this.addedFolders[t].id===e){this.addedFolders.splice(t,1);break}this.addedFolderTable&&this.addedFolderTable.renderRows(),this.deleteDataFile.emit(e)}},{key:"ngOnDestroy",value:function(){this._subs.map(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.Y),o.Y36(y.C))},e.\u0275cmp=o.Xpm({type:e,selectors:[["chi-add-folder"]],viewQuery:function(e,t){var i;(1&e&&o.Gf(F.BZ,5),2&e)&&(o.iGM(i=o.CRH())&&(t.addedFolderTable=i.first))},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:5,vars:1,consts:[[1,"p-3"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],[1,"fas","fa-folder-plus","mr-3","fa-fw","fa-lg"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-muted"],[1,"fas","fa-spin","fa-circle-o-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","fa-fw","text-success"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],["mat-icon-button","","type","button",3,"disabled","click"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"button",1),o.NdJ("click",function(){return t.createFolder()}),o._UZ(2,"span",2),o._uU(3,"Add an empty folder "),o.qZA(),o.YNc(4,Yi,27,5,"table",3),o.qZA()),2&e&&(o.xp6(4),o.Q6J("ngIf",t.addedFolders.length>0))},directives:[x.lW,c.O5,F.BZ,F.w1,F.fO,F.Dz,F.as,F.nj,F.ge,F.ev,g.KE,p.Nt,d.Fj,d.nD,d.JJ,d.On,k.y,x.zs,l.yS,F.XQ,F.Gk],encapsulation:2,data:{animation:[b]}}),e}();function Oi(e,t){if(1&e&&(o.TgZ(0,"div",37),o._UZ(1,"h1",38),o.TgZ(2,"button",39),o.TgZ(3,"mat-icon"),o._uU(4,"close"),o.qZA(),o.qZA(),o.qZA()),2&e){var i=o.oxw(2);o.xp6(1),o.Q6J("innerHTML",i.title,o.oJD)}}function Si(e,t){1&e&&(o.TgZ(0,"mat-button-toggle",6),o._UZ(1,"i",40),o._uU(2," Google Drive "),o.qZA()),2&e&&o.Q6J("value","google")}function Ei(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",4),o.TgZ(1,"bdp-tag-input",41),o.NdJ("tagChange",function(e){return o.CHM(i),o.oxw(2).onTagChanged(e)}),o.qZA(),o.qZA()}if(2&e){var a=o.oxw(2);o.xp6(1),o.Q6J("packages",a.project.packages)("tasks",a.tasks)("tags",a.tags)}}function ji(e,t){if(1&e&&(o.TgZ(0,"mat-option",6),o.TgZ(1,"u",12),o._uU(2),o.qZA(),o._uU(3),o.TgZ(4,"u",12),o._uU(5),o.qZA(),o.qZA()),2&e){var i=t.$implicit;o.Q6J("value",i.id),o.xp6(2),o.Oqu(i.prefix),o.xp6(1),o.Oqu(i.name),o.xp6(2),o.Oqu(i.suffix)}}function $i(e,t){1&e&&(o.ynx(0),o.TgZ(1,"span",42),o._uU(2,"All extensions"),o.qZA(),o.BQk())}function Pi(e,t){if(1&e&&(o.TgZ(0,"span",44),o._uU(1),o.qZA()),2&e){var i=t.$implicit;o.xp6(1),o.Oqu(i)}}function Hi(e,t){if(1&e&&o.YNc(0,Pi,2,1,"span",43),2&e){var i=o.oxw(2);o.Q6J("ngForOf",i.allowedFormats)}}function Ri(e,t){1&e&&(o.TgZ(0,"div",32),o.TgZ(1,"div",45),o.TgZ(2,"span",46),o._uU(3,"No valid file extensions!"),o._UZ(4,"br"),o._uU(5,"You might want to check if you have specify packages for this project."),o.qZA(),o.qZA(),o.qZA())}function Bi(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"chi-file-uploader",47),o.NdJ("updateDataFile",function(e){return o.CHM(i),o.oxw(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return o.CHM(i),o.oxw(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return o.CHM(i),o.oxw(2).onDeleteDataFile(e)}),o.qZA(),o.BQk()}if(2&e){var a=o.oxw(2);o.xp6(1),o.Q6J("project",a.project)("allowedExtensions",a.allowedFormats)("fileLimits",(null==a.sysConfig?null:a.sysConfig.fileLimits)||0)("tasks",a.tasks)("tags",a.tags)("folder",a.parentDataFileID)("keepFileName",a.keepFileName)("name",a.name)("desc",a.desc)("prefix",a.prefix)("suffix",a.suffix)}}function Li(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"chi-google-picker",48),o.NdJ("updateDataFile",function(e){return o.CHM(i),o.oxw(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return o.CHM(i),o.oxw(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return o.CHM(i),o.oxw(2).onDeleteDataFile(e)}),o.qZA(),o.BQk()}if(2&e){var a=o.oxw(2);o.xp6(1),o.Q6J("project",a.project)("allowedExtensions",a.allowedFormats)("apiKey",null==a.sysConfig?null:a.sysConfig.googlePickerAPIKey)("tasks",a.tasks)("tags",a.tags)("folder",a.parentDataFileID)("keepFileName",a.keepFileName)("name",a.name)("desc",a.desc)("prefix",a.prefix)("suffix",a.suffix)}}function zi(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"chi-path-importer",50),o.NdJ("updateDataFile",function(e){return o.CHM(i),o.oxw(3).onUpdateDataFile(e)})("navigateDataFile",function(e){return o.CHM(i),o.oxw(3).onNavigateDataFile(e)})("deleteDataFile",function(e){return o.CHM(i),o.oxw(3).onDeleteDataFile(e)}),o.qZA()}if(2&e){var a=o.oxw(3);o.Q6J("project",a.project)("allowedExtensions",a.allowedFormats)("tasks",a.tasks)("tags",a.tags)("folder",a.parentDataFileID)("keepFileName",a.keepFileName)("name",a.name)("desc",a.desc)("prefix",a.prefix)("suffix",a.suffix)}}function Vi(e,t){if(1&e&&(o.ynx(0),o.YNc(1,zi,1,10,"chi-path-importer",49),o.BQk()),2&e){var i=o.oxw(2);o.xp6(1),o.Q6J("ngIf",i.currentUser&&i.currentUser.auths&&i.currentUser.auths.bdp&&i.currentUser.auths.bdp>=3)}}function Ki(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.TgZ(1,"chi-add-folder",50),o.NdJ("updateDataFile",function(e){return o.CHM(i),o.oxw(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return o.CHM(i),o.oxw(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return o.CHM(i),o.oxw(2).onDeleteDataFile(e)}),o.qZA(),o.BQk()}if(2&e){var a=o.oxw(2);o.xp6(1),o.Q6J("project",a.project)("allowedExtensions",a.allowedFormats)("tasks",a.tasks)("tags",a.tags)("folder",a.parentDataFileID)("keepFileName",a.keepFileName)("name",a.name)("desc",a.desc)("prefix",a.prefix)("suffix",a.suffix)}}function Gi(e,t){if(1&e){var i=o.EpF();o.ynx(0),o.YNc(1,Oi,5,1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"h3"),o._uU(5,"1. Specify the file source"),o.qZA(),o.qZA(),o.TgZ(6,"div",4),o.TgZ(7,"mat-button-toggle-group",5),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().onImportTypeChanged(e)}),o.TgZ(8,"mat-button-toggle",6),o._UZ(9,"i",7),o._uU(10," Your Computer "),o.qZA(),o.TgZ(11,"mat-button-toggle",6),o._UZ(12,"i",8),o._uU(13," Add a folder "),o.qZA(),o.YNc(14,Si,3,1,"mat-button-toggle",9),o.TgZ(15,"mat-button-toggle",6),o._UZ(16,"i",10),o._uU(17," Server Path "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"div",2),o.TgZ(19,"div",11),o.TgZ(20,"h3"),o._uU(21,"2. Specify file information (optional)"),o.qZA(),o._UZ(22,"br"),o.TgZ(23,"small",12),o._uU(24,"*You may specify the basic information latter."),o.qZA(),o._UZ(25,"br"),o.TgZ(26,"small",12),o._uU(27,"*All files will be uploaded with the information"),o.qZA(),o.qZA(),o.TgZ(28,"div",4),o.TgZ(29,"mat-form-field",13),o.TgZ(30,"input",14),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().prefix=e}),o.qZA(),o.TgZ(31,"span",15),o._uU(32,"Prefix: "),o.qZA(),o.qZA(),o.TgZ(33,"mat-form-field",13),o.TgZ(34,"input",16),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().suffix=e}),o.qZA(),o.TgZ(35,"span",15),o._uU(36,"Suffix: "),o.qZA(),o.qZA(),o.TgZ(37,"mat-form-field",17),o.TgZ(38,"input",18),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().name=e}),o.qZA(),o.TgZ(39,"b",19),o._uU(40,"Name: "),o.qZA(),o.TgZ(41,"span",20),o._UZ(42,"u",21),o.qZA(),o.TgZ(43,"span",22),o._UZ(44,"u",21),o.qZA(),o.TgZ(45,"mat-hint",23),o._uU(46,"Leave it blank if using the original file name(s)."),o.qZA(),o.TgZ(47,"mat-hint",24),o._uU(48,"Max 80 characters"),o.qZA(),o.qZA(),o.TgZ(49,"mat-form-field",17),o.TgZ(50,"textarea",25),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().desc=e}),o._uU(51),o.qZA(),o.TgZ(52,"mat-hint",23),o._uU(53,"You may specify the description latter."),o.qZA(),o.TgZ(54,"mat-hint",24),o._uU(55,"Max 300 characters"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(56,"div",2),o.TgZ(57,"div",11),o.TgZ(58,"h3"),o._uU(59,"3. Define tags for your files (optional)"),o.qZA(),o._UZ(60,"br"),o.TgZ(61,"small",12),o._uU(62,"*You may also specify tags for your files."),o.qZA(),o.qZA(),o.YNc(63,Ei,2,3,"div",26),o.qZA(),o.TgZ(64,"div",2),o.TgZ(65,"div",11),o.TgZ(66,"h3"),o._uU(67,"4. Set a folder to upload (optional)"),o.qZA(),o._UZ(68,"br"),o.TgZ(69,"small",12),o._uU(70,"*Only needed when your expect your files in a folder."),o.qZA(),o.qZA(),o.TgZ(71,"div",4),o.TgZ(72,"mat-form-field",17),o.TgZ(73,"mat-select",27),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().parentDataFileID=e}),o.TgZ(74,"mat-option"),o._uU(75,"--- No folder ---"),o.qZA(),o.YNc(76,ji,6,4,"mat-option",28),o.qZA(),o.qZA(),o.TgZ(77,"mat-checkbox",29),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().keepFileName=e}),o._uU(78,"Keep the underlying filename in the folder"),o.qZA(),o._UZ(79,"br"),o.TgZ(80,"small",12),o._uU(81,"*Note: The uploading will fail if the filename already exists in the folder"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(82,"div",2),o.TgZ(83,"div",11),o.TgZ(84,"h3"),o._uU(85,"5. Create DataFile records"),o.qZA(),o.qZA(),o.TgZ(86,"div",4),o._uU(87," The Valid file extensions: "),o.YNc(88,$i,3,0,"ng-container",30),o.YNc(89,Hi,1,1,"ng-template",null,31,o.W1O),o.qZA(),o.TgZ(91,"div",32),o.TgZ(92,"small",12),o._uU(93,"*You may change the created DataFile records right after file imported, but remember to click the save "),o._UZ(94,"i",33),o._uU(95," button after changing DataFile info."),o.qZA(),o.qZA(),o.YNc(96,Ri,6,0,"div",34),o.TgZ(97,"div",35),o.YNc(98,Bi,2,11,"ng-container",36),o.YNc(99,Li,2,11,"ng-container",36),o.YNc(100,Vi,2,1,"ng-container",36),o.YNc(101,Ki,2,10,"ng-container",36),o.qZA(),o.qZA(),o.BQk()}if(2&e){var a=o.MAs(90),n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.dialogRef),o.xp6(6),o.Q6J("ngModel",n.importType),o.xp6(1),o.Q6J("value","local"),o.xp6(3),o.Q6J("value","folder"),o.xp6(3),o.Q6J("ngIf",null==n.sysConfig?null:n.sysConfig.googlePickerAPIKey),o.xp6(1),o.Q6J("value","server"),o.xp6(15),o.Q6J("ngModel",n.prefix),o.xp6(4),o.Q6J("ngModel",n.suffix),o.xp6(4),o.Q6J("ngModel",n.name),o.xp6(4),o.Q6J("innerHTML",n.prefix,o.oJD),o.xp6(2),o.Q6J("innerHTML",n.suffix,o.oJD),o.xp6(6),o.Q6J("ngModel",n.desc),o.xp6(1),o.Oqu(n.desc),o.xp6(12),o.Q6J("ngIf",n.project&&n.project.packages.length>0),o.xp6(10),o.Q6J("ngModel",n.parentDataFileID),o.xp6(3),o.Q6J("ngForOf",n.folders),o.xp6(1),o.Q6J("ngModel",n.keepFileName)("disabled",!n.parentDataFileID),o.xp6(11),o.Q6J("ngIf",n.allowedFormats.indexOf("*")>=0)("ngIfElse",a),o.xp6(8),o.Q6J("ngIf",0==n.allowedFormats.length),o.xp6(1),o.Q6J("ngSwitch",n.importType),o.xp6(1),o.Q6J("ngSwitchCase","local"),o.xp6(1),o.Q6J("ngSwitchCase","google"),o.xp6(1),o.Q6J("ngSwitchCase","server"),o.xp6(1),o.Q6J("ngSwitchCase","folder")}}function Xi(e,t){1&e&&(o.TgZ(0,"mat-dialog-actions"),o.TgZ(1,"button",51),o.TgZ(2,"mat-icon"),o._uU(3,"close"),o.qZA(),o._uU(4," Close"),o.qZA(),o.qZA())}var Wi=function(){var e=function(){function e(t,a,n,s){i(this,e),this.projectService=t,this.router=a,this.dialogRef=n,this.data=s,this.keepFileName=!0,this.importTypeChanged=new o.vpe,this.tags=[],s?(this.project=s.project,this.allowedFormats=s.allowedFormats.indexOf("*")>=0?["*"]:s.allowedFormats,this.sysConfig=s.sysConfig,this.importType=s.importType||"local",this.tasks=s.tasks,this.parentDataFileID=s.parentDataFileID||"",this.currentUser=s.currentUser,this.name=s.name||"",this.desc=s.desc||"",this.prefix=s.prefix||"",this.suffix=s.suffix||"",this.title=s.title||"Import data files "+(s.project&&s.project.name?"to the project: ".concat(s.project.name,"."):""),this.tags=Array.isArray(s.tags)?s.tags:[]):(this.allowedFormats=[],this.tasks=[],this.prefix="",this.suffix="",this.desc="",this.name="",this.parentDataFileID="",this.importType="local",this.tags=[],this.title="")}return n(e,[{key:"folders",get:function(){return this.project&&this.project.dataFiles?this.project.dataFiles.filter(function(e){return"Folder"===e.format}):[]}},{key:"onImportTypeChanged",value:function(e){this.importType=e,this.importTypeChanged.emit(e)}},{key:"onTagChanged",value:function(e){console.log(e),this.tags=e}},{key:"onUpdateDataFile",value:function(e){var t=this.projectService.updateDataFileInfo(e).subscribe(function(){return t.unsubscribe()})}},{key:"onDeleteDataFile",value:function(e){var t=this.projectService.deleteDataFileById(e).subscribe(function(){return t.unsubscribe()})}},{key:"onNavigateDataFile",value:function(e){this.dialogRef&&this.dialogRef.close(),this.router.navigate(["/dataFile",e,"info"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.Y),o.Y36(l.F0),o.Y36(s.so,8),o.Y36(s.WI,8))},e.\u0275cmp=o.Xpm({type:e,selectors:[["bdp-file-importer"]],inputs:{allowedFormats:"allowedFormats",project:"project",sysConfig:"sysConfig",importType:"importType",tasks:"tasks",currentUser:"currentUser",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",keepFileName:"keepFileName",title:"title",tags:"tags",parentDataFileID:"parentDataFileID"},outputs:{importTypeChanged:"importTypeChanged"},decls:3,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-row justify-content-between",4,"ngIf"],[1,"row","my-5"],[1,"col-lg-2","col-xl-3","my-1"],[1,"col-lg-10","col-xl-9"],["name","fileSource","aria-label","File Source",1,"ml-3",3,"ngModel","ngModelChange"],[3,"value"],[1,"far","fa-hdd","fa-fw","mr-2"],[1,"fas","fa-folder-plus","fa-fw","mr-2"],[3,"value",4,"ngIf"],[1,"fas","fa-server","fa-fw","mr-2"],[1,"col-lg-2","col-xl-3"],[1,"text-muted"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],[2,"width","100%"],["matInput","","type","text","maxlength","80","size","80","placeholder","The name for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2","text-primary"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["align","start"],["align","end"],["matInput","","placeholder","The description for the data file(s). (max length: 300 characters)","maxlength","300","rows","4",3,"ngModel","ngModelChange"],["class","col-lg-10 col-xl-9",4,"ngIf"],["placeholder","select a folder to import",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","disabled","ngModelChange"],[4,"ngIf","ngIfElse"],["extBlock",""],[1,"col-12"],[1,"fas","fa-save","fa-fw"],["class","col-12",4,"ngIf"],[1,"col-12",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-flex","flex-row","justify-content-between"],["mat-dialog-title","",2,"font-weight","800",3,"innerHTML"],["mat-icon-button","","mat-dialog-close",""],[1,"fab","fa-google-drive","fa-fw","mr-2"],[3,"packages","tasks","tags","tagChange"],[1,"badge","badge-success","mx-1"],["class","badge badge-primary mx-1",4,"ngFor","ngForOf"],[1,"badge","badge-primary","mx-1"],[1,"ml-3"],[1,"text-danger"],[3,"project","allowedExtensions","fileLimits","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","apiKey","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile",4,"ngIf"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],["mat-stroked-button","","mat-dialog-close",""]],template:function(e,t){1&e&&(o.YNc(0,Gi,102,26,"ng-container",0),o._UZ(1,"mat-divider"),o.YNc(2,Xi,5,0,"mat-dialog-actions",0)),2&e&&(o.Q6J("ngIf",t.project&&t.currentUser),o.xp6(2),o.Q6J("ngIf",t.dialogRef))},directives:[c.O5,u.d,f.A9,d.JJ,d.On,f.Yi,g.KE,p.Nt,d.Fj,d.nD,g.qo,g.R9,g.bx,h.gD,m.ey,c.sg,Z.oG,c.RF,c.n9,s.uh,x.lW,s.ZT,v.Hw,k.y,_e,Nt,ri,Mi,s.H8],encapsulation:2}),e}()},48157:function(e,t,a){"use strict";a.d(t,{m:function(){return b}});var n=a(61116),o=a(31041),s=a(84369),r=a(9550),l=a(40994),c=a(39199),u=a(95522),f=a(77307),d=a(79961),g=a(13070),p=a(87672),h=a(66431),m=a(50144),Z=a(64078),x=a(35366),v=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[],imports:[[n.ez,o.u5,r.c,s.ot,l.p9,c.p0,u.Hi,f.Ps,d.Bb,g.lN,p.Cq,Z.w,m.Bz,h.v]]}),e}(),k=a(57173),T=a(92935),w=a(13841),F=a(92762),A=a(36278),b=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[],imports:[[n.ez,o.u5,k.Nh,T.Is,w.LD,f.Ps,r.c,g.lN,F.vV,s.ot,l.p9,A.t,v,Z.w]]}),e}()},64078:function(e,t,a){"use strict";a.d(t,{w:function(){return m}});var n=a(61116),o=a(31041),s=a(6489),r=a(13070),l=a(13841),c=a(95522),u=a(77307),f=a(92935),d=a(84369),g=a(36278),p=a(79961),h=a(35366),m=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[],imports:[[n.ez,o.u5,s.To,r.lN,l.LD,c.Hi,u.Ps,p.Bb,f.Is,d.ot,g.t]]}),e}()},41818:function(t,a,o){"use strict";o.d(a,{y:function(){return z}});var s=o(35366),r=o(51729),l=o(99235),c=o(92935),u=o(61116),f=o(36278),d=o(13070),g=o(13841),p=o(31041),h=o(84369),m=o(95522),Z=o(77307),x=o(87064);function v(e,t){1&e&&(s.TgZ(0,"mat-icon",27),s._uU(1,"cancel"),s.qZA())}function k(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"mat-chip",25),s.NdJ("removed",function(){var e=s.CHM(i).$implicit;return s.oxw(2).toggleTag(e)}),s._uU(1),s.YNc(2,v,2,0,"mat-icon",26),s.qZA()}if(2&e){var a=t.$implicit,n=s.oxw(2);s.Q6J("removable",!0)("selectable",!1),s.xp6(1),s.hij(" ",a," "),s.xp6(1),s.Q6J("ngIf",n.tags.indexOf(a)>=0&&"Folder"!==a)}}function T(e,t){if(1&e&&(s.TgZ(0,"div",21),s.TgZ(1,"h3"),s._uU(2,"Current selected tags: "),s.qZA(),s.TgZ(3,"mat-chip-list",22,23),s.YNc(5,k,3,4,"mat-chip",24),s.qZA(),s.qZA()),2&e){var i=s.oxw();s.xp6(3),s.Q6J("selectable",!1),s.xp6(2),s.Q6J("ngForOf",i.tags)}}function w(e,t){if(1&e&&(s.TgZ(0,"mat-option",28),s.TgZ(1,"b"),s._uU(2),s.qZA(),s.qZA()),2&e){var i=t.$implicit;s.Q6J("value",i),s.xp6(2),s.Oqu(null==i?null:i.name)}}function F(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1," Package name: "),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._UZ(4,"br"),s._uU(5," Package description: "),s._UZ(6,"div",29),s.qZA()),2&e){var i=s.oxw();s.xp6(3),s.Oqu(i.selectedPackage.name),s.xp6(3),s.Q6J("innerHTML",i.selectedPackage.desc,s.oJD)}}function A(e,t){1&e&&s._UZ(0,"i",37)}function b(e,t){1&e&&s._UZ(0,"i",38)}function D(e,t){1&e&&s._UZ(0,"i",39)}function y(e,t){1&e&&s._UZ(0,"i",40)}function q(e,t){if(1&e&&(s.TgZ(0,"mat-option",31),s.YNc(1,A,1,0,"i",32),s.YNc(2,b,1,0,"i",33),s.YNc(3,D,1,0,"i",34),s.YNc(4,y,1,0,"i",35),s.TgZ(5,"b",36),s._uU(6),s.qZA(),s.qZA()),2&e){var i=t.$implicit;s.Q6J("value",i),s.xp6(1),s.Q6J("ngIf","workflow"==i.type),s.xp6(1),s.Q6J("ngIf","standard"==i.type),s.xp6(1),s.Q6J("ngIf","child"==i.type),s.xp6(1),s.Q6J("ngIf","system"==i.type),s.xp6(2),s.Oqu(null==i?null:i.name)}}function C(e,t){if(1&e&&(s.ynx(0),s.YNc(1,q,7,6,"mat-option",30),s.BQk()),2&e){var i=s.oxw();s.xp6(1),s.Q6J("ngForOf",i.taskPkgDict[i.selectedPackage.id])}}function N(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1," Task name: "),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._UZ(4,"br"),s._uU(5," Task description: "),s._UZ(6,"div",29),s._UZ(7,"br"),s.qZA()),2&e){var i=s.oxw();s.xp6(3),s.Oqu(i.selectedTask.name),s.xp6(3),s.Q6J("innerHTML",i.selectedTask.desc,s.oJD)}}function _(e,t){if(1&e&&(s.TgZ(0,"mat-option",42),s._UZ(1,"i",43),s.TgZ(2,"b"),s._uU(3),s.qZA(),s.qZA()),2&e){var i=s.oxw().$implicit,a=s.oxw();s.Udp("background-color","outFile"===i.type?"#28a745":"#047AFB"),s.Q6J("value",i),s.xp6(1),s.Q6J("ngClass",a.cssArgTypeToIcon(i)),s.xp6(2),s.Oqu(i.name+" "+("inFile"===i.type?"(input)":"(output)"))}}function J(e,t){if(1&e&&(s.ynx(0),s.YNc(1,_,4,5,"mat-option",41),s.BQk()),2&e){var i=t.$implicit;s.xp6(1),s.Q6J("ngIf","inFile"===i.type||"outFile"===i.type)}}function U(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1," Argument name: "),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._UZ(4,"br"),s._uU(5," Argument description: "),s._UZ(6,"div",29),s._UZ(7,"br"),s.qZA()),2&e){var i=s.oxw();s.xp6(3),s.Oqu(i.selectedArg.name),s.xp6(3),s.Q6J("innerHTML",i.selectedArg.desc,s.oJD)}}function Q(e,t){1&e&&(s.TgZ(0,"mat-icon",27),s._uU(1,"add_circle"),s.qZA())}function I(e,t){1&e&&(s.TgZ(0,"mat-icon",27),s._UZ(1,"i",46),s.qZA())}function Y(e,t){if(1&e){var i=s.EpF();s.ynx(0),s.TgZ(1,"mat-chip",45),s.NdJ("removed",function(){var e=s.CHM(i).$implicit;return s.oxw(2).toggleTag(e)}),s._uU(2),s.YNc(3,Q,2,0,"mat-icon",26),s.YNc(4,I,2,0,"mat-icon",26),s.qZA(),s.BQk()}if(2&e){var a=t.$implicit,n=s.oxw(2);s.xp6(1),s.Q6J("selectable",!1),s.xp6(1),s.hij(" ",a," "),s.xp6(1),s.Q6J("ngIf",n.tags.indexOf(a)<0&&"Folder"!==a),s.xp6(1),s.Q6J("ngIf",n.tags.indexOf(a)>=0&&"Folder"!==a)}}function M(e,t){if(1&e&&(s.TgZ(0,"div",44),s.TgZ(1,"h2"),s._uU(2,"Suggested tags:"),s.qZA(),s.TgZ(3,"mat-chip-list"),s.YNc(4,Y,5,4,"ng-container",15),s.qZA(),s.qZA()),2&e){var i=s.oxw();s.xp6(4),s.Q6J("ngForOf",i.selectedArg.tags)}}function O(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"button",47),s.NdJ("click",function(){s.CHM(i);var e=s.oxw();return e.selectedArg&&e.addAllTags(e.selectedArg.tags)}),s._uU(1," Add all suggested tags "),s.qZA()}}function S(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"button",48),s.NdJ("click",function(){s.CHM(i);var e=s.oxw();return e.selectedArg&&e.removeAllTags(e.selectedArg.tags)}),s._uU(1," Remove all suggested tags "),s.qZA()}}var E=function(){return[]},j=function(){var e=function(){function e(t,a){i(this,e),this.dialogRef=t,this.data=a,this.tagToggleEvent=new s.vpe,a?(this.packages=a.packages||[],this.taskPkgDict=a.taskPkgDict||{},this.tags=a.tags||[]):(this.packages=[],this.taskPkgDict={},this.tags=[])}return n(e,[{key:"ngOnInit",value:function(){this.packages[0]&&(this.selectedPackage=this.packages[0],this.selectedTask=Array.isArray(this.taskPkgDict[this.selectedPackage.id])?this.taskPkgDict[this.selectedPackage.id][0]:void 0)}},{key:"onPackageSelctChange",value:function(e){var t=this;this.selectedPackage=e,setTimeout(function(){return t.selectedTask=Array.isArray(t.taskPkgDict[e.id])?t.taskPkgDict[e.id][0]:void 0})}},{key:"toggleTag",value:function(e){"Folder"!==e&&this.tagToggleEvent.emit(e)}},{key:"addAllTags",value:function(e){var t=this;e.filter(function(e){return t.tags.indexOf(e)<0}).forEach(function(e){return t.toggleTag(e)})}},{key:"removeAllTags",value:function(e){var t=this;e.filter(function(e){return t.tags.indexOf(e)>=0}).forEach(function(e){return t.toggleTag(e)})}},{key:"cssArgTypeToIcon",value:function(e){return e&&e.type?{"fa-file-import":"inFile"===e.type,"fa-file-export":"outFile"===e.type}:{}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(c.so),s.Y36(c.WI))},e.\u0275cmp=s.Xpm({type:e,selectors:[["bdp-tag-helper-dialog"]],inputs:{packages:"packages",taskPkgDict:"taskPkgDict",tags:"tags"},outputs:{tagToggleEvent:"tagToggleEvent"},decls:37,vars:14,consts:[["mat-dialog-title",""],[1,"container-fluid"],[1,"row"],["class","col-12",4,"ngIf"],[1,"my-2"],[1,"row","mt-3"],[1,"col-lg-4"],[2,"width","100%"],["placeholder","Please select the package",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Please select the desired task",3,"ngModel","ngModelChange"],["taskSelect",""],["placeholder","Please select the input",3,"ngModel","ngModelChange"],["inputFileSelect",""],[4,"ngFor","ngForOf"],["class","col-12 my-3","style","border-left: 1px solid black",4,"ngIf"],["mat-dialog-actions","",1,"my-3"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"col-12"],[3,"selectable"],["tagList",""],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],[3,"removable","selectable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],["class","text-black","style","background-color: #ffc107",3,"value",4,"ngFor","ngForOf"],[1,"text-black",2,"background-color","#ffc107",3,"value"],["class","fas fa-cogs fa-fw mr-1",4,"ngIf"],["class","fas fa-cog fa-fw mr-1",4,"ngIf"],["class","fas fa-puzzle-piece fa-fw mr-1",4,"ngIf"],["class","fas fa-server fa-fw mr-1",4,"ngIf"],[1,"ml-3"],[1,"fas","fa-cogs","fa-fw","mr-1"],[1,"fas","fa-cog","fa-fw","mr-1"],[1,"fas","fa-puzzle-piece","fa-fw","mr-1"],[1,"fas","fa-server","fa-fw","mr-1"],["class","text-white",3,"value","background-color",4,"ngIf"],[1,"text-white",3,"value"],[1,"fas",3,"ngClass"],[1,"col-12","my-3",2,"border-left","1px solid black"],[3,"selectable","removed"],[1,"far","fa-check-circle","fa-fw","text-success"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"h1",0),s._uU(1,"DataFile Tag helper"),s.qZA(),s.TgZ(2,"div",1),s.TgZ(3,"div",2),s.YNc(4,T,6,2,"div",3),s.qZA(),s._UZ(5,"mat-divider",4),s.TgZ(6,"div",5),s.TgZ(7,"div",6),s.TgZ(8,"h3"),s._uU(9,"1. Whcih package do you plan to use for this file?"),s.qZA(),s.TgZ(10,"mat-form-field",7),s.TgZ(11,"mat-select",8),s.NdJ("ngModelChange",function(e){return t.onPackageSelctChange(e)}),s.YNc(12,w,3,2,"mat-option",9),s.qZA(),s.qZA(),s.YNc(13,F,7,2,"div",10),s.qZA(),s.TgZ(14,"div",6),s.TgZ(15,"h3"),s._uU(16,"2. Which task do you like to execute for this file?"),s.qZA(),s.TgZ(17,"mat-form-field",7),s.TgZ(18,"mat-select",11,12),s.NdJ("ngModelChange",function(e){return t.selectedTask=e}),s.YNc(20,C,2,1,"ng-container",10),s.qZA(),s.qZA(),s.YNc(21,N,8,2,"div",10),s.qZA(),s.TgZ(22,"div",6),s.TgZ(23,"h3"),s._uU(24,"3. Which input would this file be used as?"),s.qZA(),s.TgZ(25,"mat-form-field",7),s.TgZ(26,"mat-select",13,14),s.NdJ("ngModelChange",function(e){return t.selectedArg=e}),s.YNc(28,J,2,1,"ng-container",15),s.qZA(),s.qZA(),s.YNc(29,U,8,2,"div",10),s.qZA(),s.YNc(30,M,5,1,"div",16),s.qZA(),s._UZ(31,"mat-divider"),s.TgZ(32,"div",17),s.TgZ(33,"button",18),s._uU(34,"Close"),s.qZA(),s.YNc(35,O,2,0,"button",19),s.YNc(36,S,2,0,"button",20),s.qZA(),s.qZA()),2&e&&(s.xp6(4),s.Q6J("ngIf",t.tags.length>0),s.xp6(7),s.Q6J("ngModel",t.selectedPackage),s.xp6(1),s.Q6J("ngForOf",t.packages),s.xp6(1),s.Q6J("ngIf",t.selectedPackage),s.xp6(5),s.Q6J("ngModel",t.selectedTask),s.xp6(2),s.Q6J("ngIf",t.selectedPackage),s.xp6(1),s.Q6J("ngIf",t.selectedTask),s.xp6(5),s.Q6J("ngModel",t.selectedArg),s.xp6(2),s.Q6J("ngForOf",(null==t.selectedTask?null:t.selectedTask.arguments)||s.DdM(13,E)),s.xp6(1),s.Q6J("ngIf",t.selectedArg),s.xp6(1),s.Q6J("ngIf",t.selectedArg),s.xp6(5),s.Q6J("ngIf",null==t.selectedArg?null:t.selectedArg.tags),s.xp6(1),s.Q6J("ngIf",null==t.selectedArg?null:t.selectedArg.tags))},directives:[c.uh,u.O5,f.d,d.KE,g.gD,p.JJ,p.On,u.sg,c.H8,h.lW,c.ZT,m.qn,m.HS,Z.Hw,m.qH,x.ey,u.mk],encapsulation:2}),e}(),$=o(79961);function P(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"mat-icon",13),s.NdJ("click",function(){s.CHM(i);var e=s.oxw().$implicit;return s.oxw().removeFromTags(e)}),s._uU(1,"cancel"),s.qZA()}}function H(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"mat-chip",11),s.NdJ("click",function(e){var t=s.CHM(i).$implicit;return s.oxw().onTagClick(e,t)}),s._uU(1),s.YNc(2,P,2,0,"mat-icon",12),s.qZA()}if(2&e){var a=t.$implicit,n=s.oxw();s.Q6J("color",n.highlightTags.indexOf(a)>=0?"primary":"default")("removable",!0)("selected",!0),s.xp6(1),s.hij(" ",a," "),s.xp6(1),s.Q6J("ngIf",!n.disabled&&"Folder"!==a)}}function R(e,t){1&e&&(s.TgZ(0,"mat-hint",14),s._uU(1,"Valid characters: a-z, dash (-), and underline (_)."),s.qZA())}function B(e,t){if(1&e&&(s.TgZ(0,"mat-option",15),s._uU(1),s.qZA()),2&e){var i=t.$implicit;s.Q6J("value",i),s.xp6(1),s.hij(" ",i," ")}}function L(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){return s.CHM(i),s.oxw().openTagHelperDialog()}),s.TgZ(1,"mat-icon"),s._UZ(2,"i",17),s.qZA(),s.qZA()}}var z=function(){var t=function(){function t(e){i(this,t),this.dialogRef=e,this.packages=[],this.tasks=[],this.tags=[],this.disabled=!1,this.tagChange=new s.vpe,this.tagClicked=new s.vpe,this.highlightTags=[],this.taskPkgDict={},this.validTags=[],this.separatorKeysCodes=[l.K5,l.OC],this.filteredTags=[]}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t=this;for(var i in e)"packages"===i?this.packages=e[i].currentValue:"tasks"===i?(this.tasks=e[i].currentValue,this.updatePkgTaskDict()):"tags"===i?Array.isArray(e[i].currentValue)&&(this.tags=[],e[i].currentValue.forEach(function(e){return t.addTag(e,!0)})):"disabled"===i&&(this.disabled=e[i].currentValue)}},{key:"updatePkgTaskDict",value:function(){var e=this;if(this.taskPkgDict={},Array.isArray(this.tasks)){for(var t=0;t<this.tasks.length;t++){var i=this.tasks[t],a=i.package?i.package:null;a&&(Array.isArray(this.taskPkgDict[a])||(this.taskPkgDict[a]=[]),this.taskPkgDict[a].push(i))}Object.keys(this.taskPkgDict).forEach(function(t){return e.taskPkgDict[t]=(0,r.X)(e.taskPkgDict[t],[function(e){return e.name}],["asc"])}),this.validTags=this.getValidTags(this.tasks)}}},{key:"getValidTags",value:function(t){var i={};return t.forEach(function(t){return e(new Set([].concat.apply([],t.arguments.filter(function(e){return"inFile"===e.type||"outFile"===e.type}).map(function(e){return e.tags})))).forEach(function(e){return i[e.toString()]=1})}),(0,r.X)(Object.keys(i),"asc")}},{key:"onTagInputChange",value:function(e,t){var i=this,a=t.value;a=a.replace(/[^a-z0-9\-]/g,""),this.filteredTags=this.validTags.filter(function(e){return e.indexOf(a)>=0&&i.tags.indexOf(e)<0&&"Folder"!==e}),t.value=a}},{key:"addTag",value:function(e,t){if("Folder"!==e){if(""===(e=(e=e.toLowerCase().replace(/[^a-z0-9\.\-\_]/g,"")).trim()))return;for(var i=0;i<this.tags.length;i++)if(e===this.tags[i])return}this.tags.push(e),this.tags=this.tags.slice(),t||this.tagChange.emit(this.tags)}},{key:"addToTags",value:function(e){var t=e.input;this.addTag(e.value),t&&setTimeout(function(){return t.value=""})}},{key:"onTagSelect",value:function(e,t){this.removeFromTags(t.value,!0),t.value="",this.addTag(e.option.value)}},{key:"removeFromTags",value:function(e,t){for(var i=0;i<this.tags.length;i++)if(e===this.tags[i]){this.tags.splice(i,1);break}this.tags=this.tags.slice(),t||(console.log(this.tags),this.tagChange.emit(this.tags))}},{key:"onTagClick",value:function(e,t){e.stopPropagation(),this.tagClicked.emit(t)}},{key:"openTagHelperDialog",value:function(){var e=this,t=this.dialogRef.open(j,{width:"90vw",height:"90vh",data:{packages:this.packages,taskPkgDict:this.taskPkgDict,tags:this.tags}});t.componentInstance.tagToggleEvent.subscribe(function(i){if("Folder"!==i){var a=e.tags.indexOf(i);a>=0?e.tags.splice(a,1):e.tags.push(i),t.componentInstance.tags=e.tags,e.tagChange.emit(e.tags)}}),t.afterClosed().subscribe(function(){})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.uw))},t.\u0275cmp=s.Xpm({type:t,selectors:[["bdp-tag-input"]],inputs:{packages:"packages",tasks:"tasks",tags:"tags",disabled:"disabled",highlightTags:"highlightTags"},outputs:{tagChange:"tagChange",tagClicked:"tagClicked"},features:[s.TTD],decls:11,vars:11,consts:[[2,"width","100%"],[3,"selectable"],["tagList",""],[3,"color","removable","selected","click",4,"ngFor","ngForOf"],["matInput","",2,"width","100%",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matAutocomplete","disabled","matChipInputTokenEnd","keyup"],["tagInput",""],["align","end",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matPrefix","","class","mr-3",3,"click",4,"ngIf"],[3,"color","removable","selected","click"],["matChipRemove","",3,"click",4,"ngIf"],["matChipRemove","",3,"click"],["align","end"],[3,"value"],["mat-icon-button","","matPrefix","",1,"mr-3",3,"click"],[1,"fas","fa-search-plus","fa-fw","fa-lg"]],template:function(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"mat-form-field",0),s.TgZ(1,"mat-chip-list",1,2),s.YNc(3,H,3,5,"mat-chip",3),s.TgZ(4,"input",4,5),s.NdJ("matChipInputTokenEnd",function(e){return t.addToTags(e)})("keyup",function(e){s.CHM(i);var a=s.MAs(5);return t.onTagInputChange(e,a)}),s.qZA(),s.qZA(),s.YNc(6,R,2,0,"mat-hint",6),s.TgZ(7,"mat-autocomplete",7,8),s.NdJ("optionSelected",function(e){s.CHM(i);var a=s.MAs(5);return t.onTagSelect(e,a)}),s.YNc(9,B,2,2,"mat-option",9),s.qZA(),s.YNc(10,L,3,0,"button",10),s.qZA()}if(2&e){var a=s.MAs(2),n=s.MAs(8);s.xp6(1),s.Q6J("selectable",!0),s.xp6(2),s.Q6J("ngForOf",t.tags),s.xp6(1),s.Q6J("placeholder",t.disabled?"":"Add new tags here...")("matChipInputFor",a)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",!1)("matAutocomplete",n)("disabled",t.disabled),s.xp6(2),s.Q6J("ngIf",!t.disabled),s.xp6(3),s.Q6J("ngForOf",t.filteredTags),s.xp6(1),s.Q6J("ngIf",!t.disabled)}},directives:[d.KE,m.qn,u.sg,m.oH,$.ZL,u.O5,$.XC,m.HS,Z.Hw,m.qH,d.bx,x.ey,h.lW,d.qo],encapsulation:2}),t}()},22740:function(e,t,a){"use strict";a.d(t,{T:function(){return f}});var n=a(50144),o=a(61116),s=a(31041),r=a(84369),l=a(22797),c=a(95522),u=a(35366),f=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[],imports:[[o.ez,s.u5,n.Bz,r.ot,l.QW,c.Hi]]}),e}()}}])}();