(self.webpackChunkbdp_client=self.webpackChunkbdp_client||[]).push([[934],{79364:function(t,e,i){"use strict";i.d(e,{s:function(){return Gi}});var a=i(35366),n=i(92935),s=i(52572),o=i(50144),l=i(61116),c=i(36278),r=i(92762),d=i(31041),u=i(13070),f=i(9550),g=i(13841),p=i(87064),h=i(40994),m=i(84369),Z=i(77307),x=i(41818),T=i(99235),k=i(1270),w=i(39199),F=i(99713);const A=[(0,F.X$)("highlightRows",[(0,F.SB)("active",(0,F.oB)({"background-color":"yellow"})),(0,F.SB)("inactive",(0,F.oB)({"background-color":"transparent"})),(0,F.eR)("active => inactive",[(0,F.jt)("1s")]),(0,F.eR)("void => inactive",[(0,F.oB)({"background-color":"yellow"}),(0,F.jt)("1s",(0,F.oB)({"background-color":"transparent"}))])])];var D=i(16650),b=i(55055),q=i(16363),C=i(7666),v=i(87672);function N(t,e){1&t&&a._UZ(0,"th",29)}function y(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",34),a.NdJ("click",function(){return a.CHM(t),a.oxw().$implicit.stop()}),a._UZ(1,"i",35),a.qZA()}}function _(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",36),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().index;return a.oxw(2).removeQueueElement(e)}),a._UZ(1,"i",37),a.qZA()}}function J(t,e){if(1&t&&(a.TgZ(0,"td",30),a.TgZ(1,"div",31),a.YNc(2,y,2,0,"button",32),a.YNc(3,_,2,0,"button",33),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngIf",t.uploading),a.xp6(1),a.Q6J("ngIf",!t.uploading)}}function U(t,e){1&t&&(a.TgZ(0,"th",38),a._uU(1,"Prefix"),a.qZA())}function Q(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"mat-form-field",40),a.TgZ(2,"input",41),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().$implicit.response.success[0].prefix=e}),a.qZA(),a.qZA(),a.BQk()}if(2&t){const t=a.oxw().$implicit;a.xp6(2),a.Q6J("ngModel",t.response.success[0].prefix)}}function I(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,Q,3,1,"ng-container",39),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status)}}function Y(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1,"DataFile name"),a.qZA())}function M(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"mat-form-field",40),a.TgZ(2,"input",42),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().$implicit.response.success[0].name=e}),a.qZA(),a.qZA(),a.BQk()}if(2&t){const t=a.oxw().$implicit;a.xp6(2),a.Q6J("ngModel",t.response.success[0].name)}}function O(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,M,3,1,"ng-container",39),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status)}}function S(t,e){1&t&&(a.TgZ(0,"th",38),a._uU(1,"Suffix"),a.qZA())}function E(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"mat-form-field",40),a.TgZ(2,"input",43),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().$implicit.response.success[0].suffix=e}),a.qZA(),a.qZA(),a.BQk()}if(2&t){const t=a.oxw().$implicit;a.xp6(2),a.Q6J("ngModel",t.response.success[0].suffix)}}function j(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,E,3,1,"ng-container",39),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status)}}function $(t,e){1&t&&a._UZ(0,"th",29)}function P(t,e){1&t&&a._UZ(0,"td",44)}function H(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1,"Original filename"),a.qZA())}function R(t,e){if(1&t&&(a.TgZ(0,"span",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function B(t,e){if(1&t&&(a.TgZ(0,"strong"),a._uU(1,"*Required format: "),a.YNc(2,R,2,1,"span",45),a.qZA()),2&t){const t=a.oxw(4);a.xp6(2),a.Q6J("ngForOf",t.uploaderOptions.allowedExtensions)}}function L(t,e){if(1&t&&(a.TgZ(0,"p"),a.YNc(1,B,3,1,"strong",39),a.qZA()),2&t){const t=a.oxw(3);a.xp6(1),a.Q6J("ngIf",t.uploaderOptions.allowedExtensions.length)}}function z(t,e){if(1&t&&(a.TgZ(0,"td",30),a._uU(1),a.YNc(2,L,2,1,"p",39),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(1),a.hij(" ",null==t?null:t.originalName," "),a.xp6(1),a.Q6J("ngIf",i.uploaderOptions.allowedExtensions.indexOf("*")<0&&-1==i.uploaderOptions.allowedExtensions.indexOf(t.originalName.split(".").pop().toLowerCase()))}}function V(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Size "),a.qZA())}function K(t,e){if(1&t&&(a.TgZ(0,"p"),a.TgZ(1,"strong"),a._uU(2),a.ALo(3,"number"),a.qZA(),a.qZA()),2&t){const t=a.oxw(3);a.xp6(2),a.hij("*file size of less than ",a.xi3(3,1,((null==t.uploaderOptions?null:t.uploaderOptions.allowedFileSize)||0)/1024/1024,".2")," MB is required.")}}function G(t,e){if(1&t&&(a.TgZ(0,"td",30),a._uU(1),a.ALo(2,"number"),a.YNc(3,K,4,4,"p",39),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(1),a.hij(" ",a.xi3(2,2,(null==t?null:t.size)/1024/1024,".2")," MB "),a.xp6(2),a.Q6J("ngIf",t.size>i.uploaderOptions.allowedFileSize)}}function X(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Progress "),a.qZA())}function W(t,e){if(1&t&&(a.TgZ(0,"td",30),a.TgZ(1,"div",31),a._UZ(2,"mat-progress-spinner",47),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("diameter",30)("value",t.progress.percent)}}function tt(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Status "),a.qZA())}function et(t,e){1&t&&(a.TgZ(0,"span",52),a._UZ(1,"i",53),a._uU(2,"Aborted"),a.qZA())}function it(t,e){1&t&&(a.TgZ(0,"span",54),a._UZ(1,"i",55),a._uU(2,"Uploading"),a.qZA())}function at(t,e){1&t&&(a.TgZ(0,"span",56),a._UZ(1,"i",57),a._uU(2,"Success"),a.qZA())}function nt(t,e){1&t&&(a.TgZ(0,"span",58),a._UZ(1,"i",53),a._uU(2,"Error"),a.qZA())}function st(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,et,3,0,"span",48),a.YNc(2,it,3,0,"span",49),a.YNc(3,at,3,0,"span",50),a.YNc(4,nt,3,0,"span",51),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.abort),a.xp6(1),a.Q6J("ngIf",t.uploading),a.xp6(1),a.Q6J("ngIf",t.done&&!t.error),a.xp6(1),a.Q6J("ngIf",t.error)}}function ot(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Speed "),a.qZA())}function lt(t,e){if(1&t&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(1),a.Oqu(t.progress.speedHumanized)}}function ct(t,e){if(1&t&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(1),a.hij("Average: ",t.speedAverageHumanized,"")}}function rt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,lt,2,1,"span",39),a.YNc(2,ct,2,1,"span",39),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.uploading),a.xp6(1),a.Q6J("ngIf",t.done)}}function dt(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Tags "),a.qZA())}const ut=function(){return[]};function ft(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"bdp-tag-input",59),a.NdJ("tagChange",function(e){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).onTagChanged(e,i.response.success[0])}),a.qZA(),a.BQk()}if(2&t){const t=a.oxw().$implicit,e=a.oxw(2);a.xp6(1),a.Q6J("packages",(null==e.project?null:e.project.packages)||a.DdM(4,ut))("tasks",e.tasks)("tags",t.response.success[0].tags)("disabled",e.isDataFileUpdating[t.response.success[0].id])}}function gt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,ft,2,5,"ng-container",39),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status)}}function pt(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Link "),a.qZA())}const ht=function(t){return["/dataFile",t,"info"]};function mt(t,e){if(1&t&&(a.TgZ(0,"a",61),a._UZ(1,"span",62),a.qZA()),2&t){const t=a.oxw().$implicit;a.Q6J("routerLink",a.VKq(1,ht,t.response.success[0].id))}}function Zt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,mt,2,3,"a",60),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status)}}function xt(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Controls "),a.qZA())}function Tt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",64),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).onDeleteDataFile(e.response.success[0].id)}),a._UZ(1,"i",65),a.qZA()}}function kt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",64),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).onUpdateDataFile(e.response.success[0])}),a._UZ(1,"i",66),a.qZA()}}function wt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,Tt,2,0,"button",63),a.YNc(2,kt,2,0,"button",63),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status),a.xp6(1),a.Q6J("ngIf",t.response&&!t.response.isError&&t.response.success&&3!==t.response.success[0].status)}}function Ft(t,e){1&t&&a._UZ(0,"tr",67)}function At(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr",68),a.NdJ("@highlightRows.done",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).resetState(e,i)}),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("@highlightRows",t&&t.response&&t.response.success&&t.response.success[0]&&i.highlightController[t.response.success[0].id]?"active":"inactive")}}function Dt(t,e){if(1&t&&a._UZ(0,"tr",69),2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("@highlightRows",t&&t.response&&t.response.success&&t.response.success[0]&&i.highlightController[t.response.success[0].id]?"active":"inactive")}}const bt=function(){return["deleteIcon","status","name","size","speed","link"]},qt=function(){return["progress","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Ct(t,e){if(1&t&&(a.TgZ(0,"table",8),a.ynx(1,9),a.YNc(2,N,1,0,"th",10),a.YNc(3,J,4,2,"td",11),a.BQk(),a.ynx(4,12),a.YNc(5,U,2,0,"th",13),a.YNc(6,I,2,1,"td",11),a.BQk(),a.ynx(7,14),a.YNc(8,Y,2,0,"th",10),a.YNc(9,O,2,1,"td",11),a.BQk(),a.ynx(10,15),a.YNc(11,S,2,0,"th",13),a.YNc(12,j,2,1,"td",11),a.BQk(),a.ynx(13,16),a.YNc(14,$,1,0,"th",10),a.YNc(15,P,1,0,"td",17),a.BQk(),a.ynx(16,18),a.YNc(17,H,2,0,"th",10),a.YNc(18,z,3,2,"td",11),a.BQk(),a.ynx(19,19),a.YNc(20,V,2,0,"th",10),a.YNc(21,G,4,5,"td",11),a.BQk(),a.ynx(22,20),a.YNc(23,X,2,0,"th",10),a.YNc(24,W,3,2,"td",11),a.BQk(),a.ynx(25,21),a.YNc(26,tt,2,0,"th",10),a.YNc(27,st,5,4,"td",11),a.BQk(),a.ynx(28,22),a.YNc(29,ot,2,0,"th",10),a.YNc(30,rt,3,2,"td",11),a.BQk(),a.ynx(31,23),a.YNc(32,dt,2,0,"th",10),a.YNc(33,gt,2,1,"td",11),a.BQk(),a.ynx(34,24),a.YNc(35,pt,2,0,"th",10),a.YNc(36,Zt,2,1,"td",11),a.BQk(),a.ynx(37,25),a.YNc(38,xt,2,0,"th",10),a.YNc(39,wt,3,2,"td",11),a.BQk(),a.YNc(40,Ft,1,0,"tr",26),a.YNc(41,At,1,1,"tr",27),a.YNc(42,Dt,1,1,"tr",28),a.qZA()),2&t){const t=a.oxw();a.Q6J("dataSource",t.uploader.queue),a.xp6(40),a.Q6J("matHeaderRowDef",a.DdM(4,bt)),a.xp6(1),a.Q6J("matRowDefColumns",a.DdM(5,bt)),a.xp6(1),a.Q6J("matRowDefColumns",a.DdM(6,qt))}}const vt=function(t){return{"nv-file-over":t}};let Nt=(()=>{class t{constructor(t,e,i){this.uploader=t,this.projectService=e,this.infoService=i,this.fileLimits=1/0,this.tags=[],this.validTags=[],this.name="",this.desc="",this.tasks=[],this.prefix="",this.suffix="",this.navigateDataFile=new a.vpe,this.deleteDataFile=new a.vpe,this.updateDataFile=new a.vpe,this.separatorKeysCodes=[T.K5,T.OC],this.hasBaseDropZoneOver=!1,this.filteredTags=[],this.isDataFileUpdating={},this._subs=[],this.highlightController={},this.uploaderOptions={url:"",withCredentials:!0,filterExtensions:!0,allowedExtensions:[],allowedFileSize:1073741824,autoUpload:!0,calculateSpeed:!0,previewUrl:!1,data:{folder:"",keepFileName:!1,tags:[],name:"",desc:"",prefix:"",suffix:""},maxUploads:3},this.uploadEvents=new a.vpe,this.zone=new a.R0b({enableLongStackTrace:!0}),this.responses=[]}ngOnInit(){this.project&&(this.uploaderOptions.allowedExtensions=this.allowedExtensions||[],this.uploaderOptions.url=this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload",this.uploaderOptions.data={folder:this.folder,keepFileName:this.keepFileName,tags:this.tags,name:this.name,desc:this.desc,prefix:this.prefix,suffix:this.suffix}),this._subs.push(this.infoService.incomingDataChange$.subscribe(t=>{if("update"===t.type&&"DataFile"===t.target){if(Array.isArray(this.uploader.queue)){const e=t.data;if(!e)return;for(let t=0;t<this.uploader.queue.length;t++){const i=this.uploader.queue[t];let a;if(i&&(i.response&&Array.isArray(i.response.success)&&(a=i.response.success[0]),a&&e.id===a.id)){a.prefix=e.prefix,a.name=e.name,a.suffix=e.suffix,a.desc=e.desc,a.tags=e.tags,this.highlightController[e.id]=!0;break}}}}else if("remove"===t.type&&"DataFile"===t.target&&Array.isArray(this.uploader.queue))for(let e=0;e<this.uploader.queue.length;e++){const i=this.uploader.queue[e];if(i.response&&i.response.success&&i.response.success[0]&&i.response.success[0].id===t.data.id){this.removeQueueElement(e);break}}}))}ngOnChanges(t){for(const e in t)if("folder"===e)this.folder=t[e].currentValue,this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{folder:this.folder})});else if("keepFileName"===e){const i=Object.assign({},this.uploaderOptions.data,{keepFileName:t[e].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:i})}else if("tags"===e)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{tags:t[e].currentValue})});else if("name"===e){const i=Object.assign({},this.uploaderOptions.data,{name:t[e].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:i})}else if("desc"===e)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{desc:t[e].currentValue})});else if("prefix"===e)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{prefix:t[e].currentValue})});else if("suffix"===e)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{suffix:t[e].currentValue})});else if("project"===e){if(this.project=t[e].currentValue,!this.project)return;this.uploaderOptions=Object.assign({},this.uploaderOptions,{url:this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload"})}else"fileLimits"===e&&(this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{allowedFileSize:parseFloat(t[e].currentValue)})}));this.uploader.setOptions(this.uploaderOptions)}fileOverBase(t){-1!==(t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer).types.indexOf("Files")&&(this.hasBaseDropZoneOver=!0)}fileLeave(t){setTimeout(()=>this.hasBaseDropZoneOver=!1,0)}onDeleteDataFile(t){for(let e=0;e<this.uploader.queue.length;e++){const i=this.uploader.queue[e];if(i.response&&i.response.success&&i.response.success[0]&&i.response.success[0].id===t){this.removeQueueElement(e);break}}this.deleteDataFile.emit(t)}onUpdateDataFile(t){this.updateDataFile.emit(new k.A(t))}removeQueueElement(t){return this.uploader.removeFileFromQueue(t),this.uploaderProgress&&this.uploaderProgress.renderRows()}handleMultipleUpload(t){const e=this.responses.findIndex(e=>e.id===t.id);-1===e?this.responses.push(t):this.zone.run(()=>{this.responses[e]=t});const i=t.response;return i&&i.isError&&t.setError(i.errors[0].details),this.uploaderProgress&&this.uploaderProgress.renderRows()}fileDropEvent(t){setTimeout(()=>(this.hasBaseDropZoneOver=!1,this.uploaderProgress&&this.uploaderProgress.renderRows()),0)}onTagChanged(t,e){e.tags=t}startUpload(){this.uploadEvents.emit("startUpload")}resetState(t,e){e&&e.response&&e.response.success&&e.response.success[0]&&delete this.highlightController[e.response.success[0].id]}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(D.F),a.Y36(s.Y),a.Y36(b.C))},t.\u0275cmp=a.Xpm({type:t,selectors:[["chi-file-uploader"]],viewQuery:function(t,e){if(1&t&&a.Gf(w.BZ,5),2&t){let t;a.iGM(t=a.CRH())&&(e.uploaderProgress=t.first)}},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",fileLimits:"fileLimits",tags:"tags",validTags:"validTags",name:"name",desc:"desc",tasks:"tasks",prefix:"prefix",suffix:"suffix"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},features:[a.TTD],decls:14,vars:6,consts:[[1,"mt-3"],["chiFileDropper","","multiple","true",1,"my-drop-zone",3,"options","ngClass","dragover","dragleave","drop","onUpload"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-5x","fa-upload"],["type","file","id","upload_file_selector","chiFileSelector","","multiple","",1,"hide-input",3,"options"],["for","upload_file_selector",1,"input-label"],[1,"box__dragndrop"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","empty"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","size"],["matColumnDef","progress"],["matColumnDef","status"],["matColumnDef","speed"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","style","border-bottom: 1px solid black;",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent","mat-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","mat-button","",3,"click"],[1,"fas","fa-ban","fa-fw","fa-lg"],["mat-icon-button","","color","primary",3,"click"],[1,"far","fa-times-circle","fa-fw","fa-lg","mr-2"],["mat-header-cell","",2,"width","80px"],[4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],["mat-cell",""],["class","label label-primary",4,"ngFor","ngForOf"],[1,"label","label-primary"],[3,"diameter","value"],["class","text-muted",4,"ngIf"],["class","text-primary",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-muted"],["aria-hidden","true",1,"fas","fa-times","fa-fw","mr-2"],[1,"text-primary"],[1,"fas","fa-spin","fa-circle-notch","fa-fw","mr-2"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw","mr-2"],[1,"text-danger"],[3,"packages","tasks","tags","disabled","tagChange"],["target","_blank",3,"routerLink",4,"ngIf"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""],["mat-row","",2,"border-bottom","1px solid black"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.NdJ("dragover",function(t){return e.fileOverBase(t)})("dragleave",function(t){return e.fileLeave(t)})("drop",function(t){return e.fileDropEvent(t)})("onUpload",function(t){return e.handleMultipleUpload(t)}),a.TgZ(2,"div",2),a._UZ(3,"i",3),a._UZ(4,"br"),a._UZ(5,"input",4),a.TgZ(6,"label",5),a.TgZ(7,"strong"),a._uU(8,"Choose a file"),a.qZA(),a.TgZ(9,"span",6),a._uU(10," or drag it here"),a.qZA(),a._uU(11,". "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(12,Ct,43,7,"table",7),a._UZ(13,"br")),2&t&&(a.xp6(1),a.Q6J("options",e.uploaderOptions)("ngClass",a.VKq(4,vt,e.hasBaseDropZoneOver)),a.xp6(4),a.Q6J("options",e.uploaderOptions),a.xp6(7),a.Q6J("ngIf",e.uploader.queue.length>0))},directives:[q.e,l.mk,C.x,l.O5,w.BZ,w.w1,w.fO,w.Dz,w.as,w.nj,w.ge,w.ev,m.lW,u.KE,f.Nt,d.Fj,d.nD,d.JJ,d.On,l.sg,v.Ou,x.y,o.yS,w.XQ,w.Gk],pipes:[l.JJ],styles:[".my-drop-zone[_ngcontent-%COMP%]{font-size:1.25rem;background-color:#c8dadf;position:relative;padding:60px 20px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.nv-file-over[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}.hide-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;z-index:-1;position:absolute}.input-label[_ngcontent-%COMP%]{max-width:80%;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden}.input-label[_ngcontent-%COMP%]:hover   strong[_ngcontent-%COMP%]{color:#39bfd3}@-webkit-keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}"],data:{animation:[A]}}),t})();var yt=i(48355);function _t(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).linkAccount()}),a._uU(1,"Link to your google accounts"),a.qZA()}}function Jt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",7),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).linkAccount()}),a._uU(1,"Switch account"),a.qZA()}}function Ut(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",8),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).showPicker()}),a._uU(1,"Import from google drive"),a.qZA()}}function Qt(t,e){1&t&&a._UZ(0,"th",29)}function It(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",30),a.TgZ(1,"div",31),a.TgZ(2,"button",32),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(3).removeFromList(e.id)}),a._UZ(3,"i",33),a.qZA(),a.qZA(),a.qZA()}}function Yt(t,e){1&t&&(a.TgZ(0,"th",34),a._uU(1,"Prefix"),a.qZA())}function Mt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-form-field",36),a.TgZ(1,"input",37),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().$implicit.dataFile.prefix=e}),a.qZA(),a.qZA()}if(2&t){const t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngModel",t.dataFile.prefix)}}function Ot(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,Mt,2,1,"mat-form-field",35),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",null==t.dataFile?null:t.dataFile.id)}}function St(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1,"DataFile name"),a.qZA())}function Et(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-form-field",36),a.TgZ(1,"input",38),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().$implicit.dataFile.name=e}),a.qZA(),a.qZA()}if(2&t){const t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngModel",t.dataFile.name)}}function jt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,Et,2,1,"mat-form-field",35),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.dataFile)}}function $t(t,e){1&t&&(a.TgZ(0,"th",34),a._uU(1,"Suffix"),a.qZA())}function Pt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-form-field",36),a.TgZ(1,"input",39),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().$implicit.dataFile.suffix=e}),a.qZA(),a.qZA()}if(2&t){const t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngModel",t.dataFile.suffix)}}function Ht(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,Pt,2,1,"mat-form-field",35),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.dataFile)}}function Rt(t,e){1&t&&(a.TgZ(0,"th",34),a._uU(1,"Mime Type"),a.qZA())}function Bt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Oqu(t.mimeType)}}function Lt(t,e){1&t&&a._UZ(0,"th",29)}function zt(t,e){if(1&t&&(a.TgZ(0,"td",30),a._UZ(1,"img",40),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("src",t.iconUrl,a.LSH)}}function Vt(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1,"Original Filename"),a.qZA())}function Kt(t,e){if(1&t&&(a.TgZ(0,"td",30),a.TgZ(1,"a",41),a._uU(2),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("href",t.embedUrl,a.LSH),a.xp6(1),a.Oqu(t.name)}}function Gt(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Status "),a.qZA())}function Xt(t,e){1&t&&(a.TgZ(0,"span",47),a._UZ(1,"i",48),a._uU(2," Pending"),a.qZA())}function Wt(t,e){1&t&&(a.TgZ(0,"span",49),a._UZ(1,"i",50),a._uU(2," Processing"),a.qZA())}function te(t,e){1&t&&(a.TgZ(0,"span",51),a._UZ(1,"i",52),a._uU(2," Imported"),a.qZA())}function ee(t,e){1&t&&(a.TgZ(0,"span",53),a._UZ(1,"i",54),a._uU(2," Error"),a.qZA())}function ie(t,e){1&t&&(a.TgZ(0,"td",42),a.YNc(1,Xt,3,0,"span",43),a.YNc(2,Wt,3,0,"span",44),a.YNc(3,te,3,0,"span",45),a.YNc(4,ee,3,0,"span",46),a.qZA()),2&t&&(a.Q6J("ngSwitch",e.$implicit.status),a.xp6(1),a.Q6J("ngSwitchCase","pending"),a.xp6(1),a.Q6J("ngSwitchCase","importing"),a.xp6(1),a.Q6J("ngSwitchCase","success"),a.xp6(1),a.Q6J("ngSwitchCase","error"))}function ae(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Tags "),a.qZA())}const ne=function(){return[]};function se(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"bdp-tag-input",56),a.NdJ("tagChange",function(e){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(3).onTagChanged(e,i.dataFile)}),a.qZA()}if(2&t){const t=a.oxw().$implicit,e=a.oxw(3);a.Q6J("packages",(null==e.project?null:e.project.packages)||a.DdM(3,ne))("tasks",e.tasks)("tags",t.dataFile.tags)}}function oe(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,se,1,4,"bdp-tag-input",55),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.dataFile)}}function le(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Link "),a.qZA())}const ce=function(t){return["/dataFile",t,"info"]};function re(t,e){if(1&t&&(a.TgZ(0,"a",58),a._UZ(1,"span",59),a.qZA()),2&t){const t=a.oxw().$implicit;a.Q6J("routerLink",a.VKq(1,ce,t.dataFile.id))}}function de(t,e){if(1&t&&(a.TgZ(0,"td",30),a.TgZ(1,"div",31),a.YNc(2,re,2,3,"a",57),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngIf",t.dataFile)}}function ue(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Controls "),a.qZA())}function fe(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"Import"),a.qZA())}function ge(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"Importing"),a.qZA())}function pe(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"Imported"),a.qZA())}function he(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"Error"),a.qZA())}function me(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",30),a.TgZ(1,"button",60),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(3).importFile(e)}),a._UZ(2,"span",61),a.YNc(3,fe,2,0,"span",62),a.YNc(4,ge,2,0,"span",62),a.YNc(5,pe,2,0,"span",62),a.YNc(6,he,2,0,"span",62),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.Q6J("disabled","pending"!==t.status),a.xp6(2),a.Q6J("ngIf","pending"==t.status),a.xp6(1),a.Q6J("ngIf","importing"==t.status),a.xp6(1),a.Q6J("ngIf","success"==t.status),a.xp6(1),a.Q6J("ngIf","error"==t.status)}}function Ze(t,e){1&t&&(a.TgZ(0,"th",29),a._uU(1," Controls "),a.qZA())}function xe(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",63),a.NdJ("click",function(){a.CHM(t);const e=a.oxw(2).$implicit;return a.oxw(3).onUpdateDataFile(e.dataFile)}),a._UZ(1,"i",66),a.qZA()}}function Te(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"button",63),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(3).onDeleteDataFile(e.dataFile.id,e.id)}),a._UZ(2,"i",64),a.qZA(),a.YNc(3,xe,2,0,"button",65),a.BQk()}if(2&t){const t=a.oxw().$implicit;a.xp6(3),a.Q6J("ngIf",3!==t.status)}}function ke(t,e){if(1&t&&(a.TgZ(0,"td",30),a.YNc(1,Te,4,1,"ng-container",62),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.dataFile&&"success"==t.status)}}function we(t,e){1&t&&a._UZ(0,"tr",67)}function Fe(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr",68),a.NdJ("@highlightRows.done",function(e){const i=a.CHM(t).$implicit;return a.oxw(3).resetState(e,i.dataFile)}),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(3);a.Q6J("@highlightRows",t&&t.dataFile&&i.highlightController[t.dataFile.id]?"active":"inactive")}}function Ae(t,e){if(1&t&&a._UZ(0,"tr",68),2&t){const t=e.$implicit,i=a.oxw(3);a.Q6J("@highlightRows",t&&t.dataFile&&i.highlightController[t.dataFile.id]?"active":"inactive")}}const De=function(){return["deleteIcon","iconUrl","name","mimeType","status","importBtn"]},be=function(){return["link","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function qe(t,e){if(1&t&&(a.TgZ(0,"div",9),a.TgZ(1,"table",10),a.ynx(2,11),a.YNc(3,Qt,1,0,"th",12),a.YNc(4,It,4,0,"td",13),a.BQk(),a.ynx(5,14),a.YNc(6,Yt,2,0,"th",15),a.YNc(7,Ot,2,1,"td",13),a.BQk(),a.ynx(8,16),a.YNc(9,St,2,0,"th",12),a.YNc(10,jt,2,1,"td",13),a.BQk(),a.ynx(11,17),a.YNc(12,$t,2,0,"th",15),a.YNc(13,Ht,2,1,"td",13),a.BQk(),a.ynx(14,18),a.YNc(15,Rt,2,0,"th",15),a.YNc(16,Bt,3,1,"td",13),a.BQk(),a.ynx(17,19),a.YNc(18,Lt,1,0,"th",12),a.YNc(19,zt,2,1,"td",13),a.BQk(),a.ynx(20,20),a.YNc(21,Vt,2,0,"th",12),a.YNc(22,Kt,3,2,"td",13),a.BQk(),a.ynx(23,21),a.YNc(24,Gt,2,0,"th",12),a.YNc(25,ie,5,5,"td",22),a.BQk(),a.ynx(26,23),a.YNc(27,ae,2,0,"th",12),a.YNc(28,oe,2,1,"td",13),a.BQk(),a.ynx(29,24),a.YNc(30,le,2,0,"th",12),a.YNc(31,de,3,1,"td",13),a.BQk(),a.ynx(32,25),a.YNc(33,ue,2,0,"th",12),a.YNc(34,me,7,5,"td",13),a.BQk(),a.ynx(35,26),a.YNc(36,Ze,2,0,"th",12),a.YNc(37,ke,2,1,"td",13),a.BQk(),a.YNc(38,we,1,0,"tr",27),a.YNc(39,Fe,1,1,"tr",28),a.YNc(40,Ae,1,1,"tr",28),a.qZA(),a.qZA()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("dataSource",t._selectedDocs),a.xp6(37),a.Q6J("matHeaderRowDef",a.DdM(4,De)),a.xp6(1),a.Q6J("matRowDefColumns",a.DdM(5,De)),a.xp6(1),a.Q6J("matRowDefColumns",a.DdM(6,be))}}function Ce(t,e){if(1&t&&(a.TgZ(0,"div",1),a.YNc(1,_t,2,0,"button",2),a.YNc(2,Jt,2,0,"button",3),a.YNc(3,Ut,2,0,"button",4),a.YNc(4,qe,41,7,"div",5),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",!t.oauthToken),a.xp6(1),a.Q6J("ngIf",t.authApiLoaded&&t.oauthToken),a.xp6(1),a.Q6J("ngIf",t.pickerApiLoaded&&t.oauthToken),a.xp6(1),a.Q6J("ngIf",t._selectedDocs.length>0)}}let ve=(()=>{class t{constructor(t,e,i,n){this.projectService=t,this.router=e,this.systemService=i,this.infoService=n,this.tags=[],this.keepFileName=!0,this.name="",this.desc="",this.prefix="",this.suffix="",this.tasks=[],this.navigateDataFile=new a.vpe,this.deleteDataFile=new a.vpe,this.updateDataFile=new a.vpe,this.pickerApiLoaded=!1,this.authApiLoaded=!1,this.highlightController={},this.clientId="",this._selectedDocs=[],this.appId="",this.scope=["https://www.googleapis.com/auth/drive.readonly"],this.authToAuthResult={},this._subs=[],this.authToPicker={},this._gapi=gapi,this.zone=new a.R0b({enableLongStackTrace:!0})}ngOnInit(){if(this._selectedDocs=this.projectService._googleDriveImportQueue,this._gapi.load("picker",{callback:()=>this.zone.run(()=>this.pickerApiLoaded=!0)}),this._gapi.load("auth",{callback:()=>this.zone.run(()=>this.authApiLoaded=!0)}),this.projectService.sysInfo.googleClientID){this.clientId=this.projectService.sysInfo.googleClientID;const t=this.clientId.split("-");this.appId=t[0]}else this._subs.push(this.systemService.sysInfo$.subscribe(t=>{t&&(this.clientId=t.googleClientID,this.appId=this.clientId.split("-")[0])}));this._subs.push(this.infoService.incomingDataChange$.subscribe(t=>{if("DataFile"===t.target)if("update"===t.type){const e=t.data;for(let t=0;t<this._selectedDocs.length;t++){const i=this._selectedDocs[t].dataFile;if(i&&e.id===i.id){i.prefix=e.prefix,i.name=e.name,i.suffix=e.suffix,i.desc=e.desc,i.tags=e.tags,this.highlightController[e.id]=!0;break}}}else if("remove"===t.type)for(let e=0;e<this._selectedDocs.length;e++)if(this._selectedDocs[e].dataFile&&this._selectedDocs[e].dataFile.id===t.data.id){this._selectedDocs.splice(e,1),this.selectedDocTable&&this.selectedDocTable.renderRows();break}}))}get selectedDocs(){return this._selectedDocs}linkAccount(){this._gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1,authuser:-1},t=>{this.zone.run(()=>this.oauthToken=t.access_token),this.oauthToken&&(this.authToAuthResult[this.oauthToken]=t,this.showPicker())})}showPicker(){this.oauthToken&&(this.authToPicker[this.oauthToken]?this.authToPicker[this.oauthToken].setVisible(!0):this.pickerApiLoaded&&this.oauthToken&&(this.authToPicker[this.oauthToken]=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.DOCS_IMAGES).addView(google.picker.ViewId.PRESENTATIONS).addView(google.picker.ViewId.SPREADSHEETS).setOAuthToken(this.oauthToken).setAppId(this.appId).setDeveloperKey(this.apiKey).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setMaxItems(5).setCallback(t=>this.pickerCallback(t)).build(),this.authToPicker[this.oauthToken].setVisible(!0)))}pickerCallback(t){if(!this.oauthToken)return;let e=[];t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&(e=t[google.picker.Response.DOCUMENTS],this.appendFiles(e,this.oauthToken))}appendFiles(t,e){e&&(t.forEach(t=>{t.oauthToken=this.oauthToken,t.status="pending",t.dataFile=void 0}),this._selectedDocs.push.apply(this._selectedDocs,t),this.selectedDocTable&&this.selectedDocTable.renderRows())}removeFromList(t){for(let e=0;e<this._selectedDocs.length;e++)if(this._selectedDocs[e].id===t){this._selectedDocs.splice(e,1);break}this.selectedDocTable&&this.selectedDocTable.renderRows()}importFile(t){if(!this.project)return;this.zone.run(()=>t.status="importing");const e=this.projectService.importData(t.id,t.name,this.desc||t.description,t.mimeType,t.oauthToken,this.project.id,this.prefix,this.suffix,this.name,this.tags||[],this.folder||"",!!this.keepFileName).subscribe(i=>{e.unsubscribe(),i.isError?t.status="error":(t.status="success",t.dataFile=i.success)})}gotoDataFile(t){this.router.navigate(["/dataFile",t,"info"])}resetState(t,e){e&&e.id&&this.highlightController[e.id]&&delete this.highlightController[e.id]}onDeleteDataFile(t,e){this.removeFromList(e),this.deleteDataFile.emit(t)}onUpdateDataFile(t){this.updateDataFile.emit(t)}onTagChanged(t,e){e.tags=t}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe());let t=Object.keys(this.authToPicker);for(let e=0;e<t.length;e++)this.authToPicker[t[e]].dispose(),delete this.authToPicker[t[e]];t=Object.keys(this.authToAuthResult);for(let e=0;e<t.length;e++)this.oauthToken&&this.authToAuthResult[this.oauthToken]["g-oauth-window"].close();this.authToPicker=void 0,delete this._gapi}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.Y),a.Y36(o.F0),a.Y36(yt.o),a.Y36(b.C))},t.\u0275cmp=a.Xpm({type:t,selectors:[["chi-google-picker"]],viewQuery:function(t,e){if(1&t&&a.Gf(w.BZ,5),2&t){let t;a.iGM(t=a.CRH())&&(e.selectedDocTable=t.first)}},inputs:{project:"project",allowedExtensions:"allowedExtensions",tags:"tags",keepFileName:"keepFileName",folder:"folder",apiKey:"apiKey",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:1,vars:1,consts:[["class","container-fluid p-3",4,"ngIf"],[1,"container-fluid","p-3"],["mat-raised-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],["class","mt-3","mat-button","",3,"click",4,"ngIf"],["class","mt-3","mat-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],["mat-button","",1,"mt-3",3,"click"],["mat-button","","color","primary",1,"mt-3",3,"click"],[1,"row"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","mimeType"],["matColumnDef","iconUrl"],["matColumnDef","name"],["matColumnDef","status"],["mat-cell","","class","px-2",3,"ngSwitch",4,"matCellDef"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","importBtn"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],["style","width: 100%;",4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[3,"src"],["target","_blank",3,"href"],["mat-cell","",1,"px-2",3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],[1,"text-info"],[1,"fa","fa-hourglass-half"],[1,"text-warning"],[1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],[1,"fas","fa-check","fa-fw"],[1,"text-danger"],[1,"fas","fa-times","fa-fw"],[3,"packages","tasks","tags","tagChange",4,"ngIf"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-raised-button","",3,"disabled","click"],[1,"fas","fa-cloud-upload-alt","fa-fw","fa-lg","mr-4"],[4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&a.YNc(0,Ce,5,4,"div",0),2&t&&a.Q6J("ngIf",e.clientId)},directives:[l.O5,m.lW,w.BZ,w.w1,w.fO,w.Dz,w.as,w.nj,w.ge,w.ev,u.KE,f.Nt,d.Fj,d.nD,d.JJ,d.On,l.RF,l.n9,x.y,m.zs,o.yS,w.XQ,w.Gk],encapsulation:2,data:{animation:[A]}}),t})();function Ne(t,e){1&t&&a._UZ(0,"th",23)}function ye(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",24),a.TgZ(1,"div",25),a.TgZ(2,"button",26),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).removeFromList(e.dataFile.id)}),a._UZ(3,"i",27),a.qZA(),a.qZA(),a.qZA()}}function _e(t,e){1&t&&(a.TgZ(0,"th",28),a._uU(1,"Prefix"),a.qZA())}function Je(t,e){if(1&t&&(a.TgZ(0,"td",24),a.TgZ(1,"mat-form-field",1),a.TgZ(2,"input",29),a.NdJ("ngModelChange",function(t){return e.$implicit.dataFile.prefix=t}),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngModel",t.dataFile.prefix)}}function Ue(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1,"DataFile name"),a.qZA())}function Qe(t,e){if(1&t&&(a.TgZ(0,"td",24),a.TgZ(1,"mat-form-field",1),a.TgZ(2,"input",30),a.NdJ("ngModelChange",function(t){return e.$implicit.dataFile.name=t}),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngModel",t.dataFile.name)}}function Ie(t,e){1&t&&(a.TgZ(0,"th",28),a._uU(1,"Suffix"),a.qZA())}function Ye(t,e){if(1&t&&(a.TgZ(0,"td",24),a.TgZ(1,"mat-form-field",1),a.TgZ(2,"input",31),a.NdJ("ngModelChange",function(t){return e.$implicit.dataFile.suffix=t}),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngModel",t.dataFile.suffix)}}function Me(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1," Status "),a.qZA())}function Oe(t,e){1&t&&(a.TgZ(0,"span"),a._UZ(1,"span",33),a._uU(2,"Importing"),a.qZA())}function Se(t,e){1&t&&(a.TgZ(0,"span"),a.TgZ(1,"span",34),a._uU(2,"Success"),a.qZA(),a.qZA())}function Ee(t,e){1&t&&(a.TgZ(0,"span"),a.TgZ(1,"span",35),a._uU(2,"Deleting"),a.qZA(),a.qZA())}function je(t,e){1&t&&(a.TgZ(0,"span"),a.TgZ(1,"span",36),a._uU(2,"Error"),a.qZA(),a.qZA())}function $e(t,e){if(1&t&&(a.TgZ(0,"td",24),a.YNc(1,Oe,3,0,"span",32),a.YNc(2,Se,3,0,"span",32),a.YNc(3,Ee,3,0,"span",32),a.YNc(4,je,3,0,"span",32),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",0===t.dataFile.status),a.xp6(1),a.Q6J("ngIf",1===t.dataFile.status),a.xp6(1),a.Q6J("ngIf",3===t.dataFile.status),a.xp6(1),a.Q6J("ngIf",4===t.dataFile.status)}}function Pe(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1," Tags "),a.qZA())}const He=function(){return[]};function Re(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",24),a.TgZ(1,"bdp-tag-input",37),a.NdJ("tagChange",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).onTagChanged(e,i.dataFile)}),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(1),a.Q6J("packages",(null==i.project?null:i.project.packages)||a.DdM(3,He))("tasks",i.tasks)("tags",t.dataFile.tags)}}function Be(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1,"Original Path"),a.qZA())}function Le(t,e){if(1&t&&(a.TgZ(0,"td",24),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Oqu(t.originalPath)}}function ze(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1," Link "),a.qZA())}function Ve(t,e){1&t&&a._UZ(0,"td",24)}function Ke(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1," Controls "),a.qZA())}const Ge=function(t){return["/dataFile",t,"info"]};function Xe(t,e){if(1&t&&(a.TgZ(0,"a",42),a._UZ(1,"i",43),a.qZA()),2&t){const t=a.oxw().$implicit;a.Q6J("routerLink",a.VKq(1,Ge,t.dataFile.id))}}function We(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",39),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).onUpdateDataFile(e.dataFile)}),a._UZ(1,"i",44),a.qZA()}}function ti(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",24),a.YNc(1,Xe,2,3,"a",38),a.TgZ(2,"button",39),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).onDeleteDataFile(e.dataFile.id)}),a._UZ(3,"i",40),a.qZA(),a.YNc(4,We,2,0,"button",41),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t),a.xp6(3),a.Q6J("ngIf",3!==t.status)}}function ei(t,e){1&t&&a._UZ(0,"tr",45)}function ii(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr",46),a.NdJ("@highlightRows.done",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).resetState(e,i.dataFile)}),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("@highlightRows",t&&t.dataFile&&i.highlightController[t.dataFile.id]?"active":"inactive")}}const ai=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","OriginalPath","tags","controls"]};function ni(t,e){if(1&t&&(a.TgZ(0,"table",8),a.ynx(1,9),a.YNc(2,Ne,1,0,"th",10),a.YNc(3,ye,4,0,"td",11),a.BQk(),a.ynx(4,12),a.YNc(5,_e,2,0,"th",13),a.YNc(6,Je,3,1,"td",11),a.BQk(),a.ynx(7,14),a.YNc(8,Ue,2,0,"th",10),a.YNc(9,Qe,3,1,"td",11),a.BQk(),a.ynx(10,15),a.YNc(11,Ie,2,0,"th",13),a.YNc(12,Ye,3,1,"td",11),a.BQk(),a.ynx(13,16),a.YNc(14,Me,2,0,"th",10),a.YNc(15,$e,5,4,"td",11),a.BQk(),a.ynx(16,17),a.YNc(17,Pe,2,0,"th",10),a.YNc(18,Re,2,4,"td",11),a.BQk(),a.ynx(19,18),a.YNc(20,Be,2,0,"th",10),a.YNc(21,Le,3,1,"td",11),a.BQk(),a.ynx(22,19),a.YNc(23,ze,2,0,"th",10),a.YNc(24,Ve,1,0,"td",11),a.BQk(),a.ynx(25,20),a.YNc(26,Ke,2,0,"th",10),a.YNc(27,ti,5,2,"td",11),a.BQk(),a.YNc(28,ei,1,0,"tr",21),a.YNc(29,ii,1,1,"tr",22),a.qZA()),2&t){const t=a.oxw();a.Q6J("dataSource",t.importedRecords),a.xp6(28),a.Q6J("matHeaderRowDef",a.DdM(3,ai)),a.xp6(1),a.Q6J("matRowDefColumns",a.DdM(4,ai))}}let si=(()=>{class t{constructor(t,e,i){this.infoService=t,this.projectService=e,this.router=i,this.allowedExtensions=[],this.keepFileName=!0,this.tags=[],this.name="",this.desc="",this.prefix="",this.suffix="",this.tasks=[],this.navigateDataFile=new a.vpe,this.deleteDataFile=new a.vpe,this.updateDataFile=new a.vpe,this.highlightController={},this.importedRecords=[],this.directLink=!1,this.newPath="",this._subs=[]}ngOnInit(){this._subs.push(this.infoService.incomingDataChange$.subscribe(t=>{if("update"===t.type&&"DataFile"===t.target){const e=t.data;for(let t=0;t<this.importedRecords.length;t++){const i=this.importedRecords[t].dataFile;if(i&&e.id===i.id){i.prefix=e.prefix,i.name=e.name,i.suffix=e.suffix,i.desc=e.desc,i.tags=e.tags,this.highlightController[e.id]||(this.highlightController[e.id]=!0);break}}}else"remove"===t.type&&"DataFile"===t.target&&this.removeFromList(t.data.id)}))}importFromFolder(){if(!this.newPath||!this.project)return;const t=this.newPath;this.newPath="";const e=this.projectService.importFromPath(t,this.project.id,this.directLink,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder||"",this.keepFileName).subscribe(i=>{if(e.unsubscribe(),i.success)return this.importedRecords.push({originalPath:t,dataFile:i.success}),this.importedTable&&this.importedTable.renderRows()})}removeFromList(t){for(let e=0;e<this.importedRecords.length;e++)if(this.importedRecords[e].dataFile&&this.importedRecords[e].dataFile.id&&this.importedRecords[e].dataFile.id===t){this.importedRecords.splice(e,1);break}this.importedTable&&this.importedTable.renderRows()}resetState(t,e){e&&e.id&&this.highlightController[e.id]&&delete this.highlightController[e.id]}onTagChanged(t,e){e.tags=t}onUpdateDataFile(t){this.updateDataFile.emit(t)}onDeleteDataFile(t){this.removeFromList(t),this.deleteDataFile.emit(t)}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(b.C),a.Y36(s.Y),a.Y36(o.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["chi-path-importer"]],viewQuery:function(t,e){if(1&t&&a.Gf(w.BZ,5),2&t){let t;a.iGM(t=a.CRH())&&(e.importedTable=t.first)}},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:14,vars:4,consts:[[1,"mt-3"],[2,"width","100%"],["matInput","","type","text","placeholder","The path on the server to import",3,"ngModel","ngModelChange"],["align","end"],[3,"ngModel","ngModelChange"],[1,"text-muted"],["mat-raised-button","","color","primary",1,"my-5",3,"disabled","click"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","OriginalPath"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times"],["mat-header-cell","",2,"width","80px"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"fas","fa-spin","fa-circle-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","text-success"],["aria-hidden","true",1,"far","fa-trash-alt","text-success"],["aria-hidden","true",1,"fas","fa-times","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.TgZ(0,"h4",0),a._uU(1,"Importing from the server path"),a.qZA(),a.TgZ(2,"mat-form-field",1),a.TgZ(3,"input",2),a.NdJ("ngModelChange",function(t){return e.newPath=t}),a.qZA(),a.TgZ(4,"mat-hint",3),a._uU(5,"Please specify the folder path that already on the server."),a.qZA(),a.qZA(),a.TgZ(6,"mat-checkbox",4),a.NdJ("ngModelChange",function(t){return e.directLink=t}),a._uU(7," Creating soft links directly\n"),a.qZA(),a.TgZ(8,"div"),a.TgZ(9,"small",5),a._uU(10,"*Creating soft links directly is fast but you may encounter `file not found` errors in some situations."),a.qZA(),a.qZA(),a.TgZ(11,"button",6),a.NdJ("click",function(){return e.importFromFolder()}),a._uU(12,"Import"),a.qZA(),a.YNc(13,ni,30,5,"table",7)),2&t&&(a.xp6(3),a.Q6J("ngModel",e.newPath),a.xp6(3),a.Q6J("ngModel",e.directLink),a.xp6(5),a.Q6J("disabled",!e.newPath),a.xp6(2),a.Q6J("ngIf",e.importedRecords.length>0))},directives:[u.KE,f.Nt,d.Fj,d.JJ,d.On,u.bx,h.oG,m.lW,l.O5,w.BZ,w.w1,w.fO,w.Dz,w.as,w.nj,w.ge,w.ev,d.nD,x.y,m.zs,o.yS,w.XQ,w.Gk],encapsulation:2,data:{animation:[A]}}),t})();function oi(t,e){1&t&&a._UZ(0,"th",18)}function li(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a.TgZ(1,"div",20),a.TgZ(2,"button",21),a.NdJ("click",function(){const e=a.CHM(t).index;return a.oxw(2).removeRecords(e)}),a._UZ(3,"i",22),a.qZA(),a.qZA(),a.qZA()}}function ci(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1,"Prefix"),a.qZA())}function ri(t,e){if(1&t&&(a.TgZ(0,"td",19),a.TgZ(1,"mat-form-field",24),a.TgZ(2,"input",25),a.NdJ("ngModelChange",function(t){return e.$implicit.prefix=t}),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngModel",t.prefix)}}function di(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1,"DataFile name"),a.qZA())}function ui(t,e){if(1&t&&(a.TgZ(0,"td",19),a.TgZ(1,"mat-form-field",24),a.TgZ(2,"input",26),a.NdJ("ngModelChange",function(t){return e.$implicit.name=t}),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngModel",t.name)}}function fi(t,e){1&t&&(a.TgZ(0,"th",23),a._uU(1,"Suffix"),a.qZA())}function gi(t,e){if(1&t&&(a.TgZ(0,"td",19),a.TgZ(1,"mat-form-field",24),a.TgZ(2,"input",27),a.NdJ("ngModelChange",function(t){return e.$implicit.suffix=t}),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(2),a.Q6J("ngModel",t.suffix)}}function pi(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Status "),a.qZA())}function hi(t,e){1&t&&(a.TgZ(0,"span"),a.TgZ(1,"span",29),a._uU(2,"Aborted"),a.qZA(),a.qZA())}function mi(t,e){1&t&&(a.TgZ(0,"span"),a._UZ(1,"span",30),a._uU(2,"Uploading"),a.qZA())}function Zi(t,e){1&t&&(a.TgZ(0,"span"),a.TgZ(1,"span",31),a._uU(2,"Success"),a.qZA(),a.qZA())}function xi(t,e){1&t&&(a.TgZ(0,"span"),a.TgZ(1,"span",32),a._uU(2,"Error"),a.qZA(),a.qZA())}function Ti(t,e){if(1&t&&(a.TgZ(0,"td",19),a.YNc(1,hi,3,0,"span",28),a.YNc(2,mi,3,0,"span",28),a.YNc(3,Zi,3,0,"span",28),a.YNc(4,xi,3,0,"span",28),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t.abort),a.xp6(1),a.Q6J("ngIf",t.uploading),a.xp6(1),a.Q6J("ngIf",t.done&&!t.error),a.xp6(1),a.Q6J("ngIf",t.error)}}function ki(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Tags "),a.qZA())}const wi=function(){return[]};function Fi(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a.TgZ(1,"bdp-tag-input",33),a.NdJ("tagChange",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).onTagChanged(e,i)}),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(1),a.Q6J("packages",(null==i.project?null:i.project.packages)||a.DdM(3,wi))("tasks",i.tasks)("tags",t.tags)}}function Ai(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Link "),a.qZA())}const Di=function(t){return["/dataFile",t,"info"]};function bi(t,e){if(1&t&&(a.TgZ(0,"a",35),a._UZ(1,"span",36),a.qZA()),2&t){const t=a.oxw().$implicit;a.Q6J("routerLink",a.VKq(1,Di,t.id))}}function qi(t,e){if(1&t&&(a.TgZ(0,"td",19),a.YNc(1,bi,2,3,"a",34),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t)}}function Ci(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Controls "),a.qZA())}function vi(t,e){if(1&t&&(a.TgZ(0,"a",35),a._UZ(1,"span",36),a.qZA()),2&t){const t=a.oxw().$implicit;a.Q6J("routerLink",a.VKq(1,Di,t.id))}}function Ni(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",40),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw(2).onUpdateDataFile(e)}),a._UZ(1,"i",41),a.qZA()}if(2&t){const t=a.oxw().$implicit,e=a.oxw(2);a.Q6J("disabled",e.updatingIndicator[t.id])}}function yi(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a.YNc(1,vi,2,3,"a",34),a.TgZ(2,"button",37),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).onDeleteDataFile(e.id)}),a._UZ(3,"i",38),a.qZA(),a.YNc(4,Ni,2,1,"button",39),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf",t),a.xp6(3),a.Q6J("ngIf",3!==t.status)}}function _i(t,e){1&t&&a._UZ(0,"tr",42)}function Ji(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr",43),a.NdJ("@highlightRows.done",function(e){const i=a.CHM(t).$implicit;return a.oxw(2).resetState(e,i)}),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("@highlightRows",t&&i.highlightController[t.id]?"active":"inactive")}}const Ui=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Qi(t,e){if(1&t&&(a.TgZ(0,"table",4),a.ynx(1,5),a.YNc(2,oi,1,0,"th",6),a.YNc(3,li,4,0,"td",7),a.BQk(),a.ynx(4,8),a.YNc(5,ci,2,0,"th",9),a.YNc(6,ri,3,1,"td",7),a.BQk(),a.ynx(7,10),a.YNc(8,di,2,0,"th",6),a.YNc(9,ui,3,1,"td",7),a.BQk(),a.ynx(10,11),a.YNc(11,fi,2,0,"th",9),a.YNc(12,gi,3,1,"td",7),a.BQk(),a.ynx(13,12),a.YNc(14,pi,2,0,"th",6),a.YNc(15,Ti,5,4,"td",7),a.BQk(),a.ynx(16,13),a.YNc(17,ki,2,0,"th",6),a.YNc(18,Fi,2,4,"td",7),a.BQk(),a.ynx(19,14),a.YNc(20,Ai,2,0,"th",6),a.YNc(21,qi,2,1,"td",7),a.BQk(),a.ynx(22,15),a.YNc(23,Ci,2,0,"th",6),a.YNc(24,yi,5,2,"td",7),a.BQk(),a.YNc(25,_i,1,0,"tr",16),a.YNc(26,Ji,1,1,"tr",17),a.qZA()),2&t){const t=a.oxw();a.Q6J("dataSource",t.addedFolders),a.xp6(25),a.Q6J("matHeaderRowDef",a.DdM(3,Ui)),a.xp6(1),a.Q6J("matRowDefColumns",a.DdM(4,Ui))}}let Ii=(()=>{class t{constructor(t,e){this.projectService=t,this.infoService=e,this.tags=[],this.desc="",this.prefix="",this.suffix="",this.tasks=[],this.navigateDataFile=new a.vpe,this.deleteDataFile=new a.vpe,this.updateDataFile=new a.vpe,this.addedFolders=[],this._subs=[],this.highlightController={},this.updatingIndicator={}}ngOnInit(){this._subs.push(this.infoService.incomingDataChange$.subscribe(t=>{if("update"===t.type&&"DataFile"===t.target){const e=t.data;for(let t=0;t<this.addedFolders.length;t++){const i=this.addedFolders[t];if(i&&e.id===i.id){i.prefix=e.prefix,i.name=e.name,i.suffix=e.suffix,i.desc=e.desc,i.tags=e.tags,this.highlightController[e.id]=!0;break}}}else if("remove"===t.type&&"DataFile"===t.target)for(let e=0;e<this.addedFolders.length;e++){const i=this.addedFolders[e];if(i&&i.id===t.data.id){this.removeRecords(e);break}}}))}createFolder(){this.project&&this.name&&this.projectService.createFolder(this.project.id,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder,this.keepFileName).subscribe(t=>{if(!t.isError)return this.addedFolders.push(t.success),this.addedFolderTable&&this.addedFolderTable.renderRows()})}removeRecords(t){return this.addedFolders.splice(t,1),this.addedFolderTable&&this.addedFolderTable.renderRows()}resetState(t,e){e.id&&(delete this.highlightController[e.id],setTimeout(()=>{delete this.updatingIndicator[e.id]},1e3))}onTagChanged(t,e){e.tags=t}onUpdateDataFile(t){this.updatingIndicator[t.id]=!0,this.updateDataFile.emit(t)}onDeleteDataFile(t){for(let e=0;e<this.addedFolders.length;e++)if(this.addedFolders[e].id===t){this.addedFolders.splice(e,1);break}this.addedFolderTable&&this.addedFolderTable.renderRows(),this.deleteDataFile.emit(t)}ngOnDestroy(){this._subs.map(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.Y),a.Y36(b.C))},t.\u0275cmp=a.Xpm({type:t,selectors:[["chi-add-folder"]],viewQuery:function(t,e){if(1&t&&a.Gf(w.BZ,5),2&t){let t;a.iGM(t=a.CRH())&&(e.addedFolderTable=t.first)}},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:5,vars:1,consts:[[1,"p-3"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],[1,"fas","fa-folder-plus","mr-3","fa-fw","fa-lg"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-muted"],[1,"fas","fa-spin","fa-circle-o-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","fa-fw","text-success"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],["mat-icon-button","","type","button",3,"disabled","click"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"button",1),a.NdJ("click",function(){return e.createFolder()}),a._UZ(2,"span",2),a._uU(3,"Add an empty folder "),a.qZA(),a.YNc(4,Qi,27,5,"table",3),a.qZA()),2&t&&(a.xp6(4),a.Q6J("ngIf",e.addedFolders.length>0))},directives:[m.lW,l.O5,w.BZ,w.w1,w.fO,w.Dz,w.as,w.nj,w.ge,w.ev,u.KE,f.Nt,d.Fj,d.nD,d.JJ,d.On,x.y,m.zs,o.yS,w.XQ,w.Gk],encapsulation:2,data:{animation:[A]}}),t})();function Yi(t,e){if(1&t&&(a.TgZ(0,"div",37),a._UZ(1,"h1",38),a.TgZ(2,"button",39),a.TgZ(3,"mat-icon"),a._uU(4,"close"),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("innerHTML",t.title,a.oJD)}}function Mi(t,e){1&t&&(a.TgZ(0,"mat-button-toggle",6),a._UZ(1,"i",40),a._uU(2," Google Drive "),a.qZA()),2&t&&a.Q6J("value","google")}function Oi(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",4),a.TgZ(1,"bdp-tag-input",41),a.NdJ("tagChange",function(e){return a.CHM(t),a.oxw(2).onTagChanged(e)}),a.qZA(),a.qZA()}if(2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("packages",t.project.packages)("tasks",t.tasks)("tags",t.tags)}}function Si(t,e){if(1&t&&(a.TgZ(0,"mat-option",6),a.TgZ(1,"u",12),a._uU(2),a.qZA(),a._uU(3),a.TgZ(4,"u",12),a._uU(5),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t.id),a.xp6(2),a.Oqu(t.prefix),a.xp6(1),a.Oqu(t.name),a.xp6(2),a.Oqu(t.suffix)}}function Ei(t,e){1&t&&(a.ynx(0),a.TgZ(1,"span",42),a._uU(2,"All extensions"),a.qZA(),a.BQk())}function ji(t,e){if(1&t&&(a.TgZ(0,"span",44),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function $i(t,e){if(1&t&&a.YNc(0,ji,2,1,"span",43),2&t){const t=a.oxw(2);a.Q6J("ngForOf",t.allowedFormats)}}function Pi(t,e){1&t&&(a.TgZ(0,"div",32),a.TgZ(1,"div",45),a.TgZ(2,"span",46),a._uU(3,"No valid file extensions!"),a._UZ(4,"br"),a._uU(5,"You might want to check if you have specify packages for this project."),a.qZA(),a.qZA(),a.qZA())}function Hi(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"chi-file-uploader",47),a.NdJ("updateDataFile",function(e){return a.CHM(t),a.oxw(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return a.CHM(t),a.oxw(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return a.CHM(t),a.oxw(2).onDeleteDataFile(e)}),a.qZA(),a.BQk()}if(2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("project",t.project)("allowedExtensions",t.allowedFormats)("fileLimits",(null==t.sysConfig?null:t.sysConfig.fileLimits)||0)("tasks",t.tasks)("tags",t.tags)("folder",t.parentDataFileID)("keepFileName",t.keepFileName)("name",t.name)("desc",t.desc)("prefix",t.prefix)("suffix",t.suffix)}}function Ri(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"chi-google-picker",48),a.NdJ("updateDataFile",function(e){return a.CHM(t),a.oxw(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return a.CHM(t),a.oxw(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return a.CHM(t),a.oxw(2).onDeleteDataFile(e)}),a.qZA(),a.BQk()}if(2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("project",t.project)("allowedExtensions",t.allowedFormats)("apiKey",null==t.sysConfig?null:t.sysConfig.googlePickerAPIKey)("tasks",t.tasks)("tags",t.tags)("folder",t.parentDataFileID)("keepFileName",t.keepFileName)("name",t.name)("desc",t.desc)("prefix",t.prefix)("suffix",t.suffix)}}function Bi(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"chi-path-importer",50),a.NdJ("updateDataFile",function(e){return a.CHM(t),a.oxw(3).onUpdateDataFile(e)})("navigateDataFile",function(e){return a.CHM(t),a.oxw(3).onNavigateDataFile(e)})("deleteDataFile",function(e){return a.CHM(t),a.oxw(3).onDeleteDataFile(e)}),a.qZA()}if(2&t){const t=a.oxw(3);a.Q6J("project",t.project)("allowedExtensions",t.allowedFormats)("tasks",t.tasks)("tags",t.tags)("folder",t.parentDataFileID)("keepFileName",t.keepFileName)("name",t.name)("desc",t.desc)("prefix",t.prefix)("suffix",t.suffix)}}function Li(t,e){if(1&t&&(a.ynx(0),a.YNc(1,Bi,1,10,"chi-path-importer",49),a.BQk()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("ngIf",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp&&t.currentUser.auths.bdp>=3)}}function zi(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"chi-add-folder",50),a.NdJ("updateDataFile",function(e){return a.CHM(t),a.oxw(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return a.CHM(t),a.oxw(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return a.CHM(t),a.oxw(2).onDeleteDataFile(e)}),a.qZA(),a.BQk()}if(2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("project",t.project)("allowedExtensions",t.allowedFormats)("tasks",t.tasks)("tags",t.tags)("folder",t.parentDataFileID)("keepFileName",t.keepFileName)("name",t.name)("desc",t.desc)("prefix",t.prefix)("suffix",t.suffix)}}function Vi(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.YNc(1,Yi,5,1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h3"),a._uU(5,"1. Specify the file source"),a.qZA(),a.qZA(),a.TgZ(6,"div",4),a.TgZ(7,"mat-button-toggle-group",5),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().onImportTypeChanged(e)}),a.TgZ(8,"mat-button-toggle",6),a._UZ(9,"i",7),a._uU(10," Your Computer "),a.qZA(),a.TgZ(11,"mat-button-toggle",6),a._UZ(12,"i",8),a._uU(13," Add a folder "),a.qZA(),a.YNc(14,Mi,3,1,"mat-button-toggle",9),a.TgZ(15,"mat-button-toggle",6),a._UZ(16,"i",10),a._uU(17," Server Path "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",2),a.TgZ(19,"div",11),a.TgZ(20,"h3"),a._uU(21,"2. Specify file information (optional)"),a.qZA(),a._UZ(22,"br"),a.TgZ(23,"small",12),a._uU(24,"*You may specify the basic information latter."),a.qZA(),a._UZ(25,"br"),a.TgZ(26,"small",12),a._uU(27,"*All files will be uploaded with the information"),a.qZA(),a.qZA(),a.TgZ(28,"div",4),a.TgZ(29,"mat-form-field",13),a.TgZ(30,"input",14),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().prefix=e}),a.qZA(),a.TgZ(31,"span",15),a._uU(32,"Prefix: "),a.qZA(),a.qZA(),a.TgZ(33,"mat-form-field",13),a.TgZ(34,"input",16),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().suffix=e}),a.qZA(),a.TgZ(35,"span",15),a._uU(36,"Suffix: "),a.qZA(),a.qZA(),a.TgZ(37,"mat-form-field",17),a.TgZ(38,"input",18),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().name=e}),a.qZA(),a.TgZ(39,"b",19),a._uU(40,"Name: "),a.qZA(),a.TgZ(41,"span",20),a._UZ(42,"u",21),a.qZA(),a.TgZ(43,"span",22),a._UZ(44,"u",21),a.qZA(),a.TgZ(45,"mat-hint",23),a._uU(46,"Leave it blank if using the original file name(s)."),a.qZA(),a.TgZ(47,"mat-hint",24),a._uU(48,"Max 80 characters"),a.qZA(),a.qZA(),a.TgZ(49,"mat-form-field",17),a.TgZ(50,"textarea",25),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().desc=e}),a._uU(51),a.qZA(),a.TgZ(52,"mat-hint",23),a._uU(53,"You may specify the description latter."),a.qZA(),a.TgZ(54,"mat-hint",24),a._uU(55,"Max 300 characters"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(56,"div",2),a.TgZ(57,"div",11),a.TgZ(58,"h3"),a._uU(59,"3. Define tags for your files (optional)"),a.qZA(),a._UZ(60,"br"),a.TgZ(61,"small",12),a._uU(62,"*You may also specify tags for your files."),a.qZA(),a.qZA(),a.YNc(63,Oi,2,3,"div",26),a.qZA(),a.TgZ(64,"div",2),a.TgZ(65,"div",11),a.TgZ(66,"h3"),a._uU(67,"4. Set a folder to upload (optional)"),a.qZA(),a._UZ(68,"br"),a.TgZ(69,"small",12),a._uU(70,"*Only needed when your expect your files in a folder."),a.qZA(),a.qZA(),a.TgZ(71,"div",4),a.TgZ(72,"mat-form-field",17),a.TgZ(73,"mat-select",27),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().parentDataFileID=e}),a.TgZ(74,"mat-option"),a._uU(75,"--- No folder ---"),a.qZA(),a.YNc(76,Si,6,4,"mat-option",28),a.qZA(),a.qZA(),a.TgZ(77,"mat-checkbox",29),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().keepFileName=e}),a._uU(78,"Keep the underlying filename in the folder"),a.qZA(),a._UZ(79,"br"),a.TgZ(80,"small",12),a._uU(81,"*Note: The uploading will fail if the filename already exists in the folder"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(82,"div",2),a.TgZ(83,"div",11),a.TgZ(84,"h3"),a._uU(85,"5. Create DataFile records"),a.qZA(),a.qZA(),a.TgZ(86,"div",4),a._uU(87," The Valid file extensions: "),a.YNc(88,Ei,3,0,"ng-container",30),a.YNc(89,$i,1,1,"ng-template",null,31,a.W1O),a.qZA(),a.TgZ(91,"div",32),a.TgZ(92,"small",12),a._uU(93,"*You may change the created DataFile records right after file imported, but remember to click the save "),a._UZ(94,"i",33),a._uU(95," button after changing DataFile info."),a.qZA(),a.qZA(),a.YNc(96,Pi,6,0,"div",34),a.TgZ(97,"div",35),a.YNc(98,Hi,2,11,"ng-container",36),a.YNc(99,Ri,2,11,"ng-container",36),a.YNc(100,Li,2,1,"ng-container",36),a.YNc(101,zi,2,10,"ng-container",36),a.qZA(),a.qZA(),a.BQk()}if(2&t){const t=a.MAs(90),e=a.oxw();a.xp6(1),a.Q6J("ngIf",e.dialogRef),a.xp6(6),a.Q6J("ngModel",e.importType),a.xp6(1),a.Q6J("value","local"),a.xp6(3),a.Q6J("value","folder"),a.xp6(3),a.Q6J("ngIf",null==e.sysConfig?null:e.sysConfig.googlePickerAPIKey),a.xp6(1),a.Q6J("value","server"),a.xp6(15),a.Q6J("ngModel",e.prefix),a.xp6(4),a.Q6J("ngModel",e.suffix),a.xp6(4),a.Q6J("ngModel",e.name),a.xp6(4),a.Q6J("innerHTML",e.prefix,a.oJD),a.xp6(2),a.Q6J("innerHTML",e.suffix,a.oJD),a.xp6(6),a.Q6J("ngModel",e.desc),a.xp6(1),a.Oqu(e.desc),a.xp6(12),a.Q6J("ngIf",e.project&&e.project.packages.length>0),a.xp6(10),a.Q6J("ngModel",e.parentDataFileID),a.xp6(3),a.Q6J("ngForOf",e.folders),a.xp6(1),a.Q6J("ngModel",e.keepFileName)("disabled",!e.parentDataFileID),a.xp6(11),a.Q6J("ngIf",e.allowedFormats.indexOf("*")>=0)("ngIfElse",t),a.xp6(8),a.Q6J("ngIf",0==e.allowedFormats.length),a.xp6(1),a.Q6J("ngSwitch",e.importType),a.xp6(1),a.Q6J("ngSwitchCase","local"),a.xp6(1),a.Q6J("ngSwitchCase","google"),a.xp6(1),a.Q6J("ngSwitchCase","server"),a.xp6(1),a.Q6J("ngSwitchCase","folder")}}function Ki(t,e){1&t&&(a.TgZ(0,"mat-dialog-actions"),a.TgZ(1,"button",51),a.TgZ(2,"mat-icon"),a._uU(3,"close"),a.qZA(),a._uU(4," Close"),a.qZA(),a.qZA())}let Gi=(()=>{class t{constructor(t,e,i,n){this.projectService=t,this.router=e,this.dialogRef=i,this.data=n,this.keepFileName=!0,this.importTypeChanged=new a.vpe,this.tags=[],n?(this.project=n.project,this.allowedFormats=n.allowedFormats.indexOf("*")>=0?["*"]:n.allowedFormats,this.sysConfig=n.sysConfig,this.importType=n.importType||"local",this.tasks=n.tasks,this.parentDataFileID=n.parentDataFileID||"",this.currentUser=n.currentUser,this.name=n.name||"",this.desc=n.desc||"",this.prefix=n.prefix||"",this.suffix=n.suffix||"",this.title=n.title||"Import data files "+(n.project&&n.project.name?`to the project: ${n.project.name}.`:""),this.tags=Array.isArray(n.tags)?n.tags:[]):(this.allowedFormats=[],this.tasks=[],this.prefix="",this.suffix="",this.desc="",this.name="",this.parentDataFileID="",this.importType="local",this.tags=[],this.title="")}get folders(){return this.project&&this.project.dataFiles?this.project.dataFiles.filter(t=>"Folder"===t.format):[]}onImportTypeChanged(t){this.importType=t,this.importTypeChanged.emit(t)}onTagChanged(t){this.tags=t}onUpdateDataFile(t){const e=this.projectService.updateDataFileInfo(t).subscribe(()=>e.unsubscribe())}onDeleteDataFile(t){const e=this.projectService.deleteDataFileById(t).subscribe(()=>e.unsubscribe())}onNavigateDataFile(t){this.dialogRef&&this.dialogRef.close(),this.router.navigate(["/dataFile",t,"info"])}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.Y),a.Y36(o.F0),a.Y36(n.so,8),a.Y36(n.WI,8))},t.\u0275cmp=a.Xpm({type:t,selectors:[["bdp-file-importer"]],inputs:{allowedFormats:"allowedFormats",project:"project",sysConfig:"sysConfig",importType:"importType",tasks:"tasks",currentUser:"currentUser",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",keepFileName:"keepFileName",title:"title",tags:"tags",parentDataFileID:"parentDataFileID"},outputs:{importTypeChanged:"importTypeChanged"},decls:3,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-row justify-content-between",4,"ngIf"],[1,"row","my-5"],[1,"col-lg-2","col-xl-3","my-1"],[1,"col-lg-10","col-xl-9"],["name","fileSource","aria-label","File Source",1,"ml-3",3,"ngModel","ngModelChange"],[3,"value"],[1,"far","fa-hdd","fa-fw","mr-2"],[1,"fas","fa-folder-plus","fa-fw","mr-2"],[3,"value",4,"ngIf"],[1,"fas","fa-server","fa-fw","mr-2"],[1,"col-lg-2","col-xl-3"],[1,"text-muted"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],[2,"width","100%"],["matInput","","type","text","maxlength","80","size","80","placeholder","The name for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2","text-primary"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["align","start"],["align","end"],["matInput","","placeholder","The description for the data file(s). (max length: 300 characters)","maxlength","300","rows","4",3,"ngModel","ngModelChange"],["class","col-lg-10 col-xl-9",4,"ngIf"],["placeholder","select a folder to import",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","disabled","ngModelChange"],[4,"ngIf","ngIfElse"],["extBlock",""],[1,"col-12"],[1,"fas","fa-save","fa-fw"],["class","col-12",4,"ngIf"],[1,"col-12",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-flex","flex-row","justify-content-between"],["mat-dialog-title","",2,"font-weight","800",3,"innerHTML"],["mat-icon-button","","mat-dialog-close",""],[1,"fab","fa-google-drive","fa-fw","mr-2"],[3,"packages","tasks","tags","tagChange"],[1,"badge","badge-success","mx-1"],["class","badge badge-primary mx-1",4,"ngFor","ngForOf"],[1,"badge","badge-primary","mx-1"],[1,"ml-3"],[1,"text-danger"],[3,"project","allowedExtensions","fileLimits","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","apiKey","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile",4,"ngIf"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],["mat-stroked-button","","mat-dialog-close",""]],template:function(t,e){1&t&&(a.YNc(0,Vi,102,26,"ng-container",0),a._UZ(1,"mat-divider"),a.YNc(2,Ki,5,0,"mat-dialog-actions",0)),2&t&&(a.Q6J("ngIf",e.project&&e.currentUser),a.xp6(2),a.Q6J("ngIf",e.dialogRef))},directives:[l.O5,c.d,r.A9,d.JJ,d.On,r.Yi,u.KE,f.Nt,d.Fj,d.nD,u.qo,u.R9,u.bx,g.gD,p.ey,l.sg,h.oG,l.RF,l.n9,n.uh,m.lW,n.ZT,Z.Hw,x.y,Nt,ve,si,Ii,n.H8],encapsulation:2}),t})()},48157:function(t,e,i){"use strict";i.d(e,{m:function(){return D}});var a=i(61116),n=i(31041),s=i(84369),o=i(9550),l=i(40994),c=i(39199),r=i(95522),d=i(77307),u=i(79961),f=i(13070),g=i(87672),p=i(66431),h=i(50144),m=i(64078),Z=i(35366);let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({providers:[],imports:[[a.ez,n.u5,o.c,s.ot,l.p9,c.p0,r.Hi,d.Ps,u.Bb,f.lN,g.Cq,m.w,h.Bz,p.v]]}),t})();var T=i(57173),k=i(92935),w=i(13841),F=i(92762),A=i(36278);let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({providers:[],imports:[[a.ez,n.u5,T.Nh,k.Is,w.LD,d.Ps,o.c,f.lN,F.vV,s.ot,l.p9,A.t,x,m.w]]}),t})()},64078:function(t,e,i){"use strict";i.d(e,{w:function(){return h}});var a=i(61116),n=i(31041),s=i(6489),o=i(13070),l=i(13841),c=i(95522),r=i(77307),d=i(92935),u=i(84369),f=i(36278),g=i(79961),p=i(35366);let h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[],imports:[[a.ez,n.u5,s.To,o.lN,l.LD,c.Hi,r.Ps,g.Bb,d.Is,u.ot,f.t]]}),t})()},41818:function(t,e,i){"use strict";i.d(e,{y:function(){return R}});var a=i(35366),n=i(51729),s=i(99235),o=i(92935),l=i(61116),c=i(36278),r=i(13070),d=i(13841),u=i(31041),f=i(84369),g=i(95522),p=i(77307),h=i(87064);function m(t,e){1&t&&(a.TgZ(0,"mat-icon",27),a._uU(1,"cancel"),a.qZA())}function Z(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-chip",25),a.NdJ("removed",function(){const e=a.CHM(t).$implicit;return a.oxw(2).toggleTag(e)}),a._uU(1),a.YNc(2,m,2,0,"mat-icon",26),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("removable",!0)("selectable",!1),a.xp6(1),a.hij(" ",t," "),a.xp6(1),a.Q6J("ngIf",i.tags.indexOf(t)>=0&&"Folder"!==t)}}function x(t,e){if(1&t&&(a.TgZ(0,"div",21),a.TgZ(1,"h3"),a._uU(2,"Current selected tags: "),a.qZA(),a.TgZ(3,"mat-chip-list",22,23),a.YNc(5,Z,3,4,"mat-chip",24),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(3),a.Q6J("selectable",!1),a.xp6(2),a.Q6J("ngForOf",t.tags)}}function T(t,e){if(1&t&&(a.TgZ(0,"mat-option",28),a.TgZ(1,"b"),a._uU(2),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(2),a.Oqu(null==t?null:t.name)}}function k(t,e){if(1&t&&(a.TgZ(0,"div"),a._uU(1," Package name: "),a.TgZ(2,"b"),a._uU(3),a.qZA(),a._UZ(4,"br"),a._uU(5," Package description: "),a._UZ(6,"div",29),a.qZA()),2&t){const t=a.oxw();a.xp6(3),a.Oqu(t.selectedPackage.name),a.xp6(3),a.Q6J("innerHTML",t.selectedPackage.desc,a.oJD)}}function w(t,e){1&t&&a._UZ(0,"i",37)}function F(t,e){1&t&&a._UZ(0,"i",38)}function A(t,e){1&t&&a._UZ(0,"i",39)}function D(t,e){1&t&&a._UZ(0,"i",40)}function b(t,e){if(1&t&&(a.TgZ(0,"mat-option",31),a.YNc(1,w,1,0,"i",32),a.YNc(2,F,1,0,"i",33),a.YNc(3,A,1,0,"i",34),a.YNc(4,D,1,0,"i",35),a.TgZ(5,"b",36),a._uU(6),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(1),a.Q6J("ngIf","workflow"==t.type),a.xp6(1),a.Q6J("ngIf","standard"==t.type),a.xp6(1),a.Q6J("ngIf","child"==t.type),a.xp6(1),a.Q6J("ngIf","system"==t.type),a.xp6(2),a.Oqu(null==t?null:t.name)}}function q(t,e){if(1&t&&(a.ynx(0),a.YNc(1,b,7,6,"mat-option",30),a.BQk()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.taskPkgDict[t.selectedPackage.id])}}function C(t,e){if(1&t&&(a.TgZ(0,"div"),a._uU(1," Task name: "),a.TgZ(2,"b"),a._uU(3),a.qZA(),a._UZ(4,"br"),a._uU(5," Task description: "),a._UZ(6,"div",29),a._UZ(7,"br"),a.qZA()),2&t){const t=a.oxw();a.xp6(3),a.Oqu(t.selectedTask.name),a.xp6(3),a.Q6J("innerHTML",t.selectedTask.desc,a.oJD)}}function v(t,e){if(1&t&&(a.TgZ(0,"mat-option",42),a._UZ(1,"i",43),a.TgZ(2,"b"),a._uU(3),a.qZA(),a.qZA()),2&t){const t=a.oxw().$implicit,e=a.oxw();a.Udp("background-color","outFile"===t.type?"#28a745":"#047AFB"),a.Q6J("value",t),a.xp6(1),a.Q6J("ngClass",e.cssArgTypeToIcon(t)),a.xp6(2),a.Oqu(t.name+" "+("inFile"===t.type?"(input)":"(output)"))}}function N(t,e){if(1&t&&(a.ynx(0),a.YNc(1,v,4,5,"mat-option",41),a.BQk()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngIf","inFile"===t.type||"outFile"===t.type)}}function y(t,e){if(1&t&&(a.TgZ(0,"div"),a._uU(1," Argument name: "),a.TgZ(2,"b"),a._uU(3),a.qZA(),a._UZ(4,"br"),a._uU(5," Argument description: "),a._UZ(6,"div",29),a._UZ(7,"br"),a.qZA()),2&t){const t=a.oxw();a.xp6(3),a.Oqu(t.selectedArg.name),a.xp6(3),a.Q6J("innerHTML",t.selectedArg.desc,a.oJD)}}function _(t,e){1&t&&(a.TgZ(0,"mat-icon",27),a._uU(1,"add_circle"),a.qZA())}function J(t,e){1&t&&(a.TgZ(0,"mat-icon",27),a._UZ(1,"i",46),a.qZA())}function U(t,e){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"mat-chip",45),a.NdJ("removed",function(){const e=a.CHM(t).$implicit;return a.oxw(2).toggleTag(e)}),a._uU(2),a.YNc(3,_,2,0,"mat-icon",26),a.YNc(4,J,2,0,"mat-icon",26),a.qZA(),a.BQk()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(1),a.Q6J("selectable",!1),a.xp6(1),a.hij(" ",t," "),a.xp6(1),a.Q6J("ngIf",i.tags.indexOf(t)<0&&"Folder"!==t),a.xp6(1),a.Q6J("ngIf",i.tags.indexOf(t)>=0&&"Folder"!==t)}}function Q(t,e){if(1&t&&(a.TgZ(0,"div",44),a.TgZ(1,"h2"),a._uU(2,"Suggested tags:"),a.qZA(),a.TgZ(3,"mat-chip-list"),a.YNc(4,U,5,4,"ng-container",15),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(4),a.Q6J("ngForOf",t.selectedArg.tags)}}function I(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",47),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.selectedArg&&e.addAllTags(e.selectedArg.tags)}),a._uU(1," Add all suggested tags "),a.qZA()}}function Y(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",48),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.selectedArg&&e.removeAllTags(e.selectedArg.tags)}),a._uU(1," Remove all suggested tags "),a.qZA()}}const M=function(){return[]};let O=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.tagToggleEvent=new a.vpe,e?(this.packages=e.packages||[],this.taskPkgDict=e.taskPkgDict||{},this.tags=e.tags||[]):(this.packages=[],this.taskPkgDict={},this.tags=[])}ngOnInit(){this.packages[0]&&(this.selectedPackage=this.packages[0],this.selectedTask=Array.isArray(this.taskPkgDict[this.selectedPackage.id])?this.taskPkgDict[this.selectedPackage.id][0]:void 0)}onPackageSelctChange(t){this.selectedPackage=t,setTimeout(()=>this.selectedTask=Array.isArray(this.taskPkgDict[t.id])?this.taskPkgDict[t.id][0]:void 0)}toggleTag(t){"Folder"!==t&&this.tagToggleEvent.emit(t)}addAllTags(t){t.filter(t=>this.tags.indexOf(t)<0).forEach(t=>this.toggleTag(t))}removeAllTags(t){t.filter(t=>this.tags.indexOf(t)>=0).forEach(t=>this.toggleTag(t))}cssArgTypeToIcon(t){return t&&t.type?{"fa-file-import":"inFile"===t.type,"fa-file-export":"outFile"===t.type}:{}}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(o.so),a.Y36(o.WI))},t.\u0275cmp=a.Xpm({type:t,selectors:[["bdp-tag-helper-dialog"]],inputs:{packages:"packages",taskPkgDict:"taskPkgDict",tags:"tags"},outputs:{tagToggleEvent:"tagToggleEvent"},decls:37,vars:14,consts:[["mat-dialog-title",""],[1,"container-fluid"],[1,"row"],["class","col-12",4,"ngIf"],[1,"my-2"],[1,"row","mt-3"],[1,"col-lg-4"],[2,"width","100%"],["placeholder","Please select the package",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Please select the desired task",3,"ngModel","ngModelChange"],["taskSelect",""],["placeholder","Please select the input",3,"ngModel","ngModelChange"],["inputFileSelect",""],[4,"ngFor","ngForOf"],["class","col-12 my-3","style","border-left: 1px solid black",4,"ngIf"],["mat-dialog-actions","",1,"my-3"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"col-12"],[3,"selectable"],["tagList",""],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],[3,"removable","selectable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],["class","text-black","style","background-color: #ffc107",3,"value",4,"ngFor","ngForOf"],[1,"text-black",2,"background-color","#ffc107",3,"value"],["class","fas fa-cogs fa-fw mr-1",4,"ngIf"],["class","fas fa-cog fa-fw mr-1",4,"ngIf"],["class","fas fa-puzzle-piece fa-fw mr-1",4,"ngIf"],["class","fas fa-server fa-fw mr-1",4,"ngIf"],[1,"ml-3"],[1,"fas","fa-cogs","fa-fw","mr-1"],[1,"fas","fa-cog","fa-fw","mr-1"],[1,"fas","fa-puzzle-piece","fa-fw","mr-1"],[1,"fas","fa-server","fa-fw","mr-1"],["class","text-white",3,"value","background-color",4,"ngIf"],[1,"text-white",3,"value"],[1,"fas",3,"ngClass"],[1,"col-12","my-3",2,"border-left","1px solid black"],[3,"selectable","removed"],[1,"far","fa-check-circle","fa-fw","text-success"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"h1",0),a._uU(1,"DataFile Tag helper"),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a.YNc(4,x,6,2,"div",3),a.qZA(),a._UZ(5,"mat-divider",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"h3"),a._uU(9,"1. Whcih package do you plan to use for this file?"),a.qZA(),a.TgZ(10,"mat-form-field",7),a.TgZ(11,"mat-select",8),a.NdJ("ngModelChange",function(t){return e.onPackageSelctChange(t)}),a.YNc(12,T,3,2,"mat-option",9),a.qZA(),a.qZA(),a.YNc(13,k,7,2,"div",10),a.qZA(),a.TgZ(14,"div",6),a.TgZ(15,"h3"),a._uU(16,"2. Which task do you like to execute for this file?"),a.qZA(),a.TgZ(17,"mat-form-field",7),a.TgZ(18,"mat-select",11,12),a.NdJ("ngModelChange",function(t){return e.selectedTask=t}),a.YNc(20,q,2,1,"ng-container",10),a.qZA(),a.qZA(),a.YNc(21,C,8,2,"div",10),a.qZA(),a.TgZ(22,"div",6),a.TgZ(23,"h3"),a._uU(24,"3. Which input would this file be used as?"),a.qZA(),a.TgZ(25,"mat-form-field",7),a.TgZ(26,"mat-select",13,14),a.NdJ("ngModelChange",function(t){return e.selectedArg=t}),a.YNc(28,N,2,1,"ng-container",15),a.qZA(),a.qZA(),a.YNc(29,y,8,2,"div",10),a.qZA(),a.YNc(30,Q,5,1,"div",16),a.qZA(),a._UZ(31,"mat-divider"),a.TgZ(32,"div",17),a.TgZ(33,"button",18),a._uU(34,"Close"),a.qZA(),a.YNc(35,I,2,0,"button",19),a.YNc(36,Y,2,0,"button",20),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("ngIf",e.tags.length>0),a.xp6(7),a.Q6J("ngModel",e.selectedPackage),a.xp6(1),a.Q6J("ngForOf",e.packages),a.xp6(1),a.Q6J("ngIf",e.selectedPackage),a.xp6(5),a.Q6J("ngModel",e.selectedTask),a.xp6(2),a.Q6J("ngIf",e.selectedPackage),a.xp6(1),a.Q6J("ngIf",e.selectedTask),a.xp6(5),a.Q6J("ngModel",e.selectedArg),a.xp6(2),a.Q6J("ngForOf",(null==e.selectedTask?null:e.selectedTask.arguments)||a.DdM(13,M)),a.xp6(1),a.Q6J("ngIf",e.selectedArg),a.xp6(1),a.Q6J("ngIf",e.selectedArg),a.xp6(5),a.Q6J("ngIf",null==e.selectedArg?null:e.selectedArg.tags),a.xp6(1),a.Q6J("ngIf",null==e.selectedArg?null:e.selectedArg.tags))},directives:[o.uh,l.O5,c.d,r.KE,d.gD,u.JJ,u.On,l.sg,o.H8,f.lW,o.ZT,g.qn,g.HS,p.Hw,g.qH,h.ey,l.mk],encapsulation:2}),t})();var S=i(79961);function E(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-icon",13),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw().removeFromTags(e)}),a._uU(1,"cancel"),a.qZA()}}function j(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-chip",11),a.NdJ("click",function(e){const i=a.CHM(t).$implicit;return a.oxw().onTagClick(e,i)}),a._uU(1),a.YNc(2,E,2,0,"mat-icon",12),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw();a.Q6J("color",i.highlightTags.indexOf(t)>=0?"primary":"default")("removable",!0)("selected",!0),a.xp6(1),a.hij(" ",t," "),a.xp6(1),a.Q6J("ngIf",!i.disabled&&"Folder"!==t)}}function $(t,e){1&t&&(a.TgZ(0,"mat-hint",14),a._uU(1,"Valid characters: a-z, dash (-), and underline (_)."),a.qZA())}function P(t,e){if(1&t&&(a.TgZ(0,"mat-option",15),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(1),a.hij(" ",t," ")}}function H(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().openTagHelperDialog()}),a.TgZ(1,"mat-icon"),a._UZ(2,"i",17),a.qZA(),a.qZA()}}let R=(()=>{class t{constructor(t){this.dialogRef=t,this.packages=[],this.tasks=[],this.tags=[],this.disabled=!1,this.tagChange=new a.vpe,this.tagClicked=new a.vpe,this.highlightTags=[],this.taskPkgDict={},this.validTags=[],this.separatorKeysCodes=[s.K5,s.OC],this.filteredTags=[]}ngOnInit(){}ngOnChanges(t){for(const e in t)"packages"===e?this.packages=t[e].currentValue:"tasks"===e?(this.tasks=t[e].currentValue,this.updatePkgTaskDict()):"tags"===e?Array.isArray(t[e].currentValue)&&(this.tags=[],t[e].currentValue.forEach(t=>this.addTag(t,!0))):"disabled"===e&&(this.disabled=t[e].currentValue)}updatePkgTaskDict(){if(this.taskPkgDict={},Array.isArray(this.tasks)){for(let t=0;t<this.tasks.length;t++){const e=this.tasks[t],i=e.package?e.package:null;i&&(Array.isArray(this.taskPkgDict[i])||(this.taskPkgDict[i]=[]),this.taskPkgDict[i].push(e))}Object.keys(this.taskPkgDict).forEach(t=>this.taskPkgDict[t]=(0,n.X)(this.taskPkgDict[t],[t=>t.name],["asc"])),this.validTags=this.getValidTags(this.tasks)}}getValidTags(t){const e={};return t.forEach(t=>[...new Set([].concat.apply([],t.arguments.filter(t=>"inFile"===t.type||"outFile"===t.type).map(t=>t.tags)))].forEach(t=>e[t.toString()]=1)),(0,n.X)(Object.keys(e),"asc")}onTagInputChange(t,e){let i=e.value;i=i.replace(/[^a-z0-9\-]/g,""),this.filteredTags=this.validTags.filter(t=>t.indexOf(i)>=0&&this.tags.indexOf(t)<0&&"Folder"!==t),e.value=i}addTag(t,e){if("Folder"!==t){if(""===(t=(t=t.toLowerCase().replace(/[^a-z0-9\.\-\_]/g,"")).trim()))return;for(let e=0;e<this.tags.length;e++)if(t===this.tags[e])return}this.tags.push(t),this.tags=this.tags.slice(),e||this.tagChange.emit(this.tags)}addToTags(t){const e=t.input;this.addTag(t.value),e&&setTimeout(()=>e.value="")}onTagSelect(t,e){this.removeFromTags(e.value,!0),e.value="",this.addTag(t.option.value)}removeFromTags(t,e){for(let i=0;i<this.tags.length;i++)if(t===this.tags[i]){this.tags.splice(i,1);break}this.tags=this.tags.slice(),e||this.tagChange.emit(this.tags)}onTagClick(t,e){t.stopPropagation(),this.tagClicked.emit(e)}openTagHelperDialog(){const t=this.dialogRef.open(O,{width:"90vw",height:"90vh",data:{packages:this.packages,taskPkgDict:this.taskPkgDict,tags:this.tags}});t.componentInstance.tagToggleEvent.subscribe(e=>{if("Folder"===e)return;const i=this.tags.indexOf(e);i>=0?this.tags.splice(i,1):this.tags.push(e),t.componentInstance.tags=this.tags,this.tagChange.emit(this.tags)}),t.afterClosed().subscribe(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(o.uw))},t.\u0275cmp=a.Xpm({type:t,selectors:[["bdp-tag-input"]],inputs:{packages:"packages",tasks:"tasks",tags:"tags",disabled:"disabled",highlightTags:"highlightTags"},outputs:{tagChange:"tagChange",tagClicked:"tagClicked"},features:[a.TTD],decls:11,vars:11,consts:[[2,"width","100%"],[3,"selectable"],["tagList",""],[3,"color","removable","selected","click",4,"ngFor","ngForOf"],["matInput","",2,"width","100%",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matAutocomplete","disabled","matChipInputTokenEnd","keyup"],["tagInput",""],["align","end",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matPrefix","","class","mr-3",3,"click",4,"ngIf"],[3,"color","removable","selected","click"],["matChipRemove","",3,"click",4,"ngIf"],["matChipRemove","",3,"click"],["align","end"],[3,"value"],["mat-icon-button","","matPrefix","",1,"mr-3",3,"click"],[1,"fas","fa-search-plus","fa-fw","fa-lg"]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-form-field",0),a.TgZ(1,"mat-chip-list",1,2),a.YNc(3,j,3,5,"mat-chip",3),a.TgZ(4,"input",4,5),a.NdJ("matChipInputTokenEnd",function(t){return e.addToTags(t)})("keyup",function(i){a.CHM(t);const n=a.MAs(5);return e.onTagInputChange(i,n)}),a.qZA(),a.qZA(),a.YNc(6,$,2,0,"mat-hint",6),a.TgZ(7,"mat-autocomplete",7,8),a.NdJ("optionSelected",function(i){a.CHM(t);const n=a.MAs(5);return e.onTagSelect(i,n)}),a.YNc(9,P,2,2,"mat-option",9),a.qZA(),a.YNc(10,H,3,0,"button",10),a.qZA()}if(2&t){const t=a.MAs(2),i=a.MAs(8);a.xp6(1),a.Q6J("selectable",!0),a.xp6(2),a.Q6J("ngForOf",e.tags),a.xp6(1),a.Q6J("placeholder",e.disabled?"":"Add new tags here...")("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!1)("matAutocomplete",i)("disabled",e.disabled),a.xp6(2),a.Q6J("ngIf",!e.disabled),a.xp6(3),a.Q6J("ngForOf",e.filteredTags),a.xp6(1),a.Q6J("ngIf",!e.disabled)}},directives:[r.KE,g.qn,l.sg,g.oH,S.ZL,l.O5,S.XC,g.HS,p.Hw,g.qH,r.bx,h.ey,f.lW,r.qo],encapsulation:2}),t})()},22740:function(t,e,i){"use strict";i.d(e,{T:function(){return d}});var a=i(50144),n=i(61116),s=i(31041),o=i(84369),l=i(22797),c=i(95522),r=i(35366);let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[n.ez,s.u5,a.Bz,o.ot,l.QW,c.Hi]]}),t})()}}]);